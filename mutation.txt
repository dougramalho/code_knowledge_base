mutation {
  loadProjectData(data: "eyJDRENXb3JrZXIiOiB7IldvcmtlciI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjoge319fSwgIkNvbnNvbGVBcHAxIjogeyJQcm9ncmFtIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7Ik1haW4iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIHN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncylcbiAgICB7XG5cbiAgICB9In19fSwgIlN0YXJ0dXAiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29uZmlndXJhdGlvbiI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29uZmlndXJlU2VydmljZXMiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgdm9pZCBDb25maWd1cmVTZXJ2aWNlcyhJU2VydmljZUNvbGxlY3Rpb24gc2VydmljZXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNlcnZpY2VzLkFkZERiQ29udGV4dDxBenVyZURiQ29udGV4dD4ob3B0aW9ucyA9PlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuVXNlU3FsU2VydmVyKENvbmZpZ3VyYXRpb24uR2V0Q29ubmVjdGlvblN0cmluZyhcIkRlZmF1bHRDb25uZWN0aW9uXCIpKSk7XG4gICAgICAgICAgICBcblxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAib3B0aW9ucyIsICJtZXRob2QiOiAiVXNlU3FsU2VydmVyIn0sIHsidHlwZSI6ICJDb25maWd1cmF0aW9uIiwgIm1ldGhvZCI6ICJHZXRDb25uZWN0aW9uU3RyaW5nIn1dfSwgIkNvbmZpZ3VyZSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyB2b2lkIENvbmZpZ3VyZShJQXBwbGljYXRpb25CdWlsZGVyIGFwcClcbiAgICAgICAge1xuICAgICAgICAgICBcbiAgICAgICAgfSJ9fX19LCAiQ29uc29sZUFwcDIiOiB7IlByb2dyYW0iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiTWFpbiI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpXG4gICAge1xuICAgICAgICBDcmVhdGVIb3N0QnVpbGRlcihhcmdzKS5CdWlsZCgpLlJ1bigpO1xuICAgIH0ifSwgIkNyZWF0ZUhvc3RCdWlsZGVyIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIHN0YXRpYyBJSG9zdEJ1aWxkZXIgQ3JlYXRlSG9zdEJ1aWxkZXIoc3RyaW5nW10gYXJncykgPT5cbiAgICAgICAgICBIb3N0LkNyZWF0ZURlZmF1bHRCdWlsZGVyKGFyZ3MpXG4gICAgICAgICAgICAgIC5Db25maWd1cmVBcHBDb25maWd1cmF0aW9uKChob3N0aW5nQ29udGV4dCwgY29uZmlnKSA9PlxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjb25maWcuQWRkSnNvbkZpbGUoXCJhcHBzZXR0aW5ncy5qc29uXCIsIG9wdGlvbmFsOiBmYWxzZSwgcmVsb2FkT25DaGFuZ2U6IHRydWUpO1xuICAgICAgICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSG9zdCIsICJtZXRob2QiOiAiQ3JlYXRlRGVmYXVsdEJ1aWxkZXIifSwgeyJ0eXBlIjogImNvbmZpZyIsICJtZXRob2QiOiAiQWRkSnNvbkZpbGUifV19fX19LCAiRGVtb25zdHJhdGl2ZVdvcmtlciI6IHsiV29ya2VyIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX19LCAiRGlzdHJpYnV0aW9uV29ya2VyIjogeyJXb3JrZXIiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHt9fX0sICJFY2FkR2xvYm9wbGF5LkRpc3RyaWJ1aXRpb25Xb3JrZXIiOiB7IlByb2dyYW0iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHt9fSwgIldvcmtlciI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjoge319fSwgIkVjYWRHbG9ib3BsYXkuRG9tYWluIjogeyJkYXRhIjogeyJFY2FkRGJDb250ZXh0IjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkRpc3RDb25zb2xpZGFjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RBc3NvY2lhY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0Q29tcGV0ZW5jaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RDb25zb2xpZGFjYW9BdWQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RDb25zb2xpZGFjYW9EdGwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RFeGVjdWNhb1N1bWFyaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RQZW5kZW50ZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGlzdFBvbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0UmV0aWRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0Um9sIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0Um9sT3JpZ2VtRXhlY3VjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RUaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk1vdGl2b1JldGVuY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEZW1vbnN0cmF0aXZvVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUnVicmljYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiU2RBdlJvbE9icmFGb25vQXVkaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk9uQ29uZmlndXJpbmciOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkNvbmZpZ3VyaW5nKERiQ29udGV4dE9wdGlvbnNCdWlsZGVyIG9wdGlvbnNCdWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBvcHRpb25zQnVpbGRlclxuICAgICAgICAgICAgICAgIC5Vc2VMb2dnZXJGYWN0b3J5KE15TG9nZ2VyRmFjdG9yeSkgIC8vIExvZ2dlckZhY3Rvcnkgc2hvdWxkIGJlIGRlZmluZWRcbiAgICAgICAgICAgICAgICAuRW5hYmxlU2Vuc2l0aXZlRGF0YUxvZ2dpbmcoKVxuICAgICAgICAgICAgICAgIC5Vc2VTcWxTZXJ2ZXIoXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNCdWlsZGVyLk9wdGlvbnMuRmluZEV4dGVuc2lvbjxNaWNyb3NvZnQuRW50aXR5RnJhbWV3b3JrQ29yZS5TcWxTZXJ2ZXIuSW5mcmFzdHJ1Y3R1cmUuSW50ZXJuYWwuU3FsU2VydmVyT3B0aW9uc0V4dGVuc2lvbj4oKT8uQ29ubmVjdGlvblN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgc3FsU2VydmVyT3B0aW9uc0FjdGlvbjogc3FsT3B0aW9ucyA9PlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcWxPcHRpb25zLkNvbW1hbmRUaW1lb3V0KDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcWxPcHRpb25zLkVuYWJsZVJldHJ5T25GYWlsdXJlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFJldHJ5Q291bnQ6IDUsIC8vIE5cdTAwZmFtZXJvIG1cdTAwZTF4aW1vIGRlIHRlbnRhdGl2YXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5OiBUaW1lU3Bhbi5Gcm9tU2Vjb25kcygxMCksIC8vIFRlbXBvIG1cdTAwZTF4aW1vIGRlIGVzcGVyYSBlbnRyZSB0ZW50YXRpdmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JOdW1iZXJzVG9BZGQ6IG51bGwpOyAvLyBEZWl4ZSBudWxvIHBhcmEgdXNhciBvcyBwYWRyXHUwMGY1ZXNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJzcWxPcHRpb25zIiwgIm1ldGhvZCI6ICJDb21tYW5kVGltZW91dCJ9LCB7InR5cGUiOiAic3FsT3B0aW9ucyIsICJtZXRob2QiOiAiRW5hYmxlUmV0cnlPbkZhaWx1cmUifSwgeyJ0eXBlIjogIlRpbWVTcGFuIiwgIm1ldGhvZCI6ICJGcm9tU2Vjb25kcyJ9XX0sICJPbk1vZGVsQ3JlYXRpbmciOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbk1vZGVsQ3JlYXRpbmcoTW9kZWxCdWlsZGVyIG1vZGVsQnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgLy9Db25maWd1cmVEaXN0Q29uc29saWRhY2FvKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdENvbnNvbGlkYWNhbz4oKSk7XG4gICAgICAgICAgICAvL0NvbmZpZ3VyZURpc3RBc3NvY2lhY2FvKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdEFzc29jaWFjYW8+KCkpO1xuICAgICAgICAgICAgLy9Db25maWd1cmVEaXN0Q29tcGV0ZW5jaWEobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0Q29tcGV0ZW5jaWE+KCkpO1xuICAgICAgICAgICAgLy9Db25maWd1cmVEaXN0Q29uc29saWRhY2FvQXVkKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdENvbnNvbGlkYWNhb0F1ZD4oKSk7XG4gICAgICAgICAgICAvL0NvbmZpZ3VyZURpc3RDb25zb2xpZGFjYW9EdGwobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0Q29uc29saWRhY2FvRHRsPigpKTtcbiAgICAgICAgICAgIC8vQ29uZmlndXJlRGlzdEV4ZWN1Y2FvU3VtYXJpbyhtb2RlbEJ1aWxkZXIuRW50aXR5PERpc3RFeGVjdWNhb1N1bWFyaW8+KCkpO1xuICAgICAgICAgICAgLy9Db25maWd1cmVEaXN0UGVuZGVudGUobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0UGVuZGVudGU+KCkpO1xuICAgICAgICAgICAgLy9Db25maWd1cmVEaXN0UG9udG8obW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0UG9udG8+KCkpO1xuICAgICAgICAgICAgLy9Db25maWd1cmVEaXN0UmV0aWRvKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdFJldGlkbz4oKSk7XG4gICAgICAgICAgICAvL0NvbmZpZ3VyZURpc3RyaWJ1aWNhbyhtb2RlbEJ1aWxkZXIuRW50aXR5PERpc3RyaWJ1aWNhbz4oKSk7XG4gICAgICAgICAgICAvL0NvbmZpZ3VyZURpc3RSb2wobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0Um9sPigpKTtcbiAgICAgICAgICAgIC8vQ29uZmlndXJlRGlzdFJvbE9yaWdlbUV4ZWN1Y2FvKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdFJvbE9yaWdlbUV4ZWN1Y2FvPigpKTtcbiAgICAgICAgICAgIC8vQ29uZmlndXJlRGlzdFRpdHVsYXIobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0VGl0dWxhcj4oKSk7XG4gICAgICAgICAgICAvL0NvbmZpZ3VyZU1vdGl2b1JldGVuY2FvKG1vZGVsQnVpbGRlci5FbnRpdHk8TW90aXZvUmV0ZW5jYW8+KCkpO1xuICAgICAgICAgICAgLy9Db25maWd1cmVEZW1vbnN0cmF0aXZvVGl0dWxhcihtb2RlbEJ1aWxkZXIuRW50aXR5PFJlbERlbW9uc3RyYXRpdm9UaXR1bGFyPigpKTtcbiAgICAgICAgICAgIC8vQ29uZmlndXJlUnVicmljYShtb2RlbEJ1aWxkZXIuRW50aXR5PFJ1YnJpY2E+KCkpO1xuICAgICAgICAgICAgYmFzZS5Pbk1vZGVsQ3JlYXRpbmcobW9kZWxCdWlsZGVyKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogImJhc2UiLCAibWV0aG9kIjogIk9uTW9kZWxDcmVhdGluZyJ9XX0sICJDb25maWd1cmVEaXN0Q29uc29saWRhY2FvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RDb25zb2xpZGFjYW8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbnNvbGlkYWNhbz4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiRElTVF9DT05TT0xJREFDQU9cIik7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2RDb25zb2xpZERpc3RyaWIpLkhhc0NvbHVtbk5hbWUoXCJjb2RfY29uc29saWRkaXN0cmliXCIpLkhhc0RlZmF1bHRWYWx1ZVNxbChcIm5ld2lkKClcIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbnNvbGlkYWNhbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RBc3NvY2lhY2FvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RBc3NvY2lhY2FvKEVudGl0eVR5cGVCdWlsZGVyPERpc3RBc3NvY2lhY2FvPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUX0FTU09DSUFDQU9cIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kRGlzdEFzc29jaWFjYW8pO1xuICAgICAgICAgICAgYnVpbGRlci5Qcm9wZXJ0eShlID0+IGUuQ29kRGlzdEFzc29jaWFjYW8pLkhhc0NvbHVtbk5hbWUoXCJjb2RfZGlzdGFzc29jaWFjYW9cIik7XG5cbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLlZsckFzc29jaWFjYW8pXG4gICAgICAgICAgICAgICAgICAgLkhhc1ByZWNpc2lvbigxOCwgOSlcbiAgICAgICAgICAgICAgICAgICAuSGFzQ29sdW1uTmFtZShcInZscl9hc3NvY2lhY2FvXCIpO1xuXG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5WbHJBc3NvY0NvbnZQY3RWZXJiYSlcbiAgICAgICAgICAgICAgICAgICAuSGFzUHJlY2lzaW9uKDE4LCA5KVxuICAgICAgICAgICAgICAgICAgIC5IYXNDb2x1bW5OYW1lKFwidmxyX2Fzc29jY29udnBjdHZlcmJhXCIpO1xuXG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5WbHJBc3NvY0NvcnJlY2FvKVxuICAgICAgICAgICAgICAgICAgIC5IYXNQcmVjaXNpb24oMTgsIDkpXG4gICAgICAgICAgICAgICAgICAgLkhhc0NvbHVtbk5hbWUoXCJ2bHJfYXNzb2Njb3JyZWNhb1wiKTtcbiAgICAgICAgICAgXG4gICAgICAgICAgICBidWlsZGVyLkhhc09uZTxEaXN0VGl0dWxhcj4oKSBcbiAgICAgICAgICAgICAgICAgICAuV2l0aE1hbnkoKVxuICAgICAgICAgICAgICAgICAgIC5IYXNGb3JlaWduS2V5KGUgPT4gZS5Db2REaXN0VGl0dWxhcik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0QXNzb2NpYWNhbz4iLCAibWV0aG9kIjogIlRvVGFibGUifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RBc3NvY2lhY2FvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0QXNzb2NpYWNhbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0QXNzb2NpYWNhbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0QXNzb2NpYWNhbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0QXNzb2NpYWNhbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RDb21wZXRlbmNpYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0Q29tcGV0ZW5jaWEoRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbXBldGVuY2lhPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUX0NPTVBFVEVOQ0lBXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZENvbXBldGVuY2lhKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZENvbXBldGVuY2lhKS5IYXNDb2x1bW5OYW1lKFwiY29kX2NvbXBldGVuY2lhXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbXBldGVuY2lhPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbXBldGVuY2lhPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29tcGV0ZW5jaWE+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVEaXN0Q29uc29saWRhY2FvQXVkIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RDb25zb2xpZGFjYW9BdWQoRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbnNvbGlkYWNhb0F1ZD4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiRElTVF9DT05TT0xJREFDQU9fQVVEXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZENvbnNvbGlkRGlzdHJpYkF1ZGlvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZENvbnNvbGlkRGlzdHJpYkF1ZGlvKS5IYXNQcmVjaXNpb24oMTgsIDkpO1xuICAgICAgICAgICAgYnVpbGRlci5Qcm9wZXJ0eShlID0+IGUuQ29kQ29uc29saWREaXN0cmliQXVkaW8pLkhhc0NvbHVtbk5hbWUoXCJjb2RfY29uc29saWRkaXN0cmliYXVkaW9cIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvQXVkPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbnNvbGlkYWNhb0F1ZD4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdENvbnNvbGlkYWNhb0F1ZD4iLCAibWV0aG9kIjogIlByb3BlcnR5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvQXVkPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdENvbnNvbGlkYWNhb0R0bCI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0Q29uc29saWRhY2FvRHRsKEVudGl0eVR5cGVCdWlsZGVyPERpc3RDb25zb2xpZGFjYW9EdGw+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfQ09OU09MSURBQ0FPX0RUTFwiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2RDb25zb2xpZERpc3RyaWJEdGwpO1xuICAgICAgICAgICAgYnVpbGRlci5Qcm9wZXJ0eShlID0+IGUuQ29kQ29uc29saWREaXN0cmliRHRsKS5IYXNDb2x1bW5OYW1lKFwiY29kX2NvbnNvbGlkZGlzdHJpYmR0bFwiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RDb25zb2xpZGFjYW9EdGw+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvRHRsPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvRHRsPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdEV4ZWN1Y2FvU3VtYXJpbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0RXhlY3VjYW9TdW1hcmlvKEVudGl0eVR5cGVCdWlsZGVyPERpc3RFeGVjdWNhb1N1bWFyaW8+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfRVhFQ1VDQU9fU1VNQVJJT1wiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2REaXN0RXhlY3VjYW9TdW1hcmlvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RFeGVjdWNhb1N1bWFyaW8pLkhhc0NvbHVtbk5hbWUoXCJjb2RfZGlzdGV4ZWN1Y2Fvc3VtYXJpb1wiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RFeGVjdWNhb1N1bWFyaW8+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0RXhlY3VjYW9TdW1hcmlvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0RXhlY3VjYW9TdW1hcmlvPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdFBlbmRlbnRlIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RQZW5kZW50ZShFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UGVuZGVudGU+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfUEVOREVOVEVcIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kRGlzdFBlbmRlbnRlKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RQZW5kZW50ZSkuSGFzQ29sdW1uTmFtZShcImNvZF9kaXN0cGVuZGVudGVcIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UGVuZGVudGU+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UGVuZGVudGU+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RQZW5kZW50ZT4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RQb250byI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0UG9udG8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFBvbnRvPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUX1BPTlRPXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZFBvbnRvRGlzdHJpYnVpY2FvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZFBvbnRvRGlzdHJpYnVpY2FvKS5IYXNDb2x1bW5OYW1lKFwiY29kX3BvbnRvZGlzdHJpYnVpY2FvXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFBvbnRvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFBvbnRvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UG9udG8+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVEaXN0UmV0aWRvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RSZXRpZG8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJldGlkbz4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiRElTVF9SRVRJRE9cIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kRGlzdFJldGlkbyk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2REaXN0UmV0aWRvKS5IYXNDb2x1bW5OYW1lKFwiY29kX2Rpc3RyZXRpZG9cIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UmV0aWRvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJldGlkbz4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJldGlkbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0cmlidWljYW8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdHJpYnVpY2FvPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUUklCVUlDQU9cIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kRGlzdHJpYnVpY2FvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RyaWJ1aWNhbykuSGFzQ29sdW1uTmFtZShcImNvZF9kaXN0cmlidWljYW9cIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0cmlidWljYW8+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0cmlidWljYW8+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RyaWJ1aWNhbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RSb2wiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIHZvaWQgQ29uZmlndXJlRGlzdFJvbChFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUX1JPTFwiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2REaXN0Um9sKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RSb2wpLkhhc0NvbHVtbk5hbWUoXCJjb2RfZGlzdHJvbFwiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RSb2w+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdFJvbE9yaWdlbUV4ZWN1Y2FvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RSb2xPcmlnZW1FeGVjdWNhbyhFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sT3JpZ2VtRXhlY3VjYW8+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfUk9MT1JJR0VNX0VYRUNVQ0FPXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZERpc3RPcmlnZW1FeGVjdWNhbyk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2REaXN0T3JpZ2VtRXhlY3VjYW8pLkhhc0NvbHVtbk5hbWUoXCJjb2RfZGlzdG9yaWdlbWV4ZWN1Y2FvXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJvbE9yaWdlbUV4ZWN1Y2FvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJvbE9yaWdlbUV4ZWN1Y2FvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sT3JpZ2VtRXhlY3VjYW8+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVEaXN0VGl0dWxhciI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0VGl0dWxhcihFbnRpdHlUeXBlQnVpbGRlcjxEaXN0VGl0dWxhcj4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiRElTVF9USVRVTEFSXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZERpc3RUaXR1bGFyKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RUaXR1bGFyKS5IYXNDb2x1bW5OYW1lKFwiY29kX2Rpc3R0aXR1bGFyXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFRpdHVsYXI+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0VGl0dWxhcj4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFRpdHVsYXI+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVNb3Rpdm9SZXRlbmNhbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVNb3Rpdm9SZXRlbmNhbyhFbnRpdHlUeXBlQnVpbGRlcjxNb3Rpdm9SZXRlbmNhbz4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiTU9USVZPX1JFVEVOQ0FPXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLlNnbE1vdGl2b1JldGVuY2FvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLlNnbE1vdGl2b1JldGVuY2FvKS5IYXNDb2x1bW5OYW1lKFwic2dsX21vdGl2b3JldGVuY2FvXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8TW90aXZvUmV0ZW5jYW8+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxNb3Rpdm9SZXRlbmNhbz4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8TW90aXZvUmV0ZW5jYW8+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVEZW1vbnN0cmF0aXZvVGl0dWxhciI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEZW1vbnN0cmF0aXZvVGl0dWxhcihFbnRpdHlUeXBlQnVpbGRlcjxSZWxEZW1vbnN0cmF0aXZvVGl0dWxhcj4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiUkVMX0RFTU9OU1RSQVRJVk9fVElUVUxBUlwiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2REaXN0VGl0dWxhcik7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2REaXN0VGl0dWxhcikuSGFzQ29sdW1uTmFtZShcImNvZF9kaXN0dGl0dWxhclwiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPFJlbERlbW9uc3RyYXRpdm9UaXR1bGFyPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8UmVsRGVtb25zdHJhdGl2b1RpdHVsYXI+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPFJlbERlbW9uc3RyYXRpdm9UaXR1bGFyPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlUnVicmljYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVSdWJyaWNhKEVudGl0eVR5cGVCdWlsZGVyPFJ1YnJpY2E+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIlJVQlJJQ0FcIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kUnVicmljYSk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2RSdWJyaWNhKS5IYXNDb2x1bW5OYW1lKFwiY29kX3J1YnJpY2FcIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxSdWJyaWNhPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8UnVicmljYT4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8UnVicmljYT4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfX19fSwgIkRUTyI6IHsiQXVkaW9WaXN1YWxHbG9ib3BsYXkiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kT2JyYUF1ZGlvRWNhZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTnJvRmF0b3JEaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsckZhdG9yRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJTb21hRmF0b3JEaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclBvbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bG9PcmlnIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bG9UcmFkIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRTaXR1YWNhb0F1ZGlvdmlzdWFsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21DYXBFcGlzb2Rpb09yaWciOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbUNhcEVwaXNvZGlvVHJhZHV6aWRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb21wZXRlbmNpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRm9ub2dyYW1hcyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiT2JyYXNNdXNpY2FpcyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGl0dWxhcmVzRm9ub2dyYW1hIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXR1bGFyZXNPYnJhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2REaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZERpc3RSb2wiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFJvbE11c2ljYWwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRhdEV4aWJpY2FvQXVkaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZE9icmFGb25vQXVkaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRhdEluaWNpb1JvbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGF0RmltUm9sIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RGb250ZVJvbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kVGlwUm9sIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RPcmlnZW1Sb2wiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFVzdWFyaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcENhcmFjdGVyaXN0aWNhZGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiR2VyYXJDb25zb2xpZGFjYW9Db25leGEiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgSUVudW1lcmFibGU8Q29uc29saWRhY2FvQ0M+IEdlcmFyQ29uc29saWRhY2FvQ29uZXhhKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuRm9ub2dyYW1hcy5Db3VudCgpID4gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgdmVyYmFDb25leGEgPSAoQ29tcGV0ZW5jaWEuVmxyVmVyYmFDb25leGEgKiBWbHJGYXRvckRpc3RyaWJ1aWNhbykgLyBDb21wZXRlbmNpYS5WZXJiYVRvdGFsO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbnNvbGlkYWNvZXNDQyA9IEZvbm9ncmFtYXMuU2VsZWN0KHggPT4gbmV3IENvbnNvbGlkYWNhb0NDKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIENvZEF1ZGlvVmlzdWFsID0gdGhpcy5Db2RPYnJhQXVkaW9FY2FkLFxuICAgICAgICAgICAgICAgICAgICBDb2RGb25vZ3JhbWEgPSB4LkZvbm9ncmFtYSxcbiAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcmlhID0geC5DYXJhY3RlcmlzdGljYURpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICAgICAgT2NvcnJlbmNpYXNBdWRpb3Zpc3VhbCA9IHRoaXMuTnJvRmF0b3JEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgIEV4ZWN1Y29lc011c2ljYSA9IHguUXRkRHVyYWNhb011c2ljYSxcbiAgICAgICAgICAgICAgICAgICAgUGVzb0RhQ2F0ZWdvcmlhID0gRW51bUhlbHBlci5HZXRFbnVtVmFsdWUoeC5DYXJhY3RlcmlzdGljYURpc3RyaWJ1aWNhbylcbiAgICAgICAgICAgICAgICB9KS5Ub0xpc3QoKTtcblxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGNvbnNvbGlkYWNvZXNDQy5Hcm91cEJ5KGl0ZW0gPT4gaXRlbS5DYXRlZ29yaWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdChncnVwbyA9PiBuZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3JpYSA9IGdydXBvLktleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU29tYSA9IGdydXBvLlN1bShpdGVtID0+IGl0ZW0uRXhlY3Vjb2VzTXVzaWNhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNjIGluIGNvbnNvbGlkYWNvZXNDQylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNjLlNvbWFFeGVjdWNhb0Rhc0NhcmFjdGVyaXN0aWNhID0gZ3JvdXAuV2hlcmUoZ3JvdXAgPT4gZ3JvdXAuQ2F0ZWdvcmlhID09IGNjLkNhdGVnb3JpYSkuU2luZ2xlKCkuU29tYTtcbiAgICAgICAgICAgICAgICAgICAgY2MuVG90YWxFeGVjdWNvZXMgPSBjYy5Tb21hRXhlY3VjYW9EYXNDYXJhY3RlcmlzdGljYSAqIGNjLk9jb3JyZW5jaWFzQXVkaW92aXN1YWw7XG4gICAgICAgICAgICAgICAgICAgIGNjLlRvdGFsRXhlY3Vjb2VzWFBlc29DYXRlZ29yaWEgPSBjYy5Ub3RhbEV4ZWN1Y29lcyAqIGNjLlBlc29EYUNhdGVnb3JpYS5WYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGRpc3RpbmN0ID0gY29uc29saWRhY29lc0NDLkRpc3RpbmN0QnkocCA9PiBwLkNhdGVnb3JpYSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAyID0gZGlzdGluY3QuR3JvdXBCeShpdGVtID0+IGl0ZW0uQ2F0ZWdvcmlhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdChncnVwbyA9PiBuZXdcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yaWEgPSBncnVwby5LZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU29tYSA9IGdydXBvLlN1bShpdGVtID0+IGl0ZW0uVG90YWxFeGVjdWNvZXNYUGVzb0NhdGVnb3JpYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYWEgaW4gY29uc29saWRhY29lc0NDKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvbWEgPSBncm91cDIuU3VtKGcgPT4gZy5Tb21hKTtcbiAgICAgICAgICAgICAgICAgICAgYWEuUG9udG8gPSAodmVyYmFDb25leGEgLyBzb21hKSAqIChhYS5Ub3RhbEV4ZWN1Y29lc1hQZXNvQ2F0ZWdvcmlhIC8gYWEuVG90YWxFeGVjdWNvZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfTtcblxuXG4gICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoXCJDb25zb2xpZGFjYW8gQ0NcIik7XG4gICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoSnNvblNlcmlhbGl6ZXIuU2VyaWFsaXplKGNvbnNvbGlkYWNvZXNDQykpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGlkYWNvZXNDQztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkZvbm9ncmFtYXMiLCAibWV0aG9kIjogIkNvdW50In0sIHsidHlwZSI6ICJGb25vZ3JhbWFzIiwgIm1ldGhvZCI6ICJTZWxlY3QifSwgeyJ0eXBlIjogIkVudW1IZWxwZXIiLCAibWV0aG9kIjogIkdldEVudW1WYWx1ZSJ9LCB7InR5cGUiOiAiY29uc29saWRhY29lc0NDIiwgIm1ldGhvZCI6ICJHcm91cEJ5In0sIHsidHlwZSI6ICJncnVwbyIsICJtZXRob2QiOiAiU3VtIn0sIHsidHlwZSI6ICJncm91cCIsICJtZXRob2QiOiAiV2hlcmUifSwgeyJ0eXBlIjogImNvbnNvbGlkYWNvZXNDQyIsICJtZXRob2QiOiAiRGlzdGluY3RCeSJ9LCB7InR5cGUiOiAiZGlzdGluY3QiLCAibWV0aG9kIjogIkdyb3VwQnkifSwgeyJ0eXBlIjogImdydXBvIiwgIm1ldGhvZCI6ICJTdW0ifSwgeyJ0eXBlIjogImdyb3VwMiIsICJtZXRob2QiOiAiU3VtIn0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifSwgeyJ0eXBlIjogIkNvbnNvbGUiLCAibWV0aG9kIjogIldyaXRlTGluZSJ9LCB7InR5cGUiOiAiSnNvblNlcmlhbGl6ZXIiLCAibWV0aG9kIjogIlNlcmlhbGl6ZSJ9XX0sICJHZXJhckNvbnNvbGlkYWNhb0F1dG9yYWwiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgSUVudW1lcmFibGU8Q29uc29saWRhY2FvQUE+IEdlcmFyQ29uc29saWRhY2FvQXV0b3JhbCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLk9icmFzTXVzaWNhaXMuQ291bnQoKSA+IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmVyYmFBdXRvcmFsID0gKENvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbCAqIFZsckZhdG9yRGlzdHJpYnVpY2FvKSAvIENvbXBldGVuY2lhLlZlcmJhVG90YWw7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnNvbGlkYWNvZXNBQSA9IE9icmFzTXVzaWNhaXMuU2VsZWN0KHggPT4gbmV3IENvbnNvbGlkYWNhb0FBKClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ29kQXVkaW9WaXN1YWwgPSB0aGlzLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBDb2RPYnJhID0geC5Db2RPYnJhTXVzRWNhZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3JpYSA9IHguQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgICAgICBPY29ycmVuY2lhc0F1ZGlvdmlzdWFsID0gdGhpcy5Ocm9GYXRvckRpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIEV4ZWN1Y29lc011c2ljYSA9IHguUXRkRHVyYWNhb011c2ljYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFBlc29EYUNhdGVnb3JpYSA9IEVudW1IZWxwZXIuR2V0RW51bVZhbHVlKHguQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8pXG4gICAgICAgICAgICAgICAgICAgIH0pLldoZXJlKHggPT4geC5UaXBQYXJ0ZVJlcHJlc2VudGFkYSA9PSBcIkFBXCIpLlRvTGlzdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGNvbnNvbGlkYWNvZXNBQS5Hcm91cEJ5KGl0ZW0gPT4gaXRlbS5DYXRlZ29yaWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5TZWxlY3QoZ3J1cG8gPT4gbmV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3JpYSA9IGdydXBvLktleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvbWEgPSBncnVwby5TdW0oaXRlbSA9PiBpdGVtLkV4ZWN1Y29lc011c2ljYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNjIGluIGNvbnNvbGlkYWNvZXNBQSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2MuU29tYUV4ZWN1Y2FvRGFzQ2FyYWN0ZXJpc3RpY2EgPSBncm91cC5XaGVyZShncm91cCA9PiBncm91cC5DYXRlZ29yaWEgPT0gY2MuQ2F0ZWdvcmlhKS5TaW5nbGUoKS5Tb21hO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2MuVG90YWxFeGVjdWNvZXMgPSBjYy5Tb21hRXhlY3VjYW9EYXNDYXJhY3RlcmlzdGljYSAqIGNjLk9jb3JyZW5jaWFzQXVkaW92aXN1YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5Ub3RhbEV4ZWN1Y29lc1hQZXNvQ2F0ZWdvcmlhID0gY2MuVG90YWxFeGVjdWNvZXMgKiBjYy5QZXNvRGFDYXRlZ29yaWEuVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGluY3QgPSBjb25zb2xpZGFjb2VzQUEuRGlzdGluY3RCeShwID0+IHAuQ2F0ZWdvcmlhKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXAyID0gZGlzdGluY3QuR3JvdXBCeShpdGVtID0+IGl0ZW0uQ2F0ZWdvcmlhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5TZWxlY3QoZ3J1cG8gPT4gbmV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yaWEgPSBncnVwby5LZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvbWEgPSBncnVwby5TdW0oaXRlbSA9PiBpdGVtLlRvdGFsRXhlY3Vjb2VzWFBlc29DYXRlZ29yaWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYWEgaW4gY29uc29saWRhY29lc0FBKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc29tYSA9IGdyb3VwMi5TdW0oZyA9PiBnLlNvbWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWEuUG9udG8gPSAodmVyYmFBdXRvcmFsIC8gc29tYSkgKiAoYWEuVG90YWxFeGVjdWNvZXNYUGVzb0NhdGVnb3JpYSAvIGFhLlRvdGFsRXhlY3Vjb2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKFwiQ29uc29saWRhY2FvIEFBXCIpO1xuICAgICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShKc29uU2VyaWFsaXplci5TZXJpYWxpemUoY29uc29saWRhY29lc0FBKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGlkYWNvZXNBQTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpIHsgdGhyb3cgZXg7IH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIk9icmFzTXVzaWNhaXMiLCAibWV0aG9kIjogIkNvdW50In0sIHsidHlwZSI6ICJPYnJhc011c2ljYWlzIiwgIm1ldGhvZCI6ICJTZWxlY3QifSwgeyJ0eXBlIjogIkVudW1IZWxwZXIiLCAibWV0aG9kIjogIkdldEVudW1WYWx1ZSJ9LCB7InR5cGUiOiAiY29uc29saWRhY29lc0FBIiwgIm1ldGhvZCI6ICJHcm91cEJ5In0sIHsidHlwZSI6ICJncnVwbyIsICJtZXRob2QiOiAiU3VtIn0sIHsidHlwZSI6ICJncm91cCIsICJtZXRob2QiOiAiV2hlcmUifSwgeyJ0eXBlIjogImNvbnNvbGlkYWNvZXNBQSIsICJtZXRob2QiOiAiRGlzdGluY3RCeSJ9LCB7InR5cGUiOiAiZGlzdGluY3QiLCAibWV0aG9kIjogIkdyb3VwQnkifSwgeyJ0eXBlIjogImdydXBvIiwgIm1ldGhvZCI6ICJTdW0ifSwgeyJ0eXBlIjogImdyb3VwMiIsICJtZXRob2QiOiAiU3VtIn0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifSwgeyJ0eXBlIjogIkNvbnNvbGUiLCAibWV0aG9kIjogIldyaXRlTGluZSJ9LCB7InR5cGUiOiAiSnNvblNlcmlhbGl6ZXIiLCAibWV0aG9kIjogIlNlcmlhbGl6ZSJ9XX0sICJHZXRBdXRvciI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBUaXR1bGFyT2JyYSBHZXRBdXRvcihJbnQ2ND8gQ29kT2JyYU11c2VFY2FkKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gVGl0dWxhcmVzT2JyYS5XaGVyZSh4ID0+IHguQ29kT2JyYU11c0VjYWQgPT0gQ29kT2JyYU11c2VFY2FkICYmIHguQ29kQ2F0ZWdvcmlhLlRyaW0oKSA9PSBcIkFcIikuRmlyc3RPckRlZmF1bHQoKTtcblxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiVGl0dWxhcmVzT2JyYSIsICJtZXRob2QiOiAiV2hlcmUifSwgeyJ0eXBlIjogIkNvZENhdGVnb3JpYSIsICJtZXRob2QiOiAiVHJpbSJ9XX0sICJHZXRJbnRlcnByZXRlcyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBzdHJpbmcgR2V0SW50ZXJwcmV0ZXMoSW50NjQgQ29kRm9ub2dyYW1hKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoVGl0dWxhcmVzRm9ub2dyYW1hICE9IG51bGwgJiYgVGl0dWxhcmVzRm9ub2dyYW1hLkNvdW50KCkgPiAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0cmluZyBpbnRlcnByZXRlcyA9IHN0cmluZy5FbXB0eTtcblxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0aXRGb25vIGluIFRpdHVsYXJlc0Zvbm9ncmFtYS5XaGVyZSh4ID0+IHguQ29kQ2F0ZWdvcmlhLlRyaW0oKSA9PSBcIklcIiAmJiB4LkNvZEZvbm9ncmFtYSA9PSBDb2RGb25vZ3JhbWEpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJwcmV0ZXMgKz0gdGl0Rm9uby5Ob21UaXR1bGFyICsgXCIgLyBcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbnRlcnByZXRlcyA9IGludGVycHJldGVzLkxlbmd0aCA+IDMgPyBpbnRlcnByZXRlcy5TdWJzdHJpbmcoMCwgaW50ZXJwcmV0ZXMuTGVuZ3RoIC0gMykgOiBpbnRlcnByZXRlcztcblxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnByZXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjsgICAgICAgICBcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIlRpdHVsYXJlc0Zvbm9ncmFtYSIsICJtZXRob2QiOiAiQ291bnQifSwgeyJ0eXBlIjogIlRpdHVsYXJlc0Zvbm9ncmFtYSIsICJtZXRob2QiOiAiV2hlcmUifSwgeyJ0eXBlIjogIkNvZENhdGVnb3JpYSIsICJtZXRob2QiOiAiVHJpbSJ9LCB7InR5cGUiOiAiaW50ZXJwcmV0ZXMiLCAibWV0aG9kIjogIlN1YnN0cmluZyJ9XX19fSwgIkNvbXBldGVuY2lhIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZENvbXBldGVuY2lhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJWbHJWZXJiYUF1dG9yYWwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclZlcmJhQ29uZXhhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJWbHJWZXJiYVNvY2lldGFyaWEiOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiQ29uc29saWRhY2FvVXRpbHMiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiR2VyYXJDb25zb2xpZGFjYW8iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgc3RhdGljIENvbnNvbGlkYWNhb0RUTyBHZXJhckNvbnNvbGlkYWNhbyhBdWRpb1Zpc3VhbEdsb2JvcGxheSBhdWRpb1Zpc3VhbClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGNvbnNvbGlkYWNhb0NDID0gYXVkaW9WaXN1YWwuR2VyYXJDb25zb2xpZGFjYW9Db25leGEoKTtcbiAgICAgICAgICAgIHZhciBjb25zb2xpZGFjYW9BQSA9IGF1ZGlvVmlzdWFsLkdlcmFyQ29uc29saWRhY2FvQXV0b3JhbCgpO1xuXG4gICAgICAgICAgICB2YXIgZGFkb3NDb25zb2xpZGFjYW9BQSA9IEluc2VyZURhZG9zQ29uc29saWRhY2FvKGF1ZGlvVmlzdWFsKTtcbiAgICAgICAgICAgIHZhciBkYWRvc0NvbnNvbGlkYWNhb0R0bEFBID0gSW5zZXJlRGFkb3NDb25zb2xpZGFjYW9EdGwoYXVkaW9WaXN1YWwsIGRhZG9zQ29uc29saWRhY2FvQUEsIFwiQUFcIik7XG5cbiAgICAgICAgICAgIHZhciBkYWRvc0NvbnNvbGlkYWNhb0NDID0gSW5zZXJlRGFkb3NDb25zb2xpZGFjYW8oYXVkaW9WaXN1YWwpO1xuICAgICAgICAgICAgdmFyIGRhZG9zQ29uc29saWRhY2FvRHRsQ0MgPSBJbnNlcmVEYWRvc0NvbnNvbGlkYWNhb0R0bChhdWRpb1Zpc3VhbCwgZGFkb3NDb25zb2xpZGFjYW9DQywgXCJDQ1wiKTtcblxuICAgICAgICAgICAgcmV0dXJuIENvbnNvbGlkYWNhb0RUTy5DcmVhdGUoY29uc29saWRhY2FvQ0MsIGNvbnNvbGlkYWNhb0FBLCBkYWRvc0NvbnNvbGlkYWNhb0FBLCBkYWRvc0NvbnNvbGlkYWNhb0R0bEFBLCBkYWRvc0NvbnNvbGlkYWNhb0NDLCBkYWRvc0NvbnNvbGlkYWNhb0R0bENDKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkF1ZGlvVmlzdWFsR2xvYm9wbGF5IiwgIm1ldGhvZCI6ICJHZXJhckNvbnNvbGlkYWNhb0NvbmV4YSJ9LCB7InR5cGUiOiAiQXVkaW9WaXN1YWxHbG9ib3BsYXkiLCAibWV0aG9kIjogIkdlcmFyQ29uc29saWRhY2FvQXV0b3JhbCJ9LCB7InR5cGUiOiAiQ29uc29saWRhY2FvRFRPIiwgIm1ldGhvZCI6ICJDcmVhdGUifV19LCAiSW5zZXJlRGFkb3NDb25zb2xpZGFjYW8iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIHN0YXRpYyBEaXN0Q29uc29saWRhY2FvIEluc2VyZURhZG9zQ29uc29saWRhY2FvKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY29uc29saWRhY2FvID0gbmV3IERpc3RDb25zb2xpZGFjYW9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBDb2REaXN0cmlidWljYW8gPSBhdWRpb1Zpc3VhbC5Db2REaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgQ29kT2JyYUF1ZGlvRWNhZCA9IGF1ZGlvVmlzdWFsLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0gYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvLFxuICAgICAgICAgICAgICAgIERhdFByb2Nlc3NhbWVudG8gPSBEYXRlVGltZS5VdGNOb3csXG4gICAgICAgICAgICAgICAgVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0ID0gXCJETVwiLFxuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGlkYWNhbztcbiAgICAgICAgfSJ9LCAiSW5zZXJlRGFkb3NDb25zb2xpZGFjYW9EdGwiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIHN0YXRpYyBEaXN0Q29uc29saWRhY2FvRHRsIEluc2VyZURhZG9zQ29uc29saWRhY2FvRHRsKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsLCBEaXN0Q29uc29saWRhY2FvIGNvbnNvbGlkYWNhbywgc3RyaW5nIHBhcnRlUmVwcmVzZW50YWRhKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdmFsb3JSZW5kaW1lbnRvID0gME07XG5cbiAgICAgICAgICAgIGlmIChwYXJ0ZVJlcHJlc2VudGFkYSA9PSBcIkFBXCIpXG4gICAgICAgICAgICAgICAgdmFsb3JSZW5kaW1lbnRvID0gKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbCAqIGF1ZGlvVmlzdWFsLlZsckZhdG9yRGlzdHJpYnVpY2FvKSAvIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZlcmJhVG90YWw7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdmFsb3JSZW5kaW1lbnRvID0gKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQ29uZXhhICogYXVkaW9WaXN1YWwuVmxyRmF0b3JEaXN0cmlidWljYW8pIC8gYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEuVmVyYmFUb3RhbDtcblxuICAgICAgICAgICAgdmFyIGNvbnNvbGlkYWNhb0R0bCA9IG5ldyBEaXN0Q29uc29saWRhY2FvRHRsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQ29uc29saWREaXN0cmliID0gY29uc29saWRhY2FvLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWN1Y29lcyA9IGF1ZGlvVmlzdWFsLk5yb0ZhdG9yRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgIFRpcFBhcnRlUmVwcmVzZW50YWRhID0gcGFydGVSZXByZXNlbnRhZGEsXG4gICAgICAgICAgICAgICAgTnJvRXhlY0luY29ycCA9IDAsXG4gICAgICAgICAgICAgICAgVmxyUmVuZGltZW50b0V4ZWN1Y2FvID0gdmFsb3JSZW5kaW1lbnRvLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWNSZWZkZyA9IChpbnQpYXVkaW9WaXN1YWwuU29tYUZhdG9yRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWNSZWZkZ0luYyA9IDAsXG4gICAgICAgICAgICAgICAgVGlwRXhlY3VjYW8gPSBcIlNcIixcbiAgICAgICAgICAgICAgICBUaXBTaXR1YWNhb0V4ZWN1Y2FvID0gXCJMXCJcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBjb25zb2xpZGFjYW9EdGw7XG4gICAgICAgIH0ifX19LCAiRXNwZWxob1BkZk1lc3NhZ2UiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiU3RhcnQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkVuZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRnJvbSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBzdGF0aWMgRXNwZWxob1BkZk1lc3NhZ2UgRnJvbShpbnQgc3RhcnQsIGludCBlbmQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXNwZWxob1BkZk1lc3NhZ2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgIH0ifX19LCAiTXVzaWNhQXVkaW8iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNhcmFjdGVyaXN0aWNhUmVnaXN0cm8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlBhcnRlUmVwcmVzZW50YWRhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJRdGREdXJhY2FvTXVzaWNhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDb2xldGl2byI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwU2l0dWFjYW9Gb25vIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RJc3JjIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RHcmEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcFNpdHVhY2FvQ2FkYXN0cmFsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkdldElzcmNPdUdyYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBzdHJpbmcgR2V0SXNyY091R3JhKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKEZvbm9ncmFtYSAhPSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICghU3RyaW5nLklzTnVsbE9yRW1wdHkoQ29kSXNyYykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb2RJc3JjO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvZEdyYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLkVtcHR5O1xuXG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJTdHJpbmciLCAibWV0aG9kIjogIklzTnVsbE9yRW1wdHkifV19fX0sICJTb2NpZWRhZGVSZXByZXNlbnRhY2FvIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZFNvY2llZGFkZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kTmFjaW9uYWxDb2wiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlNnbFNvY2llZGFkZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIlNvY2llZGFkZVRpdHVsYXIiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kU29jaWVkYWRlIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFRpdHVsYXJFY2FkIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXRSZXNzb2MiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlNnbFNvY2llZGFkZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kTmFjaW9uYWxDb2wiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFNpdHVhY2FvU29jaWVkYWRlIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRTaXR1YWNhb1NvY2llZGFkZVJlcHJlc2VudGEiOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiVGl0dWxhckZvbm9ncmFtYSI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2RUaXR1bGFyRWNhZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RTdWJDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlBjdFBhcnRpY2lwYWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kRm9ub2dyYW1hIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRTaXRUaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDb2xldGl2byI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kVGl0dWxhcklkZW50aWZpY2FkbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tTmFtZVRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbUJ1c2NhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBvUGVzc29hIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYWUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENnYyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ3BmIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEZXNjcmljYW9DYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRlc2NyaWNhb1N1YkNhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUHNldWRvTm9tZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kRm9ub2dyYW1hVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGl0dWxhckNvbVBlbmRlbmNpYU5hUmVwcmVzZW50YWNhbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBib29sIFRpdHVsYXJDb21QZW5kZW5jaWFOYVJlcHJlc2VudGFjYW8oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoUmVwcmVzZW50YWNhbyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoUmVwcmVzZW50YWNhby5Db2RTb2NpZWRhZGUgPT0gMCB8fCAoUmVwcmVzZW50YWNhby5JbmROYWNpb25hbENvbCA9PSBcIk5cIiAmJiBSZXByZXNlbnRhY2FvLkNvZFNvY2llZGFkZVJlcHJlc2VudGEgPT0gbnVsbCkgfHwgUmVwcmVzZW50YWNhby5JbmRTaXR1YWNhb1NvY2llZGFkZSAhPSBcIkFcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKFJlcHJlc2VudGFjYW8uSW5kTmFjaW9uYWxDb2wgPT0gXCJOXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKFJlcHJlc2VudGFjYW8uSW5kU2l0dWFjYW9Tb2NpZWRhZGVSZXByZXNlbnRhICE9IFwiQVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9In19fSwgIlRpdHVsYXJPYnJhIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZFRpdHVsYXJFY2FkIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFN1YkNhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUGN0UGFydGljaXBhY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRTaXR1YWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kVGl0dWxhcklkZW50aWZpY2FkbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tTmFtZVRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbUJ1c2NhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBvUGVzc29hIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYWUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENnYyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ3BmIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJQc2V1ZG9Ob21lIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEZXNjcmljYW9DYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRlc2NyaWNhb1N1YkNhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kU2l0dWFjYW9Tb2NpZWRhZGUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFNpdHVhY2FvU29jaWVkYWRlUmVwcmVzZW50YSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGl0dWxhckNvbVBlbmRlbmNpYU5hUmVwcmVzZW50YWNhbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBib29sIFRpdHVsYXJDb21QZW5kZW5jaWFOYVJlcHJlc2VudGFjYW8oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoUmVwcmVzZW50YWNhbyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoUmVwcmVzZW50YWNhby5Db2RTb2NpZWRhZGUgPT0gMCB8fCAoUmVwcmVzZW50YWNhby5JbmROYWNpb25hbENvbCA9PSBcIk5cIiAmJiBSZXByZXNlbnRhY2FvLkNvZFNvY2llZGFkZVJlcHJlc2VudGEgPT0gbnVsbCkgfHwgUmVwcmVzZW50YWNhby5JbmRTaXR1YWNhb1NvY2llZGFkZSAhPSBcIkFcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKFJlcHJlc2VudGFjYW8uSW5kTmFjaW9uYWxDb2wgPT0gXCJOXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKFJlcHJlc2VudGFjYW8uSW5kU2l0dWFjYW9Tb2NpZWRhZGVSZXByZXNlbnRhICE9IFwiQVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9In19fX0sICJNb2RlbHMiOiB7IkRpc3RBc3NvY2lhY2FvIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZERpc3RBc3NvY2lhY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2REaXN0VGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGlzdFRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRhdFByb2Nlc3NhbWVudG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsckFzc29jaWFjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZExhbmNhbWVudG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZExpcUFqdXN0ZUVzdHJhbmdlaXJvIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RDb21wZXRlbmNpYSI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2RDb21wZXRlbmNpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTWVzQ29tcGV0ZW5jaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcEdydXBvUnVicmljYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kUnVicmljYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGF0UmVwYXNzZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGF0SW5pUGVyaW9kb1ZlcmJhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXRGaW1QZXJpb2RvVmVyYmEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFByb2Nlc3NhZG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlBjdFNvY2llZGFkZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUGN0VGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUGN0RWNhZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGF0SW5pUGVyaW9kb0V4ZWMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRhdEZpbVBlcmlvZG9FeGVjIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBEaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZEdlcmFyUmV0aWRvIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RDb25zb2xpZGFjYW8iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kQ29uc29saWREaXN0cmliIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RDb25zb2xpZGFjYW9BdWQiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kQ29uc29saWREaXN0cmliQXVkaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcENhcmFjdGVyaXN0aWNhRGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ29uc29saWREaXN0cmliRHRsIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RDb25zb2xpZGFjYW9EdGwiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kQ29uc29saWREaXN0cmliRHRsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDb25zb2xpZERpc3RyaWIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvbnNvbGlkRGlzdHJpYiI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwUGFydGVSZXByZXNlbnRhZGEiOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiRGlzdEV4ZWN1Y2FvU3VtYXJpbyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2REaXN0RXhlY3VjYW9TdW1hcmlvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2REaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcFBhcnRlUmVwcmVzZW50YWRhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOcm9FeGVjdWNvZXMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcENhcmFjdGVyaXN0aWNhRGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwT3JpZ2VtRXhlYyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9fX0sICJEaXN0UGVuZGVudGUiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kRGlzdFBlbmRlbnRlIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJTZ2xNb3Rpdm9SZXRlbmNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ29uc29saWREaXN0cmliRHRsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXRQcm9jZXNzYW1lbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBPcmlnZW1FeGVjIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RQb250byI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2RQb250b0Rpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBQYXJ0ZVJlcHJlc2VudGFkYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kSW50ZXJwcmV0ZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0IjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBPcmlnZW1FeGVjIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRQb250b1NlbVZlcmJhIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RSZXRpZG8iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kRGlzdFJldGlkbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ29uc29saWREaXN0cmliRHRsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFN1YmNhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiU2dsTW90aXZvUmV0ZW5jYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRhdFByb2Nlc3NhbWVudG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZERlc2RvYnJhZG9QYXJhbSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGF0VWx0aW1hQ29ycmVjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclJlbmRpbWVudG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclNvY2llZGFkZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0IjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBPcmlnZW1FeGVjIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2REaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENvbXBldGVuY2lhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRQcm9jZXNzYWRvIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RSb2wiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kRGlzdFJvbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RSb2xNdXNpY2FsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOcm9WZXJzYW9Sb2xNdXNpY2FsIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkRpc3RSb2xPcmlnZW1FeGVjdWNhbyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2REaXN0T3JpZ2VtRXhlY3VjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFJvbFJldHJvYXRpdm8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbUludGVycHJldGUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcENhcmFjdGVyaXN0aWNhRGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9fX0sICJEaXN0VGl0dWxhciI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2REaXN0VGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ29uc29saWREaXN0cmliRHRsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb25zb2xpZERpc3RyaWJEdGwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kU3ViY2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXRQcm9jZXNzYW1lbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJQY3RQYXJ0aWNpcGFjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZERlc2RvYnJhZG9QYXJhbSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVmxyUmVuZGltZW50byI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUGN0UGFydGljaXBhY2FvTXVzaWNvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBDYXJhY3RlcmlzdGljYURpc3QiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcE9yaWdlbUV4ZWMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZExhbmNhbWVudG8iOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiTW90aXZvUmV0ZW5jYW8iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiU2dsTW90aXZvUmV0ZW5jYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRzY01vdGl2b1JldGVuY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIlJlbERlbW9uc3RyYXRpdm9UaXR1bGFyIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZERpc3RUaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBMYW5jYW1lbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRMYW5jYW1lbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBQYWdhbWVudG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRzY1J1YnJpY2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbVJ1YnJpY2FJbmdsZXMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcFJlZmVyZW5jaWFSdWIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZERpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXRQZXJpb2RvRGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTWVzUGFnYW1lbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RQYXJ0ZVJlcHJlc2VudGFkYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEc2NDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbVRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbU5hbWVUaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21CdXNjYVRpdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwUGVzc29hIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYWVUaXQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENnYyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ3BmIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21Qc2V1ZG9UaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bG9PYnJhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21JbnRlcnByZXRlT2JyYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tSW50ZXJwcmV0ZVNob3ciOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkdyYUlzcmMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbVNob3ciOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRzY0xvY2FsU2hvdyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tTXVuaWNpcGlvU2hvdyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiU2dsVWZTaG93IjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bG9BdWRpb09yaWciOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbVRpdHVsb0F1ZGlvVHJhZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tTm9tZUF1dG9yIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RTdWJjYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRzY1N1YmNhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwR3J1cG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENhcmFjdGVyaXN0aWNhRGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUGN0UGFydE11c2ljbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVHh0UGVyaW9kb0xpYiI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tQ2F0ZWdvcmlhSW5nbGVzIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21TdWJjYXRlZ29yaWFJbmdsZXMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbVVzdWFyaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbUZhbnRhc2lhVXN1YXJpbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRHNjVGlwb0FqdXN0ZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kQ29waWFkb0JpIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRBanVzdGVKdXJpZGljbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kQWp1c3RlVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwT3JpZ2VtRXhlYyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwRXhlY3VjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5vbVBsYW5vU2QiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvbXBldGVuY2lhT3JpZ2luYWxQcmVzY3JpdG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcEFtb3N0cmEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZENhYmxlUmV0cmFuc21pc3Npb24iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcFBhZ2FtZW50b1J1YnJpY2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcERlbW9uc3RyYXRpdm9UaXQiOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiUnVicmljYSI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2RSdWJyaWNhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEc2NSdWJyaWNhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmREaXJlaXRvc0dlcmFpcyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBSZWZlcmVuY2lhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRHZXJhQWQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcEFtb3N0cmEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNhdERpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tUnVicmljYUluZ2xlcyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kU2l0dWFjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZERpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kUmV0aWRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRQZW5kZW50ZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kUGFyYW1ldHJvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBFeGVjdWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ3JkQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBDcmRQZXJpb2RvRGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwQ3JkUmlnaHRDb2RlIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRQYWdhTXVzaWNvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRFeGliZUR0bERlbW9uc3QiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFBlc29EaWYiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFByb3Zpc2FvUGVuZGF2IjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmRQcm9jRm9ub1BlbmQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFByb2NGb25vRXN0cmFuZ2Vpcm8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFByb2NGb25vTmFjaW9uYWwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZENvbnNpZGVyYVJvbFJldHJvYXRpdm8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcFR2IjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBQYWdhbWVudG8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZENhYmxlUmV0cmFuc21pc3Npb24iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZEFkaWFudGFtZW50b1ByZXNjcml0byI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kQ29uc2lkZXJhUm9pc0V4ZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwTW9kZWxvQ29tZXJjaWFsU2QiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFRpcERhdFJldHJvIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIlNkQXZSb2xPYnJhRm9ub0F1ZGlvIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZE9icmFGb25vQXVkaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcENhcmFjdGVyaXN0aWNhRGlzdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9fX19LCAic2VydmljZXMiOiB7IkNhbGN1bGFGb25vZ3JhbWFTZXJ2aWNlcyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDYWxjdWxhRm9ub2dyYW1hcyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIENhbGN1bGFGb25vZ3JhbWFzKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoYXVkaW9WaXN1YWwgIT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBib29sIGRldmVSZXRlclBvclNlbVJlZ2lzdHJvcyA9XG4gICAgICAgICAgICAgICAgICAgICEoYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvID09IG51bGwgJiYgYXVkaW9WaXN1YWwuSW5kU2l0dWFjYW9BdWRpb3Zpc3VhbC5UcmltKCkgPT0gXCJQXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICEoYXVkaW9WaXN1YWwuT2JyYXNNdXNpY2Fpcy5Db3VudCgpIDwgMSAmJiBhdWRpb1Zpc3VhbC5Db2RDYXBpRXBpc29kaW8gIT0gbnVsbCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGV2ZVJldGVyUG9yU2VtUmVnaXN0cm9zKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnNvbGlkYWNhb0ZpbmFsID0gQ29uc29saWRhY2FvVXRpbHMuR2VyYXJDb25zb2xpZGFjYW8oYXVkaW9WaXN1YWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvQUEuQ29kQ29uc29saWREaXN0cmliID0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9BQS5WYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9DQy5Db2RDb25zb2xpZERpc3RyaWIgPSBhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0NDLlZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bEFBLkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MuQ29kQ29uc29saWREaXN0cmliRHRsID0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9DQ0R0bC5WYWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZm9ub2dyYW1hIGluIGF1ZGlvVmlzdWFsLkZvbm9ncmFtYXMpXG4gICAgICAgICAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvbm9ncmFtYT8uVGlwU2l0dWFjYW9Gb25vID09IFwiTFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbC5UaXR1bGFyZXNGb25vZ3JhbWEuV2hlcmUoeCA9PiB4LkNvZEZvbm9ncmFtYSA9PSBmb25vZ3JhbWEuRm9ub2dyYW1hKS5BbnkoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0YVRpdHVsYXJlc0Zvbm9ncmFtYSA9IGF1ZGlvVmlzdWFsLlRpdHVsYXJlc0Zvbm9ncmFtYS5XaGVyZSh4ID0+IHguQ29kRm9ub2dyYW1hID09IGZvbm9ncmFtYS5Gb25vZ3JhbWEpLlRvTGlzdCgpLkRpc3RpbmN0QnkoZiA9PiBmLkNvZEZvbm9ncmFtYVRpdHVsYXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdGl0dWxhciBpbiBsaXN0YVRpdHVsYXJlc0Zvbm9ncmFtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpdHVsYXIuQ29kVGl0dWxhcklkZW50aWZpY2FkbyAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IF9yZXRlbmNhb1NlcnZpY2UuUmV0ZW5jYW9Qb3JUaXR1bGFyRm9ub2dyYW1hQ29tUGVuZFx1MDBlYW5jaWEoYXVkaW9WaXN1YWwsIHRpdHVsYXIsIGZvbm9ncmFtYSwgY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQ0MsIFwiVERQXCIsIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGl0dWxhci5UaXR1bGFyQ29tUGVuZGVuY2lhTmFSZXByZXNlbnRhY2FvKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3JldGVuY2FvU2VydmljZS5SZXRlbmNhb1BvclRpdHVsYXJGb25vZ3JhbWFDb21QZW5kXHUwMGVhbmNpYShhdWRpb1Zpc3VhbCwgdGl0dWxhciwgZm9ub2dyYW1hLCBjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9DQywgXCJUUElcIiwgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxDQyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX2Rpc3RyaWJ1aXJWZXJiYS5EaXN0cmlidWlyVmVyYmFGb25vZ3JhbWEoYXVkaW9WaXN1YWwsIGZvbm9ncmFtYSwgY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQ0MsIHRpdHVsYXIsIFwiQ0NcIiwgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxDQyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3JldGVuY2FvU2VydmljZS5SZXRlbmNhb1Bvck9Gb25vZ3JhbWFDb21QZW5kXHUwMGVhbmNpYShhdWRpb1Zpc3VhbCwgZm9ub2dyYW1hLCBjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9DQywgXCJGUElcIiwgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxDQyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IF9yZXRlbmNhb1NlcnZpY2UuUmV0ZW5jYW9Qb3JPRm9ub2dyYW1hQ29tUGVuZFx1MDBlYW5jaWEoYXVkaW9WaXN1YWwsIGZvbm9ncmFtYSwgY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQ0MsIFwiRlBJXCIsIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVJldGVuY2FvU2VydmljZSIsICJtZXRob2QiOiAiUmV0ZW5jYW9Qb3JUaXR1bGFyRm9ub2dyYW1hQ29tUGVuZFx1MDBlYW5jaWEifSwgeyJ0eXBlIjogIklSZXRlbmNhb1NlcnZpY2UiLCAibWV0aG9kIjogIlJldGVuY2FvUG9yVGl0dWxhckZvbm9ncmFtYUNvbVBlbmRcdTAwZWFuY2lhIn0sIHsidHlwZSI6ICJJRGlzdHJpYnVpclZlcmJhIiwgIm1ldGhvZCI6ICJEaXN0cmlidWlyVmVyYmFGb25vZ3JhbWEifSwgeyJ0eXBlIjogIklSZXRlbmNhb1NlcnZpY2UiLCAibWV0aG9kIjogIlJldGVuY2FvUG9yT0Zvbm9ncmFtYUNvbVBlbmRcdTAwZWFuY2lhIn0sIHsidHlwZSI6ICJJUmV0ZW5jYW9TZXJ2aWNlIiwgIm1ldGhvZCI6ICJSZXRlbmNhb1Bvck9Gb25vZ3JhbWFDb21QZW5kXHUwMGVhbmNpYSJ9LCB7InR5cGUiOiAiSW5kU2l0dWFjYW9BdWRpb3Zpc3VhbCIsICJtZXRob2QiOiAiVHJpbSJ9LCB7InR5cGUiOiAiT2JyYXNNdXNpY2FpcyIsICJtZXRob2QiOiAiQ291bnQifSwgeyJ0eXBlIjogIkNvbnNvbGlkYWNhb1V0aWxzIiwgIm1ldGhvZCI6ICJHZXJhckNvbnNvbGlkYWNhbyJ9LCB7InR5cGUiOiAiVGl0dWxhcmVzRm9ub2dyYW1hIiwgIm1ldGhvZCI6ICJXaGVyZSJ9LCB7InR5cGUiOiAiVGl0dWxhcmVzRm9ub2dyYW1hIiwgIm1ldGhvZCI6ICJXaGVyZSJ9LCB7InR5cGUiOiAidGl0dWxhciIsICJtZXRob2QiOiAiVGl0dWxhckNvbVBlbmRlbmNpYU5hUmVwcmVzZW50YWNhbyJ9XX19fSwgIkNhbGN1bGFPYnJhU2VydmljZSI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDYWxjdWxhT2JyYXNNdXNpY2FpcyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIENhbGN1bGFPYnJhc011c2ljYWlzKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsKVxuICAgICAgICB7XG5cbiAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbCAhPSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvb2wgZGV2ZVJldGVyUG9yU2VtUmVnaXN0cm9zID1cbiAgICAgICAgICAgICAgICAgICAhKGF1ZGlvVmlzdWFsLkNvZENhcGlFcGlzb2RpbyA9PSBudWxsICYmIGF1ZGlvVmlzdWFsLkluZFNpdHVhY2FvQXVkaW92aXN1YWwuVHJpbSgpID09IFwiUFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICEoYXVkaW9WaXN1YWwuT2JyYXNNdXNpY2Fpcy5Db3VudCgpIDwgMSAmJiBhdWRpb1Zpc3VhbC5Db2RDYXBpRXBpc29kaW8gIT0gbnVsbCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGV2ZVJldGVyUG9yU2VtUmVnaXN0cm9zKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnNvbGlkYWNhb0ZpbmFsID0gQ29uc29saWRhY2FvVXRpbHMuR2VyYXJDb25zb2xpZGFjYW8oYXVkaW9WaXN1YWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvQUEuQ29kQ29uc29saWREaXN0cmliID0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9BQS5WYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9DQy5Db2RDb25zb2xpZERpc3RyaWIgPSBhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0NDLlZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bEFBLkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MuQ29kQ29uc29saWREaXN0cmliRHRsID0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9DQ0R0bC5WYWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb2JyYSBpbiBhdWRpb1Zpc3VhbC5PYnJhc011c2ljYWlzKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JyYT8uVGlwU2l0dWFjYW9DYWRhc3RyYWwgPT0gXCJJRFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbC5UaXR1bGFyZXNPYnJhLldoZXJlKHggPT4geC5Db2RPYnJhTXVzRWNhZCA9PSBvYnJhLkNvZE9icmFNdXNFY2FkKS5Db3VudCgpID49IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGFUaXR1bGFyZXNPYnJhID0gYXVkaW9WaXN1YWwuVGl0dWxhcmVzT2JyYS5XaGVyZSh4ID0+IHguQ29kT2JyYU11c0VjYWQgPT0gb2JyYS5Db2RPYnJhTXVzRWNhZCkuVG9MaXN0KCkuRGlzdGluY3RCeShmID0+IGYuQ29kT2JyYVRpdHVsYXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0aXR1bGFyIGluIGxpc3RhVGl0dWxhcmVzT2JyYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpdHVsYXIuQ29kVGl0dWxhcklkZW50aWZpY2FkbyAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IF9yZXRlbmNhb1NlcnZpY2UuUmV0ZW5jYW9Qb3JUaXR1bGFyT2JyYUNvbVBlbmRcdTAwZWFuY2lhKGF1ZGlvVmlzdWFsLCB0aXR1bGFyLCBvYnJhLCBjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9BQSwgXCJURFBcIiwgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxBQSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aXR1bGFyLlRpdHVsYXJDb21QZW5kZW5jaWFOYVJlcHJlc2VudGFjYW8oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBfcmV0ZW5jYW9TZXJ2aWNlLlJldGVuY2FvUG9yVGl0dWxhck9icmFDb21QZW5kXHUwMGVhbmNpYShhdWRpb1Zpc3VhbCwgdGl0dWxhciwgb2JyYSwgY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQUEsIFwiVFBJXCIsIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQUEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IF9kaXN0cmlidWlyVmVyYmEuRGlzdHJpYnVpclZlcmJhT2JyYShhdWRpb1Zpc3VhbCwgb2JyYSwgY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQUEsIHRpdHVsYXIsIFwiQUFcIiwgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxBQSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3JldGVuY2FvU2VydmljZS5SZXRlbmNhb1Bvck9icmFNdXNpY2FsQ29tUGVuZFx1MDBlYW5jaWEoYXVkaW9WaXN1YWwsIG9icmEsIGNvbnNvbGlkYWNhb0ZpbmFsLkNvbnNvbGlkYWNhb0FBLCBcIk9QSVwiLCBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bEFBKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3JldGVuY2FvU2VydmljZS5SZXRlbmNhb1Bvck9icmFNdXNpY2FsQ29tUGVuZFx1MDBlYW5jaWEoYXVkaW9WaXN1YWwsIG9icmEsIGNvbnNvbGlkYWNhb0ZpbmFsLkNvbnNvbGlkYWNhb0FBLCBcIk9QSVwiLCBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bEFBKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklSZXRlbmNhb1NlcnZpY2UiLCAibWV0aG9kIjogIlJldGVuY2FvUG9yVGl0dWxhck9icmFDb21QZW5kXHUwMGVhbmNpYSJ9LCB7InR5cGUiOiAiSVJldGVuY2FvU2VydmljZSIsICJtZXRob2QiOiAiUmV0ZW5jYW9Qb3JUaXR1bGFyT2JyYUNvbVBlbmRcdTAwZWFuY2lhIn0sIHsidHlwZSI6ICJJRGlzdHJpYnVpclZlcmJhIiwgIm1ldGhvZCI6ICJEaXN0cmlidWlyVmVyYmFPYnJhIn0sIHsidHlwZSI6ICJJUmV0ZW5jYW9TZXJ2aWNlIiwgIm1ldGhvZCI6ICJSZXRlbmNhb1Bvck9icmFNdXNpY2FsQ29tUGVuZFx1MDBlYW5jaWEifSwgeyJ0eXBlIjogIklSZXRlbmNhb1NlcnZpY2UiLCAibWV0aG9kIjogIlJldGVuY2FvUG9yT2JyYU11c2ljYWxDb21QZW5kXHUwMGVhbmNpYSJ9LCB7InR5cGUiOiAiSW5kU2l0dWFjYW9BdWRpb3Zpc3VhbCIsICJtZXRob2QiOiAiVHJpbSJ9LCB7InR5cGUiOiAiT2JyYXNNdXNpY2FpcyIsICJtZXRob2QiOiAiQ291bnQifSwgeyJ0eXBlIjogIkNvbnNvbGlkYWNhb1V0aWxzIiwgIm1ldGhvZCI6ICJHZXJhckNvbnNvbGlkYWNhbyJ9LCB7InR5cGUiOiAiVGl0dWxhcmVzT2JyYSIsICJtZXRob2QiOiAiV2hlcmUifSwgeyJ0eXBlIjogIlRpdHVsYXJlc09icmEiLCAibWV0aG9kIjogIldoZXJlIn0sIHsidHlwZSI6ICJ0aXR1bGFyIiwgIm1ldGhvZCI6ICJUaXR1bGFyQ29tUGVuZGVuY2lhTmFSZXByZXNlbnRhY2FvIn1dfX19LCAiQ2FsY3VsYXJSb2xTZXJ2aWNlIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNhbGN1bGFFR2VyYVJldGVuY2FvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgQ2FsY3VsYUVHZXJhUmV0ZW5jYW8oQXVkaW9WaXN1YWxHbG9ib3BsYXkgYXVkaW9WaXN1YWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbCAhPSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBjb25zb2xpZGFjYW9GaW5hbCA9IENvbnNvbGlkYWNhb1V0aWxzLkdlcmFyQ29uc29saWRhY2FvKGF1ZGlvVmlzdWFsKTtcblxuICAgICAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbC5Db2RDYXBpRXBpc29kaW8gPT0gbnVsbCAmJiBhdWRpb1Zpc3VhbC5JbmRTaXR1YWNhb0F1ZGlvdmlzdWFsLlRyaW0oKSA9PSBcIlBcIilcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3JldGVuY2FvU2VydmljZS5SZXRlbmNhb1BvckF1ZGlvdmlzdWFsU2VtUmVnaXN0cm9zU2VtQ2FjaGUoYXVkaW9WaXN1YWwsIFwiQVBJXCIsIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQUEsIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF1ZGlvVmlzdWFsLk9icmFzTXVzaWNhaXMuQ291bnQoKSA8IDEgJiYgYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IF9yZXRlbmNhb1NlcnZpY2UuUmV0ZW5jYW9Qb3JBdWRpb3Zpc3VhbFNlbVJlZ2lzdHJvc1NlbUNhY2hlKGF1ZGlvVmlzdWFsLCBcIkNQSVwiLCBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bEFBLCBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bENDKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LkFkZEFzeW5jKGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvQUEpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LkFkZEFzeW5jKGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQUEpO1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQuQWRkQXN5bmMoY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9DQyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQuQWRkQXN5bmMoY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxDQyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9UT0RPOiBtb3ZlciBpc3NvIHBhcmEgYnVzY2FyIG9zIGRhZG9zIHVtYSB2ZXogYXBlbmFzIG5vIHdvZWtlclxuICAgICAgICAgICAgICAgIHZhciByID0gYXdhaXQgY29udGV4dC5TZEF2Um9sT2JyYUZvbm9BdWRpby5XaGVyZSh4ID0+IHguQ29kT2JyYUZvbm9BdWRpbyA9PSBhdWRpb1Zpc3VhbC5Db2RPYnJhRm9ub0F1ZGlvKS5FeGVjdXRlVXBkYXRlQXN5bmMoc2V0dGVycyA9PiBzZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuU2V0UHJvcGVydHkociA9PiByLlZsckZhdG9yRGlzdHJpYnVpY2FvLCBhdWRpb1Zpc3VhbC5WbHJGYXRvckRpc3RyaWJ1aWNhbykpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQuU2F2ZUNoYW5nZXNBc3luYygpO1xuXG4gICAgICAgICAgICAgICAgLy9fY2FjaGVTZXJ2aWNlLkFkaWNpb25hcihjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bEFBKTtcbiAgICAgICAgICAgICAgICAvL19jYWNoZVNlcnZpY2UuQWRpY2lvbmFyKGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MpO1xuXG4gICAgICAgICAgICAgICAgYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9BQSA9IGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvQUEuQ29kQ29uc29saWREaXN0cmliO1xuICAgICAgICAgICAgICAgIGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQ0MgPSBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0NDLkNvZENvbnNvbGlkRGlzdHJpYjtcbiAgICAgICAgICAgICAgICBhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0NDRHRsID0gY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxDQy5Db2RDb25zb2xpZERpc3RyaWJEdGw7XG4gICAgICAgICAgICAgICAgYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9BQUR0bCA9IGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQUEuQ29kQ29uc29saWREaXN0cmliRHRsO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5BZGRBc3luYyhJbnNlcnREaXN0Um9sT3JpZ2VtRXhlY3VjYW8oYXVkaW9WaXN1YWwpKTtcblxuICAgICAgICAgICAgICAgIGlmIChjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9BQSAhPSBudWxsICYmIGNvbnNvbGlkYWNhb0ZpbmFsLkNvbnNvbGlkYWNhb0FBLkNvdW50KCkgPiAwKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5EaXN0UG9udG8uQWRkUmFuZ2VBc3luYyhJbnNlcnREaXN0UG9udG8oYXVkaW9WaXN1YWwsIGNvbnNvbGlkYWNhb0ZpbmFsLkNvbnNvbGlkYWNhb0FBLCBjb25zb2xpZGFjYW9GaW5hbC5EYWRvc0NvbnNvbGlkYWNhb0R0bEFBLkNvZENvbnNvbGlkRGlzdHJpYkR0bCkpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LkRpc3RFeGVjdWNhb1N1bWFyaW8uQWRkUmFuZ2VBc3luYyhJbnNlcnREaXN0RXhlY3VjYW9TdW1hcmlvKGF1ZGlvVmlzdWFsLCBjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9BQSwgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxBQS5Db2RDb25zb2xpZERpc3RyaWJEdGwpKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5EaXN0Q29uc29saWRhY2FvQXVkLkFkZFJhbmdlQXN5bmMoSW5zZXJ0Q29uc29saWRhY2FvQVVEKGF1ZGlvVmlzdWFsLCBjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9BQSwgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxBQS5Db2RDb25zb2xpZERpc3RyaWJEdGwpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQ0MgIT0gbnVsbCAmJiBjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9DQy5Db3VudCgpID4gMClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQuRGlzdFBvbnRvLkFkZFJhbmdlQXN5bmMoSW5zZXJ0RGlzdFBvbnRvKGF1ZGlvVmlzdWFsLCBjb25zb2xpZGFjYW9GaW5hbC5Db25zb2xpZGFjYW9DQywgY29uc29saWRhY2FvRmluYWwuRGFkb3NDb25zb2xpZGFjYW9EdGxDQy5Db2RDb25zb2xpZERpc3RyaWJEdGwpKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5EaXN0RXhlY3VjYW9TdW1hcmlvLkFkZFJhbmdlQXN5bmMoSW5zZXJ0RGlzdEV4ZWN1Y2FvU3VtYXJpbyhhdWRpb1Zpc3VhbCwgY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQ0MsIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MuQ29kQ29uc29saWREaXN0cmliRHRsKSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQuRGlzdENvbnNvbGlkYWNhb0F1ZC5BZGRSYW5nZUFzeW5jKEluc2VydENvbnNvbGlkYWNhb0FVRChhdWRpb1Zpc3VhbCwgY29uc29saWRhY2FvRmluYWwuQ29uc29saWRhY2FvQ0MsIGNvbnNvbGlkYWNhb0ZpbmFsLkRhZG9zQ29uc29saWRhY2FvRHRsQ0MuQ29kQ29uc29saWREaXN0cmliRHRsKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5TYXZlQ2hhbmdlc0FzeW5jKCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBTZW5kTWVzc2FnZVRvVG9waWMoYXVkaW9WaXN1YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVJldGVuY2FvU2VydmljZSIsICJtZXRob2QiOiAiUmV0ZW5jYW9Qb3JBdWRpb3Zpc3VhbFNlbVJlZ2lzdHJvc1NlbUNhY2hlIn0sIHsidHlwZSI6ICJJUmV0ZW5jYW9TZXJ2aWNlIiwgIm1ldGhvZCI6ICJSZXRlbmNhb1BvckF1ZGlvdmlzdWFsU2VtUmVnaXN0cm9zU2VtQ2FjaGUifSwgeyJ0eXBlIjogIklDYWNoZVNlcnZpY2UiLCAibWV0aG9kIjogIkFkaWNpb25hciJ9LCB7InR5cGUiOiAiSUNhY2hlU2VydmljZSIsICJtZXRob2QiOiAiQWRpY2lvbmFyIn0sIHsidHlwZSI6ICJDb25zb2xpZGFjYW9VdGlscyIsICJtZXRob2QiOiAiR2VyYXJDb25zb2xpZGFjYW8ifSwgeyJ0eXBlIjogIkluZFNpdHVhY2FvQXVkaW92aXN1YWwiLCAibWV0aG9kIjogIlRyaW0ifSwgeyJ0eXBlIjogIk9icmFzTXVzaWNhaXMiLCAibWV0aG9kIjogIkNvdW50In0sIHsidHlwZSI6ICJjb250ZXh0IiwgIm1ldGhvZCI6ICJBZGRBc3luYyJ9LCB7InR5cGUiOiAiY29udGV4dCIsICJtZXRob2QiOiAiQWRkQXN5bmMifSwgeyJ0eXBlIjogImNvbnRleHQiLCAibWV0aG9kIjogIkFkZEFzeW5jIn0sIHsidHlwZSI6ICJjb250ZXh0IiwgIm1ldGhvZCI6ICJBZGRBc3luYyJ9LCB7InR5cGUiOiAiU2RBdlJvbE9icmFGb25vQXVkaW8iLCAibWV0aG9kIjogIldoZXJlIn0sIHsidHlwZSI6ICJjb250ZXh0IiwgIm1ldGhvZCI6ICJTYXZlQ2hhbmdlc0FzeW5jIn0sIHsidHlwZSI6ICJjb250ZXh0IiwgIm1ldGhvZCI6ICJBZGRBc3luYyJ9LCB7InR5cGUiOiAiQ29uc29saWRhY2FvQUEiLCAibWV0aG9kIjogIkNvdW50In0sIHsidHlwZSI6ICJEaXN0UG9udG8iLCAibWV0aG9kIjogIkFkZFJhbmdlQXN5bmMifSwgeyJ0eXBlIjogIkRpc3RFeGVjdWNhb1N1bWFyaW8iLCAibWV0aG9kIjogIkFkZFJhbmdlQXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9BdWQiLCAibWV0aG9kIjogIkFkZFJhbmdlQXN5bmMifSwgeyJ0eXBlIjogIkNvbnNvbGlkYWNhb0NDIiwgIm1ldGhvZCI6ICJDb3VudCJ9LCB7InR5cGUiOiAiRGlzdFBvbnRvIiwgIm1ldGhvZCI6ICJBZGRSYW5nZUFzeW5jIn0sIHsidHlwZSI6ICJEaXN0RXhlY3VjYW9TdW1hcmlvIiwgIm1ldGhvZCI6ICJBZGRSYW5nZUFzeW5jIn0sIHsidHlwZSI6ICJEaXN0Q29uc29saWRhY2FvQXVkIiwgIm1ldGhvZCI6ICJBZGRSYW5nZUFzeW5jIn0sIHsidHlwZSI6ICJjb250ZXh0IiwgIm1ldGhvZCI6ICJTYXZlQ2hhbmdlc0FzeW5jIn1dfSwgIlNlbmRNZXNzYWdlVG9Ub3BpYyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzayBTZW5kTWVzc2FnZVRvVG9waWMoQXVkaW9WaXN1YWxHbG9ib3BsYXkgYXVkaW9WaXN1YWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gU3lzdGVtLlRleHQuSnNvbi5Kc29uU2VyaWFsaXplci5TZXJpYWxpemUoYXVkaW9WaXN1YWwpO1xuXG4gICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkobWVzc2FnZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihcIk1lc3NhZ2UgdG8gc2VuZCB0byB0aGUgcXVldWUgaXMgbnVsbCBvciBlbXB0eS5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVzTWVzc2FnZSA9IG5ldyBTZXJ2aWNlQnVzTWVzc2FnZShtZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRlci5TZW5kTWVzc2FnZUFzeW5jKGJ1c01lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoJFwiTWVzc2FnZSBzZW50OiB7bWVzc2FnZX1cIik7XG5cbiAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0luZm9ybWF0aW9uKFwiTWVzc2FnZSBzZW50IHRvIHRoZSBxdWV1ZToge21lc3NhZ2V9XCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2hcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aHJvdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VuZGVyICE9IG51bGwpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kZXIuQ2xvc2VBc3luYygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0Vycm9yIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dJbmZvcm1hdGlvbiJ9LCB7InR5cGUiOiAiSnNvblNlcmlhbGl6ZXIiLCAibWV0aG9kIjogIlNlcmlhbGl6ZSJ9LCB7InR5cGUiOiAic3RyaW5nIiwgIm1ldGhvZCI6ICJJc051bGxPckVtcHR5In0sIHsidHlwZSI6ICJzZW5kZXIiLCAibWV0aG9kIjogIlNlbmRNZXNzYWdlQXN5bmMifSwgeyJ0eXBlIjogIkNvbnNvbGUiLCAibWV0aG9kIjogIldyaXRlTGluZSJ9LCB7InR5cGUiOiAic2VuZGVyIiwgIm1ldGhvZCI6ICJDbG9zZUFzeW5jIn1dfSwgIlRlbUZvbm9ncmFtYXNDb21NYWlzRGU1MFRpdHVsYXJlcyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYm9vbCBUZW1Gb25vZ3JhbWFzQ29tTWFpc0RlNTBUaXR1bGFyZXMoQXVkaW9WaXN1YWxHbG9ib3BsYXkgYXVkaW9WaXN1YWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzZSBoXHUwMGUxIGZvbm9ncmFtYXMgb3UgdGl0dWxhcmVzIG51bG9zXG4gICAgICAgICAgICBpZiAoYXVkaW9WaXN1YWwuRm9ub2dyYW1hcyA9PSBudWxsIHx8IGF1ZGlvVmlzdWFsLlRpdHVsYXJlc0Zvbm9ncmFtYSA9PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JpYXIgdW0gSGFzaFNldCBjb20gb3MgY1x1MDBmM2RpZ29zIGRvcyBmb25vZ3JhbWFzIHZcdTAwZTFsaWRvcyBwYXJhIGJ1c2NhIHJcdTAwZTFwaWRhXG4gICAgICAgICAgICB2YXIgY29kaWdvc0Zvbm9ncmFtYXMgPSBuZXcgSGFzaFNldDxsb25nPihcbiAgICAgICAgICAgICAgICBhdWRpb1Zpc3VhbC5Gb25vZ3JhbWFzLldoZXJlKGYgPT4gZiAhPSBudWxsKS5TZWxlY3QoZiA9PiBmLkZvbm9ncmFtYS5WYWx1ZSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChjb2RpZ29zRm9ub2dyYW1hcy5Db3VudCA9PSAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWdydXBhciBvcyB0aXR1bGFyZXMgcG9yIENvZEZvbm9ncmFtYSBlIHZlcmlmaWNhciBzZSBhbGd1bSBncnVwbyB0ZW0gbWFpcyBkZSA1MCB0aXR1bGFyZXNcbiAgICAgICAgICAgIHZhciBmb25vZ3JhbWFzQ29tTWFpc0RlNTBUaXR1bGFyZXMgPSBhdWRpb1Zpc3VhbC5UaXR1bGFyZXNGb25vZ3JhbWFcbiAgICAgICAgICAgICAgICAuV2hlcmUodCA9PiBjb2RpZ29zRm9ub2dyYW1hcy5Db250YWlucyh0LkNvZEZvbm9ncmFtYSkpICAvLyBBcGVuYXMgdGl0dWxhcmVzIHF1ZSBlc3RcdTAwZTNvIG5vIEhhc2hTZXQgZGUgZm9ub2dyYW1hc1xuICAgICAgICAgICAgICAgIC5Hcm91cEJ5KHQgPT4gdC5Db2RGb25vZ3JhbWEpICAvLyBBZ3J1cGEgcG9yIENvZEZvbm9ncmFtYVxuICAgICAgICAgICAgICAgIC5BbnkoZyA9PiBnLkNvdW50KCkgPiA1MCk7ICAgICAvLyBWZXJpZmljYSBzZSBhbGd1bSBncnVwbyB0ZW0gbWFpcyBkZSA1MCB0aXR1bGFyZXNcblxuICAgICAgICAgICAgcmV0dXJuIGZvbm9ncmFtYXNDb21NYWlzRGU1MFRpdHVsYXJlcztcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkZvbm9ncmFtYXMiLCAibWV0aG9kIjogIldoZXJlIn0sIHsidHlwZSI6ICJjb2RpZ29zRm9ub2dyYW1hcyIsICJtZXRob2QiOiAiQ29udGFpbnMifSwgeyJ0eXBlIjogImciLCAibWV0aG9kIjogIkNvdW50In1dfX19LCAiQ29uc29saWRhY2FvRFRPIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvbnNvbGlkYWNhb0NDIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb25zb2xpZGFjYW9BQSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGFkb3NDb25zb2xpZGFjYW9BQSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGFkb3NDb25zb2xpZGFjYW9EdGxBQSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGFkb3NDb25zb2xpZGFjYW9DQyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGFkb3NDb25zb2xpZGFjYW9EdGxDQyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ3JlYXRlIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIHN0YXRpYyBDb25zb2xpZGFjYW9EVE8gQ3JlYXRlKElFbnVtZXJhYmxlPENvbnNvbGlkYWNhb0NDPiBjb25zb2xpZGFjYW9DQyxcbiAgICAgICAgICAgICAgICBJRW51bWVyYWJsZTxDb25zb2xpZGFjYW9BQT4gY29uc29saWRhY2FvQUEsXG4gICAgICAgICAgICAgICAgRGlzdENvbnNvbGlkYWNhbyBkYWRvc0NvbnNvbGlkYWNhb0FBLFxuICAgICAgICAgICAgICAgIERpc3RDb25zb2xpZGFjYW9EdGwgZGFkb3NDb25zb2xpZGFjYW9EdGxBQSxcbiAgICAgICAgICAgICAgICBEaXN0Q29uc29saWRhY2FvIGRhZG9zQ29uc29saWRhY2FvQ0MsXG4gICAgICAgICAgICAgICAgRGlzdENvbnNvbGlkYWNhb0R0bCBkYWRvc0NvbnNvbGlkYWNhb0R0bENDXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29uc29saWRhY2FvRFRPKGNvbnNvbGlkYWNhb0NDLCBjb25zb2xpZGFjYW9BQSwgZGFkb3NDb25zb2xpZGFjYW9BQSwgZGFkb3NDb25zb2xpZGFjYW9EdGxBQSwgZGFkb3NDb25zb2xpZGFjYW9DQywgZGFkb3NDb25zb2xpZGFjYW9EdGxDQyk7XG4gICAgICAgICAgICB9In0sICJJbnNlcnRDb25zb2xpZGFjYW9BVUQiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIElFbnVtZXJhYmxlPERpc3RDb25zb2xpZGFjYW9BdWQ+IEluc2VydENvbnNvbGlkYWNhb0FVRChBdWRpb1Zpc3VhbEdsb2JvcGxheSBhdWRpb1Zpc3VhbCwgSUVudW1lcmFibGU8SUNvbnNvbGlkYWNhbz4gY29uc29saWRhY2FvLCBJbnQ2NCBjb2RDb25zb2xpZGFjYW9EdGwpXG4gICAgICAgIHtcblxuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGlkYWNhby5EaXN0aW5jdEJ5KHggPT4geC5DYXRlZ29yaWEpLlNlbGVjdCh4ID0+XG4gICAgICAgICAgICAgICBuZXcgRGlzdENvbnNvbGlkYWNhb0F1ZCgpXG4gICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgQ29kQ29uc29saWREaXN0cmliRHRsID0gY29kQ29uc29saWRhY2FvRHRsLFxuICAgICAgICAgICAgICAgICAgIFRpcENhcmFjdGVyaXN0aWNhRGlzdCA9IHguQ2F0ZWdvcmlhLFxuICAgICAgICAgICAgICAgICAgIFF0ZFRvdFNlZ3VuZG9zID0geC5Tb21hRXhlY3VjYW9EYXNDYXJhY3RlcmlzdGljYVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICApLlRvTGlzdCgpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUVudW1lcmFibGU8SUNvbnNvbGlkYWNhbz4iLCAibWV0aG9kIjogIkRpc3RpbmN0QnkifV19LCAiSW5zZXJ0RGlzdFJvbE9yaWdlbUV4ZWN1Y2FvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSBEaXN0Um9sT3JpZ2VtRXhlY3VjYW8gSW5zZXJ0RGlzdFJvbE9yaWdlbUV4ZWN1Y2FvKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZGlzdFJvbE9yaWdlbUV4ZWMgPSBuZXcgRGlzdFJvbE9yaWdlbUV4ZWN1Y2FvKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBDb2REaXN0cmlidWljYW8gPSBhdWRpb1Zpc3VhbC5Db2REaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgQ29kUm9sTXVzaWNhbCA9IGF1ZGlvVmlzdWFsLkNvZFJvbE11c2ljYWwsXG4gICAgICAgICAgICAgICAgQ29kRm9udGVSb2wgPSBhdWRpb1Zpc3VhbC5Db2RGb250ZVJvbCxcbiAgICAgICAgICAgICAgICBDb2RUaXBSb2wgPSBhdWRpb1Zpc3VhbC5Db2RUaXBSb2wsXG4gICAgICAgICAgICAgICAgQ29kT3JpZ2VtUm9sID0gYXVkaW9WaXN1YWwuQ29kT3JpZ2VtUm9sLFxuICAgICAgICAgICAgICAgIENvZFVzdWFyaW8gPSBhdWRpb1Zpc3VhbC5Db2RVc3VhcmlvLFxuICAgICAgICAgICAgICAgIERhdEluaWNpb1JvbCA9IGF1ZGlvVmlzdWFsLkRhdEluaWNpb1JvbCxcbiAgICAgICAgICAgICAgICBEYXRGaW1Sb2wgPSBhdWRpb1Zpc3VhbC5EYXRGaW1Sb2wsXG4gICAgICAgICAgICAgICAgQ29kT2JyYUF1ZGlvRWNhZCA9IGF1ZGlvVmlzdWFsLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0gYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvLFxuICAgICAgICAgICAgICAgIE5yb0ZhdG9yRGlzdHJpYnVpY2FvID0gYXVkaW9WaXN1YWwuTnJvRmF0b3JEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgVmxyRmF0b3JEaXN0cmlidWljYW8gPSBhdWRpb1Zpc3VhbC5WbHJGYXRvckRpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICBEYXRFeGliaWNhb0F1ZGlvID0gYXVkaW9WaXN1YWwuRGF0RXhpYmljYW9BdWRpbyxcbiAgICAgICAgICAgICAgICBUaXBDYXJhY3RlcmlzdGljYURpc3QgPSBhdWRpb1Zpc3VhbC5UaXBDYXJhY3RlcmlzdGljYWRpc3QsXG4gICAgICAgICAgICAgICAgQ29kT2JyYUZvbm9BdWRpbyA9IGF1ZGlvVmlzdWFsLkNvZE9icmFGb25vQXVkaW9cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZGlzdFJvbE9yaWdlbUV4ZWM7XG4gICAgICAgIH0ifSwgIkluc2VydERpc3RQb250byI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgSUVudW1lcmFibGU8RGlzdFBvbnRvPiBJbnNlcnREaXN0UG9udG8oQXVkaW9WaXN1YWxHbG9ib3BsYXkgYXVkaW9WaXN1YWwsIElFbnVtZXJhYmxlPElDb25zb2xpZGFjYW8+IGNvbnNvbGlkYWNhbywgSW50NjQgY29kQ29uc29saWRhY2FvRHRsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29saWRhY2FvLkRpc3RpbmN0QnkoeCA9PiB4LkNhdGVnb3JpYSkuU2VsZWN0KHggPT5cbiAgICAgICAgICAgICAgICBuZXcgRGlzdFBvbnRvKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIENvZERpc3RyaWJ1aWNhbyA9IGF1ZGlvVmlzdWFsLkNvZERpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICAgICAgVGlwUGFydGVSZXByZXNlbnRhZGEgPSB4LlRpcFBhcnRlUmVwcmVzZW50YWRhLFxuICAgICAgICAgICAgICAgICAgICBWbHJQb250byA9IHguUG9udG8sXG4gICAgICAgICAgICAgICAgICAgIFRpcENhcmFjdGVyaXN0aWNhRGlzdCA9IHguQ2F0ZWdvcmlhLFxuICAgICAgICAgICAgICAgICAgICBDb2RDb25zb2xpZGRpc3RyaWJkdGwgPSBjb2RDb25zb2xpZGFjYW9EdGwsXG4gICAgICAgICAgICAgICAgICAgIEluZFBvbnRvU2VtVmVyYmEgPSBcIk5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICkuVG9MaXN0KCk7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJRW51bWVyYWJsZTxJQ29uc29saWRhY2FvPiIsICJtZXRob2QiOiAiRGlzdGluY3RCeSJ9XX0sICJJbnNlcnREaXN0RXhlY3VjYW9TdW1hcmlvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSBJRW51bWVyYWJsZTxEaXN0RXhlY3VjYW9TdW1hcmlvPiBJbnNlcnREaXN0RXhlY3VjYW9TdW1hcmlvKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsLCBJRW51bWVyYWJsZTxJQ29uc29saWRhY2FvPiBjb25zb2xpZGFjYW8sIEludDY0IGNvZENvbnNvbGlkYWNhb0R0bClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGlkYWNhby5EaXN0aW5jdEJ5KHggPT4geC5DYXRlZ29yaWEpLlNlbGVjdCh4ID0+XG4gICAgICAgICAgICAgICAgbmV3IERpc3RFeGVjdWNhb1N1bWFyaW8oKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgQ29kRGlzdHJpYnVpY2FvID0gYXVkaW9WaXN1YWwuQ29kRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgICAgICBUaXBQYXJ0ZVJlcHJlc2VudGFkYSA9IHguVGlwUGFydGVSZXByZXNlbnRhZGEsXG4gICAgICAgICAgICAgICAgICAgIFRpcENhcmFjdGVyaXN0aWNhRGlzdCA9IHguQ2F0ZWdvcmlhLFxuICAgICAgICAgICAgICAgICAgICBOcm9QZXNvQ2FyYWN0ZXJpc3RpY2FEaXN0ID0geC5QZXNvRGFDYXRlZ29yaWEsXG4gICAgICAgICAgICAgICAgICAgIE5yb0V4ZWN1Y29lcyA9IHguVG90YWxFeGVjdWNvZXMsXG4gICAgICAgICAgICAgICAgICAgIE5yb0V4ZWN1Y29lc0NvbVBlc29Ub3RhbCA9IHguVG90YWxFeGVjdWNvZXNYUGVzb0NhdGVnb3JpYSxcbiAgICAgICAgICAgICAgICAgICAgQ29kQ29uc29saWREaXN0cmliRHRsID0gY29kQ29uc29saWRhY2FvRHRsXG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApLlRvTGlzdCgpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUVudW1lcmFibGU8SUNvbnNvbGlkYWNhbz4iLCAibWV0aG9kIjogIkRpc3RpbmN0QnkifV19fX0sICJDb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ2FycmVnYXJDYWNoZSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIENhcnJlZ2FyQ2FjaGUoKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBTZSBuXHUwMGUzbyBlc3RpdmVyIGVtIGNhY2hlLCBjYXJyZWdhIGRvIGJhbmNvIGRlIGRhZG9zXG4gICAgICAgICAgICB2YXIgY29uc29saWRhY29lcyA9IGF3YWl0IF9jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXNOb1RyYWNraW5nKCkuVG9MaXN0QXN5bmMoKTtcblxuICAgICAgICAgICAgLy8gQXJtYXplbmEgbm8gY2FjaGVcbiAgICAgICAgICAgIF9jYWNoZS5TZXQoQ2FjaGVLZXksIGNvbnNvbGlkYWNvZXMsIF9jYWNoZU9wdGlvbnMpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUNhY2hlIiwgIm1ldGhvZCI6ICJTZXQifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkFzTm9UcmFja2luZyJ9XX0sICJCdXNjYXJDb25zb2xpZGFjYW8iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgRGlzdENvbnNvbGlkYWNhb0R0bCBCdXNjYXJDb25zb2xpZGFjYW8obG9uZyBpZClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gVGVudGEgb2J0ZXIgb3MgZGFkb3MgZG8gY2FjaGVcbiAgICAgICAgICAgIGlmIChfY2FjaGUuVHJ5R2V0VmFsdWUoQ2FjaGVLZXksIG91dCBJRW51bWVyYWJsZTxEaXN0Q29uc29saWRhY2FvRHRsPiBjb25zb2xpZGFjb2VzKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29saWRhY29lcy5GaXJzdE9yRGVmYXVsdCh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2Ugb3MgZGFkb3Mgblx1MDBlM28gZXN0aXZlcmVtIG5vIGNhY2hlLCByZXRvcm5hIG51bGwgb3Ugb3V0cmEgbFx1MDBmM2dpY2FcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUNhY2hlIiwgIm1ldGhvZCI6ICJUcnlHZXRWYWx1ZSJ9LCB7InR5cGUiOiAiY29uc29saWRhY29lcyIsICJtZXRob2QiOiAiRmlyc3RPckRlZmF1bHQifV19LCAiQWRpY2lvbmFyIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIHZvaWQgQWRpY2lvbmFyKERpc3RDb25zb2xpZGFjYW9EdGwgY29uc29saWRhY2FvKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoX2NhY2hlLlRyeUdldFZhbHVlKENhY2hlS2V5LCBvdXQgSUxpc3Q8RGlzdENvbnNvbGlkYWNhb0R0bD4gY29uc29saWRhY29lcykpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQ3JpYSB1bWEgbm92YSBsaXN0YSBiYXNlYWRhIG5hIGxpc3RhIGNhY2hlYWRhXG4gICAgICAgICAgICAgICAgdmFyIGNvbnNvbGlkYWNvZXNBdHVhbGl6YWRhcyA9IG5ldyBMaXN0PERpc3RDb25zb2xpZGFjYW9EdGw+KGNvbnNvbGlkYWNvZXMpO1xuXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2UgbyBpdGVtIGpcdTAwZTEgZXhpc3RlIG5hIGxpc3RhXG4gICAgICAgICAgICAgICAgaWYgKCFjb25zb2xpZGFjb2VzQXR1YWxpemFkYXMuQW55KGYgPT4gZi5Db2RDb25zb2xpZERpc3RyaWJEdGwgPT0gY29uc29saWRhY2FvLkNvZENvbnNvbGlkRGlzdHJpYkR0bCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGljaW9uYSBvIG5vdm8gaXRlbVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xpZGFjb2VzQXR1YWxpemFkYXMuQWRkKGNvbnNvbGlkYWNhbyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQXR1YWxpemEgbyBjYWNoZSBjb20gYSBsaXN0YSBtb2RpZmljYWRhXG4gICAgICAgICAgICAgICAgX2NhY2hlLlNldChDYWNoZUtleSwgY29uc29saWRhY29lc0F0dWFsaXphZGFzLCBfY2FjaGVPcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklDYWNoZSIsICJtZXRob2QiOiAiVHJ5R2V0VmFsdWUifSwgeyJ0eXBlIjogIklDYWNoZSIsICJtZXRob2QiOiAiU2V0In0sIHsidHlwZSI6ICJjb25zb2xpZGFjb2VzQXR1YWxpemFkYXMiLCAibWV0aG9kIjogIkFueSJ9LCB7InR5cGUiOiAiY29uc29saWRhY29lc0F0dWFsaXphZGFzIiwgIm1ldGhvZCI6ICJBZGQifV19fX0sICJEaXN0cmlidWlyVmVyYmFTZXJ2aWNlIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkRpc3RyaWJ1aXJWZXJiYUZvbm9ncmFtYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIERpc3RyaWJ1aXJWZXJiYUZvbm9ncmFtYShBdWRpb1Zpc3VhbEdsb2JvcGxheSBhdWRpb1Zpc3VhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIE11c2ljYUF1ZGlvIG9icmFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBJRW51bWVyYWJsZTxDb25zb2xpZGFjYW9DQz4gY29uc29saWRhY29lc0NDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgVGl0dWxhckZvbm9ncmFtYSB0aXR1bGFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgc3RyaW5nIHRpcFBhcnRlUmVwcmVzZW50YWRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgRGlzdENvbnNvbGlkYWNhb0R0bCBjb25zb2xpZGFjYW9EdGxDQylcbiAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIGF3YWl0IERpc3RyaWJ1aXJWZXJiYShhdWRpb1Zpc3VhbCwgb2JyYSwgY29uc29saWRhY29lc0NDLCB0aXR1bGFyLCB0aXBQYXJ0ZVJlcHJlc2VudGFkYSwgY29uc29saWRhY2FvRHRsQ0MsIHRpdHVsYXJGb25vID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEaXN0VGl0dWxhclxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgQ29kT2JyYUF1ZGlvRWNhZCA9IGF1ZGlvVmlzdWFsLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgICAgIENvZENhcGlFcGlzb2RpbyA9IGF1ZGlvVmlzdWFsLkNvZENhcGlFcGlzb2RpbyxcbiAgICAgICAgICAgICAgICAgICAgQ29kRm9ub2dyYW1hID0gb2JyYS5Gb25vZ3JhbWEsXG4gICAgICAgICAgICAgICAgICAgIENvZE9icmFNdXNFY2FkID0gb2JyYS5Db2RPYnJhTXVzRWNhZCxcbiAgICAgICAgICAgICAgICAgICAgQ29kVGl0dWxhckVjYWQgPSB0aXR1bGFyLkNvZFRpdHVsYXJFY2FkLFxuICAgICAgICAgICAgICAgICAgICBDb2RDYXRlZ29yaWEgPSB0aXR1bGFyLkNvZENhdGVnb3JpYSxcbiAgICAgICAgICAgICAgICAgICAgQ29kU3ViY2F0ZWdvcmlhID0gdGl0dWxhci5Db2RTdWJDYXRlZ29yaWEsXG4gICAgICAgICAgICAgICAgICAgIERhdFByb2Nlc3NhbWVudG8gPSBEYXRlVGltZS5VdGNOb3csXG4gICAgICAgICAgICAgICAgICAgIFBjdFBhcnRpY2lwYWNhbyA9IHRpdHVsYXIuUGN0UGFydGljaXBhY2FvLFxuICAgICAgICAgICAgICAgICAgICBQY3RSZW5kaW1lbnRvID0gdGl0dWxhci5QY3RQYXJ0aWNpcGFjYW8sXG4gICAgICAgICAgICAgICAgICAgIE5yb0V4ZWN1Y29lcyA9IGF1ZGlvVmlzdWFsLk5yb0ZhdG9yRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgICAgICBRdGRTZWd1bmRvcyA9IG9icmEuUXRkRHVyYWNhb011c2ljYSxcbiAgICAgICAgICAgICAgICAgICAgVmxyVGl0Q29udlBjdFZlcmJhID0gMCxcbiAgICAgICAgICAgICAgICAgICAgVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0ID0gb2JyYS5DYXJhY3RlcmlzdGljYURpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICAgICAgTnJvRXhlY1JlZmRnID0gKGludClhdWRpb1Zpc3VhbC5Tb21hRmF0b3JEaXN0cmlidWljYW8sIC8vMjAyNjUzLCAvLzI1ODQ5Mzg1NVxuICAgICAgICAgICAgICAgICAgICBJbmRMYW5jYW1lbnRvID0gXCJDXCIsXG4gICAgICAgICAgICAgICAgICAgIEluZERlc2RvYnJhZG9QYXJhbSA9IFwiTlwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9In0sICJEaXN0cmlidWlyVmVyYmFPYnJhIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgRGlzdHJpYnVpclZlcmJhT2JyYShBdWRpb1Zpc3VhbEdsb2JvcGxheSBhdWRpb1Zpc3VhbCxNdXNpY2FBdWRpbyBvYnJhLCBJRW51bWVyYWJsZTxDb25zb2xpZGFjYW9BQT4gY29uc29saWRhY29lc0FBXG4gICAgICAgICAgICAsIFRpdHVsYXJPYnJhIHRpdHVsYXIsIHN0cmluZyB0aXBQYXJ0ZVJlcHJlc2VudGFkYSwgRGlzdENvbnNvbGlkYWNhb0R0bCBjb25zb2xpZGFjYW9EdGxBQSlcbiAgICAgICAge1xuICAgICAgICAgICAgYXdhaXQgRGlzdHJpYnVpclZlcmJhKGF1ZGlvVmlzdWFsLCBvYnJhLCBjb25zb2xpZGFjb2VzQUEsIHRpdHVsYXIsIHRpcFBhcnRlUmVwcmVzZW50YWRhLCBjb25zb2xpZGFjYW9EdGxBQSwgdGl0dWxhck9icmEgPT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERpc3RUaXR1bGFyXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBDb2RPYnJhQXVkaW9FY2FkID0gYXVkaW9WaXN1YWwuQ29kT2JyYUF1ZGlvRWNhZCxcbiAgICAgICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0gYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvLFxuICAgICAgICAgICAgICAgICAgICBDb2RGb25vZ3JhbWEgPSBvYnJhLkZvbm9ncmFtYSxcbiAgICAgICAgICAgICAgICAgICAgQ29kT2JyYU11c0VjYWQgPSBvYnJhLkNvZE9icmFNdXNFY2FkLFxuICAgICAgICAgICAgICAgICAgICBDb2RUaXR1bGFyRWNhZCA9IHRpdHVsYXIuQ29kVGl0dWxhckVjYWQsXG4gICAgICAgICAgICAgICAgICAgIENvZENhdGVnb3JpYSA9IHRpdHVsYXIuQ29kQ2F0ZWdvcmlhLFxuICAgICAgICAgICAgICAgICAgICBDb2RTdWJjYXRlZ29yaWEgPSB0aXR1bGFyLkNvZFN1YkNhdGVnb3JpYSxcbiAgICAgICAgICAgICAgICAgICAgRGF0UHJvY2Vzc2FtZW50byA9IERhdGVUaW1lLlV0Y05vdyxcbiAgICAgICAgICAgICAgICAgICAgUGN0UGFydGljaXBhY2FvID0gdGl0dWxhci5QY3RQYXJ0aWNpcGFjYW8sXG4gICAgICAgICAgICAgICAgICAgIFBjdFJlbmRpbWVudG8gPSB0aXR1bGFyLlBjdFBhcnRpY2lwYWNhbyxcbiAgICAgICAgICAgICAgICAgICAgTnJvRXhlY3Vjb2VzID0gYXVkaW9WaXN1YWwuTnJvRmF0b3JEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgIFF0ZFNlZ3VuZG9zID0gb2JyYS5RdGREdXJhY2FvTXVzaWNhLFxuICAgICAgICAgICAgICAgICAgICBWbHJUaXRDb252UGN0VmVyYmEgPSAwLFxuICAgICAgICAgICAgICAgICAgICBUaXBDYXJhY3RlcmlzdGljYURpc3QgPSBvYnJhLkNhcmFjdGVyaXN0aWNhRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgICAgICBOcm9FeGVjUmVmZGcgPSAoaW50KWF1ZGlvVmlzdWFsLlNvbWFGYXRvckRpc3RyaWJ1aWNhbywgLy8yNTg0OTM4NTVcbiAgICAgICAgICAgICAgICAgICAgSW5kTGFuY2FtZW50byA9IFwiQ1wiLFxuICAgICAgICAgICAgICAgICAgICBJbmREZXNkb2JyYWRvUGFyYW0gPSBcIk5cIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSJ9LCAiRGlzdHJpYnVpclZlcmJhQXNzb2NpYWNhb09icmEiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzayBEaXN0cmlidWlyVmVyYmFBc3NvY2lhY2FvT2JyYShJbnQ2NCBjb2REaXN0VGl0dWxhciwgZGVjaW1hbCByZW5kaW1lbnRvT2JyYSwgQXVkaW9WaXN1YWxHbG9ib3BsYXkgYXVkaW9WaXN1YWwsIFRpdHVsYXJPYnJhIHRpdHVsYXJPYnJhKVxuICAgICAgICB7XG4gICAgICAgICAgICBhd2FpdCBEaXN0cmlidWlyVmVyYmFBc3NvY2lhY2FvKGNvZERpc3RUaXR1bGFyLCByZW5kaW1lbnRvT2JyYSwgYXVkaW9WaXN1YWwsIHRpdHVsYXJPYnJhKTtcbiAgICAgICAgfSJ9LCAiRGlzdHJpYnVpclZlcmJhQXNzb2NpYWNhb0Zvbm9ncmFtYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIERpc3RyaWJ1aXJWZXJiYUFzc29jaWFjYW9Gb25vZ3JhbWEoSW50NjQgY29kRGlzdFRpdHVsYXIsIGRlY2ltYWwgcmVuZGltZW50b09icmEsIEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsLCBUaXR1bGFyRm9ub2dyYW1hIHRpdHVsYXJGb25vZ3JhbWEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGF3YWl0IERpc3RyaWJ1aXJWZXJiYUFzc29jaWFjYW8oY29kRGlzdFRpdHVsYXIsIHJlbmRpbWVudG9PYnJhLCBhdWRpb1Zpc3VhbCwgdGl0dWxhckZvbm9ncmFtYSk7XG4gICAgICAgIH0ifSwgIkNhbGN1bGFyVmFsb3JSZW5kaW1lbnRvSW5kaXZpZHVhbCI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBkZWNpbWFsIENhbGN1bGFyVmFsb3JSZW5kaW1lbnRvSW5kaXZpZHVhbChpbnQgbnJvRXhlY3Vjb2VzLCBpbnQgcXRkU2VndW5kb3MsIGRlY2ltYWwgdmFsb3JQb250bylcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIChucm9FeGVjdWNvZXMgKiBxdGRTZWd1bmRvcyAqIHZhbG9yUG9udG8pO1xuICAgICAgICB9In0sICJHcmF2YXJSZWxEZW1vbnN0cmF0aXZvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIFJlbERlbW9uc3RyYXRpdm9UaXR1bGFyIEdyYXZhclJlbERlbW9uc3RyYXRpdm8oQXVkaW9WaXN1YWxHbG9ib3BsYXkgYXVkaW9WaXN1YWwsIElUaXR1bGFyIHRpdHVsYXIsIE11c2ljYUF1ZGlvIG11c2ljYWF1ZGlvXG4gICAgICAgICAgICAsIERpc3RUaXR1bGFyIGRpc3RUaXR1bGFyLCBkZWNpbWFsIHZhbG9yU29jaWVkYWRlLCBzdHJpbmcgcGFydGVSZXByZXNlbnRhZGEpXG4gICAgICAgIHtcblxuICAgICAgICAgICAgdmFyIGRhdEluaWNpb0NvbXBldGVuY2lhRGlzdCA9IG5ldyBEYXRlVGltZSgyMDIxLCAxMCwgMDEpO1xuICAgICAgICAgICAgdmFyIGRhdEZpbUNvbXBldGVuY2lhRGlzdCA9IG5ldyBEYXRlVGltZSgyMDIxLCAxMiwgMzEpO1xuXG4gICAgICAgICAgICB2YXIgYXV0b3IgPSBuZXcgVGl0dWxhck9icmEoKTtcblxuICAgICAgICAgICAgaWYocGFydGVSZXByZXNlbnRhZGEgPT0gXCJBQVwiICYmIG11c2ljYWF1ZGlvLkNvZE9icmFNdXNFY2FkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgYXV0b3IgPSBhdWRpb1Zpc3VhbC5HZXRBdXRvcihtdXNpY2FhdWRpby5Db2RPYnJhTXVzRWNhZCk7XG5cbiAgICAgICAgICAgIHZhciByZWwgPSBuZXcgUmVsRGVtb25zdHJhdGl2b1RpdHVsYXIoKTtcblxuICAgICAgICAgICAgcmVsLkNvZERpc3RUaXR1bGFyID0gZGlzdFRpdHVsYXIuQ29kRGlzdFRpdHVsYXI7XG4gICAgICAgICAgICByZWwuQ29kU29jaWVkYWRlID0gdGl0dWxhci5SZXByZXNlbnRhY2FvPy5JbmROYWNpb25hbENvbCA9PSBcIk5cIiA/IHRpdHVsYXIuUmVwcmVzZW50YWNhby5Db2RTb2NpZWRhZGVSZXByZXNlbnRhIDogdGl0dWxhci5SZXByZXNlbnRhY2FvPy5Db2RTb2NpZWRhZGU7XG4gICAgICAgICAgICByZWwuU2dsU29jaWVkYWRlID0gdGl0dWxhci5SZXByZXNlbnRhY2FvPy5JbmROYWNpb25hbENvbCA9PSBcIk5cIiA/IHRpdHVsYXIuUmVwcmVzZW50YWNhby5TZ2xTb2NpZWRhZGVSZXByZXNlbnRhIDogdGl0dWxhci5SZXByZXNlbnRhY2FvPy5TZ2xTb2NpZWRhZGU7XG4gICAgICAgICAgICByZWwuQ29kQ2FlU29jID0gdGl0dWxhci5SZXByZXNlbnRhY2FvPy5Db2RDYWVTb2M7XG4gICAgICAgICAgICByZWwuQ29kU29jaWVkYWRlUmVwID0gdGl0dWxhci5SZXByZXNlbnRhY2FvPy5Db2RTb2NpZWRhZGVSZXByZXNlbnRhID09IG51bGwgPyBudWxsIDogdGl0dWxhci5SZXByZXNlbnRhY2FvLkNvZFNvY2llZGFkZVJlcHJlc2VudGE7XG4gICAgICAgICAgICByZWwuU2dsU29jaWVkYWRlUmVwID0gdGl0dWxhci5SZXByZXNlbnRhY2FvPy5TZ2xTb2NpZWRhZGVSZXByZXNlbnRhO1xuICAgICAgICAgICAgcmVsLkNvZENhZVNvY1JlcCA9IHRpdHVsYXIuUmVwcmVzZW50YWNhbz8uQ29kQ2FlU29jUmVwO1xuICAgICAgICAgICAgcmVsLlRpcExhbmNhbWVudG8gPSBcIkRcIjtcbiAgICAgICAgICAgIHJlbC5JbmRMYW5jYW1lbnRvID0gXCJDXCI7XG4gICAgICAgICAgICByZWwuVGlwUGFnYW1lbnRvID0gXCJEXCI7XG4gICAgICAgICAgICByZWwuQ29kUnVicmljYSA9IDM5OTE7IC8vIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLkNvZFJ1YnJpY2EgKG5hbyBtYXBlYWRvKTtcbiAgICAgICAgICAgIHJlbC5Ec2NSdWJyaWNhID0gXCJHTE9CT1BMQVlcIjtcbiAgICAgICAgICAgIHJlbC5Ob21SdWJyaWNhSW5nbGVzID0gXCJHTE9CT1BMQVlcIjtcbiAgICAgICAgICAgIHJlbC5UaXBSZWZlcmVuY2lhUnViID0gXCJTQVwiO1xuICAgICAgICAgICAgcmVsLkNvZERpc3RyaWJ1aWNhbyA9IGF1ZGlvVmlzdWFsLkNvZERpc3RyaWJ1aWNhbztcbiAgICAgICAgICAgIHJlbC5UaXBEaXN0cmlidWljYW8gPSBcIkRcIjtcbiAgICAgICAgICAgIHJlbC5EYXRSZXBhc3NlID0gbmV3IERhdGVUaW1lKDIwMjIsIDA1LCAyNSk7XG4gICAgICAgICAgICByZWwuRGF0SW5pY2lvQ29tcGV0ZW5jaWFEaXN0ID0gZGF0SW5pY2lvQ29tcGV0ZW5jaWFEaXN0O1xuICAgICAgICAgICAgcmVsLkRhdEZpbUNvbXBldGVuY2lhRGlzdCA9IGRhdEZpbUNvbXBldGVuY2lhRGlzdDtcbiAgICAgICAgICAgIHJlbC5EYXRQZXJpb2RvRGlzdCA9ICRcIntkYXRJbmljaW9Db21wZXRlbmNpYURpc3QuTW9udGh9L3tkYXRJbmljaW9Db21wZXRlbmNpYURpc3QuWWVhcn0gQSB7ZGF0RmltQ29tcGV0ZW5jaWFEaXN0Lk1vbnRofS97ZGF0RmltQ29tcGV0ZW5jaWFEaXN0LlllYXJ9XCI7XG4gICAgICAgICAgICByZWwuTWVzUGFnYW1lbnRvID0gXCIwNS8yMDIyXCI7XG4gICAgICAgICAgICByZWwuQ29kT2JyYUF1ZGlvRWNhZCA9IGF1ZGlvVmlzdWFsLkNvZE9icmFBdWRpb0VjYWQ7XG4gICAgICAgICAgICByZWwuQ29kQ2FwaUVwaXNvZGlvID0gbXVzaWNhYXVkaW8uQ29kQ2FwRXBpc29kaW87XG4gICAgICAgICAgICByZWwuQ29kT2JyYU11c2VDYWQgPSBtdXNpY2FhdWRpby5Db2RPYnJhTXVzRWNhZDtcbiAgICAgICAgICAgIHJlbC5Db2RGb25vZ3JhbWEgPSBtdXNpY2FhdWRpby5Gb25vZ3JhbWE7XG4gICAgICAgICAgICByZWwuT3JkZW5hRm9ubyA9IG11c2ljYWF1ZGlvLkZvbm9ncmFtYSAhPSAwID8gMSA6IDA7XG4gICAgICAgICAgICByZWwuTnJvRXhlY3Vjb2VzID0gZGlzdFRpdHVsYXIuTnJvRXhlY3Vjb2VzICogbXVzaWNhYXVkaW8uUXRkRHVyYWNhb011c2ljYTtcbiAgICAgICAgICAgIHJlbC5QY3RQYXJ0aWNpcGFjYW9UaXQgPSB0aXR1bGFyLlBjdFBhcnRpY2lwYWNhbztcbiAgICAgICAgICAgIHJlbC5WbHJUaXR1bGFyID0gZGlzdFRpdHVsYXIuVmxyVGl0dWxhcjtcbiAgICAgICAgICAgIHJlbC5WbHJDb3JyZWNhb1RpdHVsYXIgPSBkaXN0VGl0dWxhci5WbHJUaXRDb3JyZWNhbztcbiAgICAgICAgICAgIHJlbC5Db2RQYXJ0ZVJlcHJlc2VudGFkYSA9IHBhcnRlUmVwcmVzZW50YWRhO1xuICAgICAgICAgICAgcmVsLkNvZENhdGVnb3JpYSA9IHRpdHVsYXIuQ29kQ2F0ZWdvcmlhO1xuICAgICAgICAgICAgcmVsLkRzY0NhdGVnb3JpYSA9IHRpdHVsYXIuRGVzY3JpY2FvQ2F0ZWdvcmlhO1xuICAgICAgICAgICAgcmVsLkNvZFRpdHVsYXJFY2FkID0gdGl0dWxhci5Db2RUaXR1bGFyRWNhZDtcbiAgICAgICAgICAgIHJlbC5Ob21UaXR1bGFyID0gdGl0dWxhci5Ob21UaXR1bGFyO1xuICAgICAgICAgICAgcmVsLk5vbU5hbWVUaXR1bGFyID0gdGl0dWxhci5Ob21OYW1lVGl0dWxhcjtcbiAgICAgICAgICAgIHJlbC5Ob21CdXNjYVRpdCA9IHRpdHVsYXIuTm9tQnVzY2E7XG4gICAgICAgICAgICByZWwuVGlwUGVzc29hID0gdGl0dWxhci5UaXBvUGVzc29hO1xuICAgICAgICAgICAgcmVsLkNvZENhZVRpdCA9IHRpdHVsYXIuQ29kQ2FlO1xuICAgICAgICAgICAgcmVsLkNvZENnYyA9IHRpdHVsYXIuQ29kQ2djO1xuICAgICAgICAgICAgcmVsLkNvZENwZiA9IHRpdHVsYXIuQ29kQ3BmO1xuICAgICAgICAgICAgcmVsLk5vbVBzZXVkb1RpdHVsYXIgPSB0aXR1bGFyLlBzZXVkb05vbWU7XG4gICAgICAgICAgICByZWwuQ29kT2JyYUZvbm9SZWFsID0gcGFydGVSZXByZXNlbnRhZGEgPT0gXCJBQVwiID8gbXVzaWNhYXVkaW8uQ29kT2JyYU11c0VjYWQgOiBtdXNpY2FhdWRpby5Gb25vZ3JhbWE7XG4gICAgICAgICAgICByZWwuVmxyUmVuZGltZW50b09icmEgPSBkaXN0VGl0dWxhci5WbHJSZW5kaW1lbnRvO1xuICAgICAgICAgICAgcmVsLk5vbVRpdHVsb09icmEgPSBtdXNpY2FhdWRpby5Ob21UaXR1bG87XG5cbiAgICAgICAgICAgIGlmIChwYXJ0ZVJlcHJlc2VudGFkYSA9PSBcIkFBXCIgJiYgYXV0b3IgIT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZWwuQ29kVGl0QXV0b3IgPSBhdXRvci5Db2RUaXR1bGFyRWNhZDtcbiAgICAgICAgICAgICAgICB2YXIgbm9tZUF1dG9yID0gYXV0b3IuTm9tVGl0dWxhcjtcbiAgICAgICAgICAgICAgICAvL1RPRE86IEFKVVNUQVIgQ09MVU5BIE5PIEJBTkNPXG4gICAgICAgICAgICAgICAgcmVsLk5vbUF1dG9yT2JyYSA9IG5vbWVBdXRvci5MZW5ndGggPiA0NSA/IG5vbWVBdXRvci5TdWJzdHJpbmcoMCwgNDUpIDogbm9tZUF1dG9yO1xuICAgICAgICAgICAgICAgIHJlbC5Ob21Ob21lQXV0b3IgPSBhdXRvci5Ob21OYW1lVGl0dWxhcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG5vbWVJbnRlcnByZXRlID0gbXVzaWNhYXVkaW8uRm9ub2dyYW1hICE9IG51bGwgJiYgdGl0dWxhci5Db2RDYXRlZ29yaWE/LlRyaW0oKSA9PSBcIklcIiA/IGF1ZGlvVmlzdWFsLkdldEludGVycHJldGVzKG11c2ljYWF1ZGlvLkZvbm9ncmFtYS5WYWx1ZSkgOiBzdHJpbmcuRW1wdHk7XG4gICAgICAgICAgICByZWwuTm9tSW50ZXJwcmV0ZU9icmEgPSBub21lSW50ZXJwcmV0ZS5MZW5ndGggPiAxMDAgPyBub21lSW50ZXJwcmV0ZS5TdWJzdHJpbmcoMCwgMTAwKSA6IG5vbWVJbnRlcnByZXRlO1xuXG4gICAgICAgICAgICByZWwuR3JhSXNyYyA9IG11c2ljYWF1ZGlvLkdldElzcmNPdUdyYSgpO1xuICAgICAgICAgICAgcmVsLk5vbVRpdHVsb0F1ZGlvT3JpZyA9IGF1ZGlvVmlzdWFsLk5vbVRpdHVsb09yaWc7XG4gICAgICAgICAgICByZWwuTm9tVGl0dWxvQXVkaW9UcmFkID0gYXVkaW9WaXN1YWwuTm9tVGl0dWxvVHJhZDtcbiAgICAgICAgICAgIHJlbC5Ocm9DYXBpdHVsb0F1ZGlvID0gYXVkaW9WaXN1YWwuTnJvQ2FwRXBpc29kaW87XG4gICAgICAgICAgICByZWwuTm9tQ2FwaXR1bG9BdWRpb09yaWcgPSBhdWRpb1Zpc3VhbC5Ob21DYXBFcGlzb2Rpb09yaWc7XG4gICAgICAgICAgICByZWwuQ29kU3ViY2F0ZWdvcmlhID0gdGl0dWxhci5Db2RTdWJDYXRlZ29yaWE7XG4gICAgICAgICAgICByZWwuRHNjU3ViY2F0ZWdvcmlhID0gdGl0dWxhci5EZXNjcmljYW9TdWJDYXRlZ29yaWE7XG4gICAgICAgICAgICByZWwuVGlwR3J1cG8gPSBcIlx1MDBhOVwiO1xuICAgICAgICAgICAgcmVsLkNvZENhcmFjdGVyaXN0aWNhRGlzdCA9IGRpc3RUaXR1bGFyLlRpcENhcmFjdGVyaXN0aWNhRGlzdDtcbiAgICAgICAgICAgIC8vcmVsLlRpcEV4ZWN1Y2FvID0gZGlzdFRpdHVsYXIuVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0O1xuICAgICAgICAgICAgcmVsLlZsclNvY2lldGFyaW8gPSB2YWxvclNvY2llZGFkZTtcbiAgICAgICAgICAgIHJlbC5QY3RQYXJ0TXVzaWNvID0gZGlzdFRpdHVsYXIuUGN0UGFydGljaXBhY2FvTXVzaWNvO1xuICAgICAgICAgICAgcmVsLlBjdFJlbmRpbWVudG8gPSBkaXN0VGl0dWxhci5QY3RSZW5kaW1lbnRvO1xuICAgICAgICAgICAgcmVsLk5yb0V4ZWNSZWZEZyA9IGRpc3RUaXR1bGFyLk5yb0V4ZWNSZWZkZztcbiAgICAgICAgICAgIHJlbC5UaXBBbW9zdHJhID0gXCJNXCI7XG4gICAgICAgICAgICByZWwuVGlwRXhlY3VjYW8gPSBcIlNcIjtcbiAgICAgICAgICAgIC8vU2UgVGlwbyBBbW9zdHJhIGRhIFJ1YnJpY2EgPSBcdTIwMThNXHUyMDE5O3ByZWVuY2hlciBjb20gXHUyMDE4U1x1MjAxOTsgc2VuXHUwMGUzbzsgcHJlZW5jaGVyIGNvbSBcdTIwMThPXHUyMDE5XG4gICAgICAgICAgICByZWwuTnVtUGVzb1Byb2dyYW1hY2FvID0gZGlzdFRpdHVsYXIuTnJvUGVzb1Byb2dyYW1hY2FvO1xuICAgICAgICAgICAgcmVsLkluZENhYmxlUmV0cmFuc21pc3Npb24gPSBcIk5cIjtcbiAgICAgICAgICAgIHJlbC5UaXBQYWdhbWVudG9SdWJyaWNhID0gXCJEXCI7XG5cblxuXG4gICAgICAgICAgICBfY29udGV4dC5EZW1vbnN0cmF0aXZvVGl0dWxhci5BZGQocmVsKTtcbiAgICAgICAgICAgIHJldHVybiByZWw7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJhdWRpb1Zpc3VhbCIsICJtZXRob2QiOiAiR2V0QXV0b3IifSwgeyJ0eXBlIjogIm5vbWVBdXRvciIsICJtZXRob2QiOiAiU3Vic3RyaW5nIn0sIHsidHlwZSI6ICJhdWRpb1Zpc3VhbCIsICJtZXRob2QiOiAiR2V0SW50ZXJwcmV0ZXMifSwgeyJ0eXBlIjogIm5vbWVJbnRlcnByZXRlIiwgIm1ldGhvZCI6ICJTdWJzdHJpbmcifSwgeyJ0eXBlIjogIm11c2ljYWF1ZGlvIiwgIm1ldGhvZCI6ICJHZXRJc3JjT3VHcmEifSwgeyJ0eXBlIjogIkRlbW9uc3RyYXRpdm9UaXR1bGFyIiwgIm1ldGhvZCI6ICJBZGQifV19fX0sICJSZXRlbmNhb1NlcnZpY2UiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiUmV0ZW5jYW9Qb3JUaXR1bGFyRm9ub2dyYW1hQ29tUGVuZFx1MDBlYW5jaWEiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzayBSZXRlbmNhb1BvclRpdHVsYXJGb25vZ3JhbWFDb21QZW5kXHUwMGVhbmNpYShBdWRpb1Zpc3VhbEdsb2JvcGxheSBhdWRpb1Zpc3VhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgVGl0dWxhckZvbm9ncmFtYSB0aXR1bGFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBNdXNpY2FBdWRpbyBmb25vZ3JhbWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIElFbnVtZXJhYmxlPENvbnNvbGlkYWNhb0NDPiBjb25zb2xpZGFjb2VzQ0NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHN0cmluZyBzaWdsYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgRGlzdENvbnNvbGlkYWNhb0R0bCBjb25zb2xpZGFjYW9EdGxDQylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHZlcmJhQ29uZXhhID0gQ2FsY3VsYXJWZXJiYVBhcmFEaXN0cmlidWljYW9Eb0F1ZGlvVmlzdWFsKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQ29uZXhhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGF1ZGlvVmlzdWFsLlZsckZhdG9yRGlzdHJpYnVpY2FvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZlcmJhVG90YWwpO1xuXG4gICAgICAgICAgICB2YXIgcmVuZGltZW50b0Zvbm9ncmFtYSA9IChsb25nKSBhdWRpb1Zpc3VhbC5Ocm9GYXRvckRpc3RyaWJ1aWNhbyAqIGZvbm9ncmFtYS5RdGREdXJhY2FvTXVzaWNhICogY29uc29saWRhY29lc0NDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuV2hlcmUoeCA9PiB4LkNhdGVnb3JpYSA9PSBmb25vZ3JhbWEuQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkZpcnN0KCkuUG9udG87XG4gICAgICAgICAgICByZW5kaW1lbnRvRm9ub2dyYW1hID0gcmVuZGltZW50b0Zvbm9ncmFtYTtcblxuICAgICAgICAgICAgdmFyIHZhbG9yVGl0dWxhciA9IChyZW5kaW1lbnRvRm9ub2dyYW1hICogdGl0dWxhci5QY3RQYXJ0aWNpcGFjYW8pIC8gMTAwO1xuXG5cbiAgICAgICAgICAgICNyZWdpb24gcGFydGUgYXV0b3JhbFxuICAgICAgICAgICAgLy92YXIgZGlzdENvbnNvbGlkYWNhb0R0bCA9IGF3YWl0IF9jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuRmlyc3RBc3luYyh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQ0NEdGwpO1xuXG4gICAgICAgICAgICAvL3ZhciBjb25zb2xpZGFjYW8gPSBhd2FpdCBfY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsXG4gICAgICAgICAgICAvLy5GaXJzdE9yRGVmYXVsdEFzeW5jKHggPT4geC5Db2RDb25zb2xpZERpc3RyaWJEdGwgPT0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9DQ0R0bC5WYWx1ZSk7XG5cbiAgICAgICAgICAgIHZhciBjb25zb2xpZGFjYW8gPSBfY29uc29saWRhY2FvQ2FjaGVTZXJ2aWNlLkJ1c2NhckNvbnNvbGlkYWNhbyhhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0NDRHRsLlZhbHVlKTtcblxuICAgICAgICAgICAgdmFyIHRyYWNrZWRFbnRpdHkgPSBfY29udGV4dC5DaGFuZ2VUcmFja2VyLkVudHJpZXM8RGlzdENvbnNvbGlkYWNhb0R0bD4oKS5GaXJzdE9yRGVmYXVsdChlID0+IGUuRW50aXR5LkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9PSBjb25zb2xpZGFjYW8uQ29kQ29uc29saWREaXN0cmliRHRsKTtcblxuICAgICAgICAgICAgaWYgKHRyYWNrZWRFbnRpdHkgPT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsLkF0dGFjaChjb25zb2xpZGFjYW8pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL19jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGNvbnNvbGlkYWNhbyk7XG5cbiAgICAgICAgICAgIERpc3RSZXRpZG8gZGlzdFJldGlkb0NDID0gbmV3KClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBDb2RDb25zb2xpZERpc3RyaWJEdGwgPSBjb25zb2xpZGFjYW8sXG4gICAgICAgICAgICAgICAgQ29kT2JyYUF1ZGlvRWNhZCA9IGZvbm9ncmFtYS5Db2RPYnJhQXVkaW9FY2FkLFxuICAgICAgICAgICAgICAgIENvZENhcGlFcGlzb2RpbyA9IGZvbm9ncmFtYS5Db2RDYXBFcGlzb2RpbyxcbiAgICAgICAgICAgICAgICBDb2RGb25vZ3JhbWEgPSBmb25vZ3JhbWEuRm9ub2dyYW1hLFxuICAgICAgICAgICAgICAgIENvZFRpdHVsYXJFY2FkID0gdGl0dWxhci5Db2RUaXR1bGFyRWNhZCxcbiAgICAgICAgICAgICAgICBDb2RDYXRlZ29yaWEgPSB0aXR1bGFyLkNvZENhdGVnb3JpYSxcbiAgICAgICAgICAgICAgICBDb2RTdWJjYXRlZ29yaWEgPSB0aXR1bGFyLkNvZFN1YkNhdGVnb3JpYSxcbiAgICAgICAgICAgICAgICBTZ2xNb3Rpdm9SZXRlbmNhbyA9IHNpZ2xhLFxuICAgICAgICAgICAgICAgIERhdFByb2Nlc3NhbWVudG8gPSBEYXRlVGltZS5VdGNOb3csXG4gICAgICAgICAgICAgICAgLy9Ocm9FeGVjdWNvZXMgPSBhdWRpb1Zpc3VhbC5Ocm9GYXRvckRpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICBRdGRTZWd1bmRvcyA9IGZvbm9ncmFtYS5RdGREdXJhY2FvTXVzaWNhLFxuICAgICAgICAgICAgICAgIFBjdFBhcnRpY2lwYWNhbyA9IHRpdHVsYXIuUGN0UGFydGljaXBhY2FvLFxuICAgICAgICAgICAgICAgIEluZERlc2RvYnJhZG9QYXJhbSA9IFwiTlwiLFxuICAgICAgICAgICAgICAgIERhdFVsdGltYUNvcnJlY2FvID0gbmV3IERhdGVUaW1lKDIwMjIsIDA1LCAyNSksXG4gICAgICAgICAgICAgICAgVmxyU29jaWVkYWRlID0gdmFsb3JUaXR1bGFyICogKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhU29jaWV0YXJpYSAvIChhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUF1dG9yYWwgKyBhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUNvbmV4YSkpLFxuICAgICAgICAgICAgICAgIFZsclJlbmRpbWVudG8gPSByZW5kaW1lbnRvRm9ub2dyYW1hLFxuICAgICAgICAgICAgICAgIFZsclRpdHVsYXIgPSAocmVuZGltZW50b0Zvbm9ncmFtYSAqIHRpdHVsYXIuUGN0UGFydGljaXBhY2FvKSAvIDEwMCxcbiAgICAgICAgICAgICAgICBUaXBDYXJhY3RlcmlzdGljYURpc3QgPSBmb25vZ3JhbWEuQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgUGN0UmVuZGltZW50byA9IHRpdHVsYXIuUGN0UGFydGljaXBhY2FvLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWNSZWZkZyA9IChpbnQpYXVkaW9WaXN1YWwuU29tYUZhdG9yRGlzdHJpYnVpY2FvLCAvLzI1ODQ5Mzg1NVxuICAgICAgICAgICAgICAgIFRpcE9yaWdlbUV4ZWMgPSBcIlNcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICNlbmRyZWdpb25cblxuICAgICAgICAgICAgX2NvbnRleHQuRGlzdFJldGlkby5BZGQoZGlzdFJldGlkb0NDKTtcbiAgICAgICAgICAgIGF3YWl0IF9jb250ZXh0LlNhdmVDaGFuZ2VzQXN5bmMoKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklDb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UiLCAibWV0aG9kIjogIkJ1c2NhckNvbnNvbGlkYWNhbyJ9LCB7InR5cGUiOiAiSUNvbnRleHQiLCAibWV0aG9kIjogIlNhdmVDaGFuZ2VzQXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkZpcnN0QXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkF0dGFjaCJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiQXR0YWNoIn0sIHsidHlwZSI6ICJEaXN0UmV0aWRvIiwgIm1ldGhvZCI6ICJBZGQifV19LCAiUmV0ZW5jYW9Qb3JUaXR1bGFyT2JyYUNvbVBlbmRcdTAwZWFuY2lhIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgUmV0ZW5jYW9Qb3JUaXR1bGFyT2JyYUNvbVBlbmRcdTAwZWFuY2lhKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIFRpdHVsYXJPYnJhIHRpdHVsYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgTXVzaWNhQXVkaW8gb2JyYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBJRW51bWVyYWJsZTxDb25zb2xpZGFjYW9BQT4gY29uc29saWRhY29lc0FBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHN0cmluZyBzaWdsYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBEaXN0Q29uc29saWRhY2FvRHRsIGNvbnNvbGlkYWNhb0R0bEFBKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdmVyYmFBdXRvcmFsID0gQ2FsY3VsYXJWZXJiYVBhcmFEaXN0cmlidWljYW9Eb0F1ZGlvVmlzdWFsKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhdWRpb1Zpc3VhbC5WbHJGYXRvckRpc3RyaWJ1aWNhb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WZXJiYVRvdGFsKTtcblxuICAgICAgICAgICAgdmFyIHJlbmRpbWVudG9PYnJhID0gKGRlY2ltYWwpIGF1ZGlvVmlzdWFsLk5yb0ZhdG9yRGlzdHJpYnVpY2FvICogb2JyYS5RdGREdXJhY2FvTXVzaWNhICogY29uc29saWRhY29lc0FBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLldoZXJlKHggPT4geC5DYXRlZ29yaWEgPT0gb2JyYS5DYXJhY3RlcmlzdGljYURpc3RyaWJ1aWNhbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkZpcnN0KCkuUG9udG87XG5cbiAgICAgICAgICAgIHZhciB2YWxvclRpdHVsYXIgPSAocmVuZGltZW50b09icmEgKiB0aXR1bGFyLlBjdFBhcnRpY2lwYWNhbykgLyAxMDA7XG5cbiAgICAgICAgICAgICNyZWdpb24gcGFydGUgYXV0b3JhbFxuXG4gICAgICAgICAgICAvL3ZhciBkaXN0Q29uc29saWRhY2FvRHRsID0gYXdhaXQgX2NvbnRleHQuRGlzdENvbnNvbGlkYWNhb0R0bC5GaXJzdEFzeW5jKHggPT4geC5Db2RDb25zb2xpZERpc3RyaWJEdGwgPT0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9BQUR0bCk7XG4gICAgICAgICAgICAvL2NvbnNvbGlkYWNhb0R0bEFBLkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWU7XG5cbiAgICAgICAgICAgIC8vY29uc29saWRhY2FvRHRsQUEgPSBhd2FpdCBfY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsXG4gICAgICAgICAgICAvLyAgICAuRmlyc3RPckRlZmF1bHRBc3luYyh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWUpO1xuXG4gICAgICAgICAgICBjb25zb2xpZGFjYW9EdGxBQSA9IF9jb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UuQnVzY2FyQ29uc29saWRhY2FvKGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWUpO1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tlZEVudGl0eSA9IF9jb250ZXh0LkNoYW5nZVRyYWNrZXIuRW50cmllczxEaXN0Q29uc29saWRhY2FvRHRsPigpLkZpcnN0T3JEZWZhdWx0KGUgPT4gZS5FbnRpdHkuQ29kQ29uc29saWREaXN0cmliRHRsID09IGNvbnNvbGlkYWNhb0R0bEFBLkNvZENvbnNvbGlkRGlzdHJpYkR0bCk7XG5cbiAgICAgICAgICAgIGlmICh0cmFja2VkRW50aXR5ID09IG51bGwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQuRGlzdENvbnNvbGlkYWNhb0R0bC5BdHRhY2goY29uc29saWRhY2FvRHRsQUEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL19jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGNvbnNvbGlkYWNhb0R0bEFBKTtcblxuICAgICAgICAgICAgRGlzdFJldGlkbyBkaXN0UmV0aWRvQUEgPSBuZXcoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIENvZENvbnNvbGlkRGlzdHJpYkR0bCA9IGNvbnNvbGlkYWNhb0R0bEFBLFxuICAgICAgICAgICAgICAgIENvZE9icmFBdWRpb0VjYWQgPSBvYnJhLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgQ29kT2JyYU11c0VjYWQgPSBvYnJhLkNvZE9icmFNdXNFY2FkLFxuICAgICAgICAgICAgICAgIENvZENhcGlFcGlzb2RpbyA9IG9icmEuQ29kQ2FwRXBpc29kaW8sXG4gICAgICAgICAgICAgICAgQ29kRm9ub2dyYW1hID0gb2JyYS5Gb25vZ3JhbWEsXG4gICAgICAgICAgICAgICAgQ29kVGl0dWxhckVjYWQgPSB0aXR1bGFyLkNvZFRpdHVsYXJFY2FkLFxuICAgICAgICAgICAgICAgIENvZENhdGVnb3JpYSA9IHRpdHVsYXIuQ29kQ2F0ZWdvcmlhLFxuICAgICAgICAgICAgICAgIENvZFN1YmNhdGVnb3JpYSA9IHRpdHVsYXIuQ29kU3ViQ2F0ZWdvcmlhLFxuICAgICAgICAgICAgICAgIFNnbE1vdGl2b1JldGVuY2FvID0gc2lnbGEsXG4gICAgICAgICAgICAgICAgRGF0UHJvY2Vzc2FtZW50byA9IERhdGVUaW1lLlV0Y05vdyxcbiAgICAgICAgICAgICAgICAvL05yb0V4ZWN1Y29lcyA9IGF1ZGlvVmlzdWFsLk5yb0ZhdG9yRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgIFF0ZFNlZ3VuZG9zID0gb2JyYS5RdGREdXJhY2FvTXVzaWNhLFxuICAgICAgICAgICAgICAgIFBjdFBhcnRpY2lwYWNhbyA9IHRpdHVsYXIuUGN0UGFydGljaXBhY2FvLFxuICAgICAgICAgICAgICAgIEluZERlc2RvYnJhZG9QYXJhbSA9IFwiTlwiLFxuICAgICAgICAgICAgICAgIERhdFVsdGltYUNvcnJlY2FvID0gbmV3IERhdGVUaW1lKDIwMjIsIDA1LCAyNSksXG4gICAgICAgICAgICAgICAgVmxyU29jaWVkYWRlID0gdmFsb3JUaXR1bGFyICogKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhU29jaWV0YXJpYSAvIChhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUF1dG9yYWwgKyBhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUNvbmV4YSkpLFxuICAgICAgICAgICAgICAgIFZsclJlbmRpbWVudG8gPSByZW5kaW1lbnRvT2JyYSxcbiAgICAgICAgICAgICAgICBWbHJUaXR1bGFyID0gKHJlbmRpbWVudG9PYnJhICogdGl0dWxhci5QY3RQYXJ0aWNpcGFjYW8pIC8gMTAwLFxuICAgICAgICAgICAgICAgIFRpcENhcmFjdGVyaXN0aWNhRGlzdCA9IG9icmEuQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgUGN0UmVuZGltZW50byA9IHRpdHVsYXIuUGN0UGFydGljaXBhY2FvLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWNSZWZkZyA9IChpbnQpYXVkaW9WaXN1YWwuU29tYUZhdG9yRGlzdHJpYnVpY2FvLCAvLzI1ODQ5Mzg1NVxuICAgICAgICAgICAgICAgIFRpcE9yaWdlbUV4ZWMgPSBcIlNcIlxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy9fY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsLkF0dGFjaChkaXN0UmV0aWRvQUEuQ29kQ29uc29saWREaXN0cmliRHRsKTtcbiAgICAgICAgICAgICNlbmRyZWdpb25cblxuICAgICAgICAgICAgX2NvbnRleHQuRGlzdFJldGlkby5BZGQoZGlzdFJldGlkb0FBKTtcbiAgICAgICAgICAgIGF3YWl0IF9jb250ZXh0LlNhdmVDaGFuZ2VzQXN5bmMoKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklDb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UiLCAibWV0aG9kIjogIkJ1c2NhckNvbnNvbGlkYWNhbyJ9LCB7InR5cGUiOiAiSUNvbnRleHQiLCAibWV0aG9kIjogIlNhdmVDaGFuZ2VzQXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkZpcnN0QXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkF0dGFjaCJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiQXR0YWNoIn0sIHsidHlwZSI6ICJEaXN0Q29uc29saWRhY2FvRHRsIiwgIm1ldGhvZCI6ICJBdHRhY2gifSwgeyJ0eXBlIjogIkRpc3RSZXRpZG8iLCAibWV0aG9kIjogIkFkZCJ9XX0sICJSZXRlbmNhb1Bvck9Gb25vZ3JhbWFDb21QZW5kXHUwMGVhbmNpYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIFJldGVuY2FvUG9yT0Zvbm9ncmFtYUNvbVBlbmRcdTAwZWFuY2lhKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsLCBNdXNpY2FBdWRpbyBmb25vZ3JhbWEsIElFbnVtZXJhYmxlPENvbnNvbGlkYWNhb0NDPiBjb25zb2xpZGFjYW9DQywgc3RyaW5nIHNpZ2xhLCBEaXN0Q29uc29saWRhY2FvRHRsIGNvbnNvbGlkYWNhb0R0bENDKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdmFsb3Jlc0NhbGN1bGFkb3MgPSAobG9uZykgYXVkaW9WaXN1YWwuTnJvRmF0b3JEaXN0cmlidWljYW8gKiBmb25vZ3JhbWEuUXRkRHVyYWNhb011c2ljYSAqIGNvbnNvbGlkYWNhb0NDLkZpcnN0KGMgPT4gYy5DYXRlZ29yaWEgPT0gZm9ub2dyYW1hLkNhcmFjdGVyaXN0aWNhRGlzdHJpYnVpY2FvKS5Qb250bztcblxuICAgICAgICAgICAgLy92YXIgZGlzdENvbnNvbGlkYWNhb0R0bCA9IGF3YWl0IF9jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuRmlyc3RBc3luYyh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQ0NEdGwpO1xuXG4gICAgICAgICAgICBjb25zb2xpZGFjYW9EdGxDQyA9IF9jb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UuQnVzY2FyQ29uc29saWRhY2FvKGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQ0NEdGwuVmFsdWUpO1xuICAgICAgICAgICAgLy9fY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsLkF0dGFjaChjb25zb2xpZGFjYW9EdGxDQyk7XG4gICAgICAgICAgICAvL2NvbnNvbGlkYWNhb0R0bENDID0gYXdhaXQgX2NvbnRleHQuRGlzdENvbnNvbGlkYWNhb0R0bFxuICAgICAgICAgICAgLy8gICAgLkZpcnN0T3JEZWZhdWx0QXN5bmMoeCA9PiB4LkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9PSBhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0NDRHRsLlZhbHVlKTtcblxuICAgICAgICAgICAgdmFyIHRyYWNrZWRFbnRpdHkgPSBfY29udGV4dC5DaGFuZ2VUcmFja2VyLkVudHJpZXM8RGlzdENvbnNvbGlkYWNhb0R0bD4oKS5GaXJzdE9yRGVmYXVsdChlID0+IGUuRW50aXR5LkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9PSBjb25zb2xpZGFjYW9EdGxDQy5Db2RDb25zb2xpZERpc3RyaWJEdGwpO1xuXG4gICAgICAgICAgICBpZiAodHJhY2tlZEVudGl0eSA9PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGNvbnNvbGlkYWNhb0R0bENDKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgRGlzdFJldGlkbyBkaXN0UmV0aWRvID0gbmV3KClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBDb2RDb25zb2xpZERpc3RyaWJEdGwgPSBjb25zb2xpZGFjYW9EdGxDQyxcbiAgICAgICAgICAgICAgICBDb2RPYnJhQXVkaW9FY2FkID0gZm9ub2dyYW1hLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0gZm9ub2dyYW1hLkNvZENhcEVwaXNvZGlvLFxuICAgICAgICAgICAgICAgIENvZEZvbm9ncmFtYSA9IGZvbm9ncmFtYS5Gb25vZ3JhbWEsXG4gICAgICAgICAgICAgICAgU2dsTW90aXZvUmV0ZW5jYW8gPSBzaWdsYSxcbiAgICAgICAgICAgICAgICBEYXRQcm9jZXNzYW1lbnRvID0gRGF0ZVRpbWUuVXRjTm93LFxuICAgICAgICAgICAgICAgIC8vTnJvRXhlY3Vjb2VzID0gYXVkaW9WaXN1YWwuTnJvRmF0b3JEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgUXRkU2VndW5kb3MgPSBmb25vZ3JhbWEuUXRkRHVyYWNhb011c2ljYSxcbiAgICAgICAgICAgICAgICBQY3RQYXJ0aWNpcGFjYW8gPSAxMDAuME0sXG4gICAgICAgICAgICAgICAgVmxyVGl0dWxhciA9IHZhbG9yZXNDYWxjdWxhZG9zLFxuICAgICAgICAgICAgICAgIEluZERlc2RvYnJhZG9QYXJhbSA9IFwiTlwiLFxuICAgICAgICAgICAgICAgIERhdFVsdGltYUNvcnJlY2FvID0gbmV3IERhdGVUaW1lKDIwMjIsIDA1LCAyNSksXG4gICAgICAgICAgICAgICAgVmxyUmVuZGltZW50byA9IHZhbG9yZXNDYWxjdWxhZG9zLFxuICAgICAgICAgICAgICAgIFZsclNvY2llZGFkZSA9IHZhbG9yZXNDYWxjdWxhZG9zICogKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhU29jaWV0YXJpYSAvIChhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUF1dG9yYWwgKyBhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUNvbmV4YSkpLFxuICAgICAgICAgICAgICAgIFRpcENhcmFjdGVyaXN0aWNhRGlzdCA9IGZvbm9ncmFtYS5DYXJhY3RlcmlzdGljYURpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICBQY3RSZW5kaW1lbnRvID0gMTAwLjBNLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWNSZWZkZyA9IChpbnQpYXVkaW9WaXN1YWwuU29tYUZhdG9yRGlzdHJpYnVpY2FvLCAvLzI1ODQ5Mzg1NVxuICAgICAgICAgICAgICAgIFRpcE9yaWdlbUV4ZWMgPSBcIlNcIlxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgX2NvbnRleHQuRGlzdFJldGlkby5BZGQoZGlzdFJldGlkbyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IF9jb250ZXh0LlNhdmVDaGFuZ2VzQXN5bmMoKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklDb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UiLCAibWV0aG9kIjogIkJ1c2NhckNvbnNvbGlkYWNhbyJ9LCB7InR5cGUiOiAiSUNvbnRleHQiLCAibWV0aG9kIjogIlNhdmVDaGFuZ2VzQXN5bmMifSwgeyJ0eXBlIjogIklFbnVtZXJhYmxlPENvbnNvbGlkYWNhb0NDPiIsICJtZXRob2QiOiAiRmlyc3QifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkZpcnN0QXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkF0dGFjaCJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiQXR0YWNoIn0sIHsidHlwZSI6ICJEaXN0UmV0aWRvIiwgIm1ldGhvZCI6ICJBZGQifV19LCAiUmV0ZW5jYW9Qb3JPYnJhTXVzaWNhbENvbVBlbmRcdTAwZWFuY2lhIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgUmV0ZW5jYW9Qb3JPYnJhTXVzaWNhbENvbVBlbmRcdTAwZWFuY2lhKEF1ZGlvVmlzdWFsR2xvYm9wbGF5IGF1ZGlvVmlzdWFsLCBNdXNpY2FBdWRpbyBvYnJhTXVzaWNhbCwgSUVudW1lcmFibGU8Q29uc29saWRhY2FvQUE+IGNvbnNvbGlkYWNhb0FBLCBzdHJpbmcgc2lnbGEsIERpc3RDb25zb2xpZGFjYW9EdGwgY29uc29saWRhY2FvRHRsQUEpXG4gICAgICAgIHtcblxuICAgICAgICAgICB2YXIgdmFsb3Jlc0NhbGN1bGFkb3MgPSAobG9uZykgYXVkaW9WaXN1YWwuTnJvRmF0b3JEaXN0cmlidWljYW8gKiBvYnJhTXVzaWNhbC5RdGREdXJhY2FvTXVzaWNhICogY29uc29saWRhY2FvQUEuRmlyc3QoYyA9PiBjLkNhdGVnb3JpYSA9PSBvYnJhTXVzaWNhbC5DYXJhY3RlcmlzdGljYURpc3RyaWJ1aWNhbykuUG9udG87XG5cbiAgICAgICAgICAgIC8vY29uc29saWRhY2FvRHRsQUEgPSBhd2FpdCBfY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsXG4gICAgICAgICAgICAvLy5GaXJzdE9yRGVmYXVsdEFzeW5jKHggPT4geC5Db2RDb25zb2xpZERpc3RyaWJEdGwgPT0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9BQUR0bC5WYWx1ZSk7XG4gICAgICAgICAgICBjb25zb2xpZGFjYW9EdGxBQSA9IF9jb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UuQnVzY2FyQ29uc29saWRhY2FvKGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWUpO1xuICAgICAgICAgICAgLy9fY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsLkF0dGFjaChjb25zb2xpZGFjYW9EdGxBQSk7XG5cbiAgICAgICAgICAgIHZhciB0cmFja2VkRW50aXR5ID0gX2NvbnRleHQuQ2hhbmdlVHJhY2tlci5FbnRyaWVzPERpc3RDb25zb2xpZGFjYW9EdGw+KCkuRmlyc3RPckRlZmF1bHQoZSA9PiBlLkVudGl0eS5Db2RDb25zb2xpZERpc3RyaWJEdGwgPT0gY29uc29saWRhY2FvRHRsQUEuQ29kQ29uc29saWREaXN0cmliRHRsKTtcblxuICAgICAgICAgICAgaWYgKHRyYWNrZWRFbnRpdHkgPT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsLkF0dGFjaChjb25zb2xpZGFjYW9EdGxBQSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIERpc3RSZXRpZG8gZGlzdFJldGlkbyA9IG5ldygpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQ29kQ29uc29saWREaXN0cmliRHRsID0gY29uc29saWRhY2FvRHRsQUEsXG4gICAgICAgICAgICAgICAgQ29kT2JyYUF1ZGlvRWNhZCA9IG9icmFNdXNpY2FsLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0gb2JyYU11c2ljYWwuQ29kQ2FwRXBpc29kaW8sXG4gICAgICAgICAgICAgICAgQ29kRm9ub2dyYW1hID0gb2JyYU11c2ljYWwuRm9ub2dyYW1hLFxuICAgICAgICAgICAgICAgIENvZE9icmFNdXNFY2FkID0gb2JyYU11c2ljYWwuQ29kT2JyYU11c0VjYWQsXG4gICAgICAgICAgICAgICAgU2dsTW90aXZvUmV0ZW5jYW8gPSBzaWdsYSxcbiAgICAgICAgICAgICAgICBEYXRQcm9jZXNzYW1lbnRvID0gRGF0ZVRpbWUuVXRjTm93LFxuICAgICAgICAgICAgICAgIC8vTnJvRXhlY3Vjb2VzID0gYXVkaW9WaXN1YWwuTnJvRmF0b3JEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgUXRkU2VndW5kb3MgPSBvYnJhTXVzaWNhbC5RdGREdXJhY2FvTXVzaWNhLFxuICAgICAgICAgICAgICAgIFBjdFBhcnRpY2lwYWNhbyA9IDEwMC4wTSxcbiAgICAgICAgICAgICAgICBWbHJUaXR1bGFyID0gdmFsb3Jlc0NhbGN1bGFkb3MsXG4gICAgICAgICAgICAgICAgSW5kRGVzZG9icmFkb1BhcmFtID0gXCJOXCIsXG4gICAgICAgICAgICAgICAgRGF0VWx0aW1hQ29ycmVjYW8gPSBuZXcgRGF0ZVRpbWUoMjAyMiwgMDUsIDI1KSxcbiAgICAgICAgICAgICAgICBWbHJSZW5kaW1lbnRvID0gdmFsb3Jlc0NhbGN1bGFkb3MsXG4gICAgICAgICAgICAgICAgVmxyU29jaWVkYWRlID0gdmFsb3Jlc0NhbGN1bGFkb3MgKiAoYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEuVmxyVmVyYmFTb2NpZXRhcmlhIC8gKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbCArIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQ29uZXhhKSksXG4gICAgICAgICAgICAgICAgVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0ID0gb2JyYU11c2ljYWwuQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgUGN0UmVuZGltZW50byA9IDEwMC4wTSxcbiAgICAgICAgICAgICAgICBOcm9FeGVjUmVmZGcgPSAoaW50KWF1ZGlvVmlzdWFsLlNvbWFGYXRvckRpc3RyaWJ1aWNhbywgLy8yNTg0OTM4NTVcbiAgICAgICAgICAgICAgICBUaXBPcmlnZW1FeGVjID0gXCJTXCJcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIF9jb250ZXh0LkRpc3RSZXRpZG8uQWRkKGRpc3RSZXRpZG8pO1xuICAgICAgICAgICAgYXdhaXQgX2NvbnRleHQuU2F2ZUNoYW5nZXNBc3luYygpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUNvbnNvbGlkYWNhb0NhY2hlU2VydmljZSIsICJtZXRob2QiOiAiQnVzY2FyQ29uc29saWRhY2FvIn0sIHsidHlwZSI6ICJJQ29udGV4dCIsICJtZXRob2QiOiAiU2F2ZUNoYW5nZXNBc3luYyJ9LCB7InR5cGUiOiAiSUVudW1lcmFibGU8Q29uc29saWRhY2FvQUE+IiwgIm1ldGhvZCI6ICJGaXJzdCJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiQXR0YWNoIn0sIHsidHlwZSI6ICJEaXN0Q29uc29saWRhY2FvRHRsIiwgIm1ldGhvZCI6ICJBdHRhY2gifSwgeyJ0eXBlIjogIkRpc3RSZXRpZG8iLCAibWV0aG9kIjogIkFkZCJ9XX0sICJSZXRlbmNhb1BvckF1ZGlvdmlzdWFsU2VtUmVnaXN0cm9zIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgUmV0ZW5jYW9Qb3JBdWRpb3Zpc3VhbFNlbVJlZ2lzdHJvcyhBdWRpb1Zpc3VhbEdsb2JvcGxheSBhdWRpb1Zpc3VhbCwgc3RyaW5nIHNpZ2xhLCBEaXN0Q29uc29saWRhY2FvRHRsIGRpc3RDb25zb2xpZGFjYW9EdGxBQSwgRGlzdENvbnNvbGlkYWNhb0R0bCBkaXN0Q29uc29saWRhY2FvRHRsQ0MpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB2ZXJiYUF1dG9yYWwgPSBDYWxjdWxhclZlcmJhUGFyYURpc3RyaWJ1aWNhb0RvQXVkaW9WaXN1YWwoYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEuVmxyVmVyYmFBdXRvcmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhdWRpb1Zpc3VhbC5WbHJGYXRvckRpc3RyaWJ1aWNhb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEuVmVyYmFUb3RhbCk7XG4gICAgICAgICAgICB2YXIgdmVyYmFDb25leGEgPSBDYWxjdWxhclZlcmJhUGFyYURpc3RyaWJ1aWNhb0RvQXVkaW9WaXN1YWwoYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEuVmxyVmVyYmFDb25leGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhdWRpb1Zpc3VhbC5WbHJGYXRvckRpc3RyaWJ1aWNhb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZlcmJhVG90YWwpO1xuXG4gICAgICAgICAgICAjcmVnaW9uIHBhcnRlIGF1dG9yYWxcblxuICAgICAgICAgICAgLy92YXIgZGlzdENvbnNvbGlkYWNhb0FBRHRsID0gYXdhaXQgX2NvbnRleHQuRGlzdENvbnNvbGlkYWNhb0R0bC5GaXJzdEFzeW5jKHggPT4geC5Db2RDb25zb2xpZERpc3RyaWJEdGwgPT0gYXVkaW9WaXN1YWwuQ29kaWdvQ29zb2xpZGFjYW9BQUR0bCk7XG5cblxuICAgICAgICAgICAgZGlzdENvbnNvbGlkYWNhb0R0bEFBID0gYXdhaXQgX2NvbnRleHQuRGlzdENvbnNvbGlkYWNhb0R0bFxuICAgICAgICAgICAgLkZpcnN0T3JEZWZhdWx0QXN5bmMoeCA9PiB4LkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9PSBhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0FBRHRsLlZhbHVlKTtcblxuICAgICAgICAgICAgLy9kaXN0Q29uc29saWRhY2FvRHRsQUEgPSBfY29uc29saWRhY2FvQ2FjaGVTZXJ2aWNlLkJ1c2NhckNvbnNvbGlkYWNhbyhhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0FBRHRsLlZhbHVlKTtcblxuICAgICAgICAgICAgZGlzdENvbnNvbGlkYWNhb0R0bEFBLlRpcFNpdHVhY2FvRXhlY3VjYW8gPSBcIlJcIjtcbiAgICAgICAgICAgIGRpc3RDb25zb2xpZGFjYW9EdGxBQS5TZ2xNb3Rpdm9SZXRlbmNhbyA9IHNpZ2xhO1xuXG4gICAgICAgICAgICBkaXN0Q29uc29saWRhY2FvRHRsQ0MgPSBhd2FpdCBfY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsXG4gICAgICAgICAgICAuRmlyc3RPckRlZmF1bHRBc3luYyh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQ0NEdGwuVmFsdWUpO1xuICAgICAgICAgICAgLy9kaXN0Q29uc29saWRhY2FvRHRsQ0MgPSBfY29uc29saWRhY2FvQ2FjaGVTZXJ2aWNlLkJ1c2NhckNvbnNvbGlkYWNhbyhhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0NDRHRsLlZhbHVlKTtcblxuICAgICAgICAgICAgZGlzdENvbnNvbGlkYWNhb0R0bENDLlRpcFNpdHVhY2FvRXhlY3VjYW8gPSBcIlJcIjtcbiAgICAgICAgICAgIGRpc3RDb25zb2xpZGFjYW9EdGxDQy5TZ2xNb3Rpdm9SZXRlbmNhbyA9IHNpZ2xhO1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tlZEVudGl0eSA9IF9jb250ZXh0LkNoYW5nZVRyYWNrZXIuRW50cmllczxEaXN0Q29uc29saWRhY2FvRHRsPigpLkZpcnN0T3JEZWZhdWx0KGUgPT4gZS5FbnRpdHkuQ29kQ29uc29saWREaXN0cmliRHRsID09IGRpc3RDb25zb2xpZGFjYW9EdGxBQS5Db2RDb25zb2xpZERpc3RyaWJEdGwpO1xuXG4gICAgICAgICAgICBpZiAodHJhY2tlZEVudGl0eSA9PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGRpc3RDb25zb2xpZGFjYW9EdGxBQSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYWNrZWRFbnRpdHkgPSBfY29udGV4dC5DaGFuZ2VUcmFja2VyLkVudHJpZXM8RGlzdENvbnNvbGlkYWNhb0R0bD4oKS5GaXJzdE9yRGVmYXVsdChlID0+IGUuRW50aXR5LkNvZENvbnNvbGlkRGlzdHJpYkR0bCA9PSBkaXN0Q29uc29saWRhY2FvRHRsQ0MuQ29kQ29uc29saWREaXN0cmliRHRsKTtcblxuICAgICAgICAgICAgaWYgKHRyYWNrZWRFbnRpdHkgPT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5EaXN0Q29uc29saWRhY2FvRHRsLkF0dGFjaChkaXN0Q29uc29saWRhY2FvRHRsQ0MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL19jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGRpc3RDb25zb2xpZGFjYW9EdGxBQSk7XG4gICAgICAgICAgICAvL19jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGRpc3RDb25zb2xpZGFjYW9EdGxDQyk7XG5cblxuICAgICAgICAgICAgRGlzdFJldGlkbyBkaXN0UmV0aWRvQUEgPSBuZXcoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIENvZENvbnNvbGlkRGlzdHJpYkR0bCA9IGRpc3RDb25zb2xpZGFjYW9EdGxBQSxcbiAgICAgICAgICAgICAgICBDb2RPYnJhQXVkaW9FY2FkID0gYXVkaW9WaXN1YWwuQ29kT2JyYUF1ZGlvRWNhZCxcbiAgICAgICAgICAgICAgICBDb2RDYXBpRXBpc29kaW8gPSBhdWRpb1Zpc3VhbC5Db2RDYXBpRXBpc29kaW8sXG4gICAgICAgICAgICAgICAgVmxyUmVuZGltZW50byA9IHZlcmJhQXV0b3JhbCxcbiAgICAgICAgICAgICAgICBWbHJUaXR1bGFyID0gdmVyYmFBdXRvcmFsLFxuICAgICAgICAgICAgICAgIFNnbE1vdGl2b1JldGVuY2FvID0gc2lnbGEsXG4gICAgICAgICAgICAgICAgSW5kRGVzZG9icmFkb1BhcmFtID0gXCJOXCIsXG4gICAgICAgICAgICAgICAgRGF0VWx0aW1hQ29ycmVjYW8gPSBuZXcgRGF0ZVRpbWUoMjAyMiwgMDUsIDI1KSxcbiAgICAgICAgICAgICAgICBWbHJTb2NpZWRhZGUgPSB2ZXJiYUF1dG9yYWwgKiAoYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEuVmxyVmVyYmFTb2NpZXRhcmlhIC8gKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbCArIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQ29uZXhhKSksXG4gICAgICAgICAgICAgICAgVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0ID0gXCJETVwiLFxuICAgICAgICAgICAgICAgIERhdFByb2Nlc3NhbWVudG8gPSBEYXRlVGltZS5VdGNOb3csXG4gICAgICAgICAgICAgICAgUGN0UGFydGljaXBhY2FvID0gMTAwLFxuICAgICAgICAgICAgICAgIFBjdFJlbmRpbWVudG8gPSAxMDAsXG4gICAgICAgICAgICAgICAgTnJvRXhlY1JlZmRnID0gKGludClhdWRpb1Zpc3VhbC5Tb21hRmF0b3JEaXN0cmlidWljYW8sIC8vMjU4NDkzODU1XG4gICAgICAgICAgICAgICAgVGlwT3JpZ2VtRXhlYyA9IFwiU1wiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgI2VuZHJlZ2lvblxuXG4gICAgICAgICAgICAjcmVnaW9uIHBhcnRlIGNvbmV4YVxuXG4gICAgICAgICAgICBEaXN0UmV0aWRvIGRpc3RSZXRpZG9DQyA9IG5ldyBEaXN0UmV0aWRvKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBDb2RDb25zb2xpZERpc3RyaWJEdGwgPSBkaXN0Q29uc29saWRhY2FvRHRsQ0MsXG4gICAgICAgICAgICAgICAgQ29kT2JyYUF1ZGlvRWNhZCA9IGF1ZGlvVmlzdWFsLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0gYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvLFxuICAgICAgICAgICAgICAgIFZsclJlbmRpbWVudG8gPSB2ZXJiYUNvbmV4YSxcbiAgICAgICAgICAgICAgICBWbHJUaXR1bGFyID0gdmVyYmFDb25leGEsXG4gICAgICAgICAgICAgICAgU2dsTW90aXZvUmV0ZW5jYW8gPSBzaWdsYSxcbiAgICAgICAgICAgICAgICBJbmREZXNkb2JyYWRvUGFyYW0gPSBcIk5cIixcbiAgICAgICAgICAgICAgICBEYXRVbHRpbWFDb3JyZWNhbyA9IG5ldyBEYXRlVGltZSgyMDIyLCAwNSwgMjUpLFxuICAgICAgICAgICAgICAgIFZsclNvY2llZGFkZSA9IHZlcmJhQ29uZXhhICogKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhU29jaWV0YXJpYSAvIChhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUF1dG9yYWwgKyBhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUNvbmV4YSkpLFxuICAgICAgICAgICAgICAgIFRpcENhcmFjdGVyaXN0aWNhRGlzdCA9IFwiRE1cIixcbiAgICAgICAgICAgICAgICBEYXRQcm9jZXNzYW1lbnRvID0gRGF0ZVRpbWUuVXRjTm93LFxuICAgICAgICAgICAgICAgIFBjdFBhcnRpY2lwYWNhbyA9IDEwMCxcbiAgICAgICAgICAgICAgICBQY3RSZW5kaW1lbnRvID0gMTAwLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWNSZWZkZyA9IChpbnQpYXVkaW9WaXN1YWwuU29tYUZhdG9yRGlzdHJpYnVpY2FvLCAvLzI1ODQ5Mzg1NVxuICAgICAgICAgICAgICAgIFRpcE9yaWdlbUV4ZWMgPSBcIlNcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICNlbmRyZWdpb25cblxuICAgICAgICAgICAgX2NvbnRleHQuRGlzdFJldGlkby5BZGQoZGlzdFJldGlkb0FBKTtcbiAgICAgICAgICAgIF9jb250ZXh0LkRpc3RSZXRpZG8uQWRkKGRpc3RSZXRpZG9DQyk7XG5cbiAgICAgICAgICAgIF9jb250ZXh0LlVwZGF0ZShkaXN0Q29uc29saWRhY2FvRHRsQUEpO1xuICAgICAgICAgICAgX2NvbnRleHQuVXBkYXRlKGRpc3RDb25zb2xpZGFjYW9EdGxDQyk7XG5cbiAgICAgICAgICAgIGF3YWl0IF9jb250ZXh0LlNhdmVDaGFuZ2VzQXN5bmMoKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklDb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UiLCAibWV0aG9kIjogIkJ1c2NhckNvbnNvbGlkYWNhbyJ9LCB7InR5cGUiOiAiSUNvbnNvbGlkYWNhb0NhY2hlU2VydmljZSIsICJtZXRob2QiOiAiQnVzY2FyQ29uc29saWRhY2FvIn0sIHsidHlwZSI6ICJJQ29udGV4dCIsICJtZXRob2QiOiAiVXBkYXRlIn0sIHsidHlwZSI6ICJJQ29udGV4dCIsICJtZXRob2QiOiAiVXBkYXRlIn0sIHsidHlwZSI6ICJJQ29udGV4dCIsICJtZXRob2QiOiAiU2F2ZUNoYW5nZXNBc3luYyJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiRmlyc3RBc3luYyJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiQXR0YWNoIn0sIHsidHlwZSI6ICJEaXN0Q29uc29saWRhY2FvRHRsIiwgIm1ldGhvZCI6ICJBdHRhY2gifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkF0dGFjaCJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiQXR0YWNoIn0sIHsidHlwZSI6ICJEaXN0UmV0aWRvIiwgIm1ldGhvZCI6ICJBZGQifSwgeyJ0eXBlIjogIkRpc3RSZXRpZG8iLCAibWV0aG9kIjogIkFkZCJ9XX0sICJSZXRlbmNhb1BvckF1ZGlvdmlzdWFsU2VtUmVnaXN0cm9zU2VtQ2FjaGUiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzayBSZXRlbmNhb1BvckF1ZGlvdmlzdWFsU2VtUmVnaXN0cm9zU2VtQ2FjaGUoQXVkaW9WaXN1YWxHbG9ib3BsYXkgYXVkaW9WaXN1YWwsIHN0cmluZyBzaWdsYSwgRGlzdENvbnNvbGlkYWNhb0R0bCBkaXN0Q29uc29saWRhY2FvRHRsQUEsIERpc3RDb25zb2xpZGFjYW9EdGwgZGlzdENvbnNvbGlkYWNhb0R0bENDKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdmVyYmFBdXRvcmFsID0gQ2FsY3VsYXJWZXJiYVBhcmFEaXN0cmlidWljYW9Eb0F1ZGlvVmlzdWFsKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYXVkaW9WaXN1YWwuVmxyRmF0b3JEaXN0cmlidWljYW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZlcmJhVG90YWwpO1xuICAgICAgICAgICAgdmFyIHZlcmJhQ29uZXhhID0gQ2FsY3VsYXJWZXJiYVBhcmFEaXN0cmlidWljYW9Eb0F1ZGlvVmlzdWFsKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQ29uZXhhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYXVkaW9WaXN1YWwuVmxyRmF0b3JEaXN0cmlidWljYW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WZXJiYVRvdGFsKTtcblxuICAgICAgICAgICAgI3JlZ2lvbiBwYXJ0ZSBhdXRvcmFsXG5cbiAgICAgICAgICAgIC8vdmFyIGRpc3RDb25zb2xpZGFjYW9BQUR0bCA9IGF3YWl0IF9jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuRmlyc3RBc3luYyh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwpO1xuXG5cbiAgICAgICAgICAgIC8vZGlzdENvbnNvbGlkYWNhb0R0bEFBID0gYXdhaXQgX2NvbnRleHQuRGlzdENvbnNvbGlkYWNhb0R0bFxuICAgICAgICAgICAgLy8uRmlyc3RPckRlZmF1bHRBc3luYyh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWUpO1xuXG4gICAgICAgICAgICAvL2Rpc3RDb25zb2xpZGFjYW9EdGxBQSA9IF9jb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UuQnVzY2FyQ29uc29saWRhY2FvKGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQUFEdGwuVmFsdWUpO1xuXG4gICAgICAgICAgICBkaXN0Q29uc29saWRhY2FvRHRsQUEuVGlwU2l0dWFjYW9FeGVjdWNhbyA9IFwiUlwiO1xuICAgICAgICAgICAgZGlzdENvbnNvbGlkYWNhb0R0bEFBLlNnbE1vdGl2b1JldGVuY2FvID0gc2lnbGE7XG5cbiAgICAgICAgICAgIC8vZGlzdENvbnNvbGlkYWNhb0R0bENDID0gYXdhaXQgX2NvbnRleHQuRGlzdENvbnNvbGlkYWNhb0R0bFxuICAgICAgICAgICAgLy8uRmlyc3RPckRlZmF1bHRBc3luYyh4ID0+IHguQ29kQ29uc29saWREaXN0cmliRHRsID09IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQ0NEdGwuVmFsdWUpO1xuICAgICAgICAgICAgLy9kaXN0Q29uc29saWRhY2FvRHRsQ0MgPSBfY29uc29saWRhY2FvQ2FjaGVTZXJ2aWNlLkJ1c2NhckNvbnNvbGlkYWNhbyhhdWRpb1Zpc3VhbC5Db2RpZ29Db3NvbGlkYWNhb0NDRHRsLlZhbHVlKTtcblxuICAgICAgICAgICAgZGlzdENvbnNvbGlkYWNhb0R0bENDLlRpcFNpdHVhY2FvRXhlY3VjYW8gPSBcIlJcIjtcbiAgICAgICAgICAgIGRpc3RDb25zb2xpZGFjYW9EdGxDQy5TZ2xNb3Rpdm9SZXRlbmNhbyA9IHNpZ2xhO1xuXG4gICAgICAgICAgICAvL19jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGRpc3RDb25zb2xpZGFjYW9EdGxBQSk7XG4gICAgICAgICAgICAvL19jb250ZXh0LkRpc3RDb25zb2xpZGFjYW9EdGwuQXR0YWNoKGRpc3RDb25zb2xpZGFjYW9EdGxDQyk7XG5cblxuICAgICAgICAgICAgRGlzdFJldGlkbyBkaXN0UmV0aWRvQUEgPSBuZXcoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIENvZENvbnNvbGlkRGlzdHJpYkR0bCA9IGRpc3RDb25zb2xpZGFjYW9EdGxBQSxcbiAgICAgICAgICAgICAgICBDb2RPYnJhQXVkaW9FY2FkID0gYXVkaW9WaXN1YWwuQ29kT2JyYUF1ZGlvRWNhZCxcbiAgICAgICAgICAgICAgICBDb2RDYXBpRXBpc29kaW8gPSBhdWRpb1Zpc3VhbC5Db2RDYXBpRXBpc29kaW8sXG4gICAgICAgICAgICAgICAgVmxyUmVuZGltZW50byA9IHZlcmJhQXV0b3JhbCxcbiAgICAgICAgICAgICAgICBWbHJUaXR1bGFyID0gdmVyYmFBdXRvcmFsLFxuICAgICAgICAgICAgICAgIFNnbE1vdGl2b1JldGVuY2FvID0gc2lnbGEsXG4gICAgICAgICAgICAgICAgSW5kRGVzZG9icmFkb1BhcmFtID0gXCJOXCIsXG4gICAgICAgICAgICAgICAgRGF0VWx0aW1hQ29ycmVjYW8gPSBuZXcgRGF0ZVRpbWUoMjAyMiwgMDUsIDI1KSxcbiAgICAgICAgICAgICAgICBWbHJTb2NpZWRhZGUgPSB2ZXJiYUF1dG9yYWwgKiAoYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEuVmxyVmVyYmFTb2NpZXRhcmlhIC8gKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbCArIGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhQ29uZXhhKSksXG4gICAgICAgICAgICAgICAgVGlwQ2FyYWN0ZXJpc3RpY2FEaXN0ID0gXCJETVwiLFxuICAgICAgICAgICAgICAgIERhdFByb2Nlc3NhbWVudG8gPSBEYXRlVGltZS5VdGNOb3csXG4gICAgICAgICAgICAgICAgUGN0UGFydGljaXBhY2FvID0gMTAwLFxuICAgICAgICAgICAgICAgIFBjdFJlbmRpbWVudG8gPSAxMDAsXG4gICAgICAgICAgICAgICAgTnJvRXhlY1JlZmRnID0gKGludClhdWRpb1Zpc3VhbC5Tb21hRmF0b3JEaXN0cmlidWljYW8sIC8vMjU4NDkzODU1XG4gICAgICAgICAgICAgICAgVGlwT3JpZ2VtRXhlYyA9IFwiU1wiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgI2VuZHJlZ2lvblxuXG4gICAgICAgICAgICAjcmVnaW9uIHBhcnRlIGNvbmV4YVxuXG4gICAgICAgICAgICBEaXN0UmV0aWRvIGRpc3RSZXRpZG9DQyA9IG5ldyBEaXN0UmV0aWRvKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBDb2RDb25zb2xpZERpc3RyaWJEdGwgPSBkaXN0Q29uc29saWRhY2FvRHRsQ0MsXG4gICAgICAgICAgICAgICAgQ29kT2JyYUF1ZGlvRWNhZCA9IGF1ZGlvVmlzdWFsLkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0gYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvLFxuICAgICAgICAgICAgICAgIFZsclJlbmRpbWVudG8gPSB2ZXJiYUNvbmV4YSxcbiAgICAgICAgICAgICAgICBWbHJUaXR1bGFyID0gdmVyYmFDb25leGEsXG4gICAgICAgICAgICAgICAgU2dsTW90aXZvUmV0ZW5jYW8gPSBzaWdsYSxcbiAgICAgICAgICAgICAgICBJbmREZXNkb2JyYWRvUGFyYW0gPSBcIk5cIixcbiAgICAgICAgICAgICAgICBEYXRVbHRpbWFDb3JyZWNhbyA9IG5ldyBEYXRlVGltZSgyMDIyLCAwNSwgMjUpLFxuICAgICAgICAgICAgICAgIFZsclNvY2llZGFkZSA9IHZlcmJhQ29uZXhhICogKGF1ZGlvVmlzdWFsLkNvbXBldGVuY2lhLlZsclZlcmJhU29jaWV0YXJpYSAvIChhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUF1dG9yYWwgKyBhdWRpb1Zpc3VhbC5Db21wZXRlbmNpYS5WbHJWZXJiYUNvbmV4YSkpLFxuICAgICAgICAgICAgICAgIFRpcENhcmFjdGVyaXN0aWNhRGlzdCA9IFwiRE1cIixcbiAgICAgICAgICAgICAgICBEYXRQcm9jZXNzYW1lbnRvID0gRGF0ZVRpbWUuVXRjTm93LFxuICAgICAgICAgICAgICAgIFBjdFBhcnRpY2lwYWNhbyA9IDEwMCxcbiAgICAgICAgICAgICAgICBQY3RSZW5kaW1lbnRvID0gMTAwLFxuICAgICAgICAgICAgICAgIE5yb0V4ZWNSZWZkZyA9IChpbnQpYXVkaW9WaXN1YWwuU29tYUZhdG9yRGlzdHJpYnVpY2FvLCAvLzI1ODQ5Mzg1NVxuICAgICAgICAgICAgICAgIFRpcE9yaWdlbUV4ZWMgPSBcIlNcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICNlbmRyZWdpb25cblxuICAgICAgICAgICAgX2NvbnRleHQuRGlzdFJldGlkby5BZGQoZGlzdFJldGlkb0FBKTtcbiAgICAgICAgICAgIF9jb250ZXh0LkRpc3RSZXRpZG8uQWRkKGRpc3RSZXRpZG9DQyk7XG5cbiAgICAgICAgICAgIC8vX2NvbnRleHQuVXBkYXRlKGRpc3RDb25zb2xpZGFjYW9EdGxBQSk7XG4gICAgICAgICAgICAvL19jb250ZXh0LlVwZGF0ZShkaXN0Q29uc29saWRhY2FvRHRsQ0MpO1xuXG4gICAgICAgICAgICBhd2FpdCBfY29udGV4dC5TYXZlQ2hhbmdlc0FzeW5jKCk7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJQ29uc29saWRhY2FvQ2FjaGVTZXJ2aWNlIiwgIm1ldGhvZCI6ICJCdXNjYXJDb25zb2xpZGFjYW8ifSwgeyJ0eXBlIjogIklDb25zb2xpZGFjYW9DYWNoZVNlcnZpY2UiLCAibWV0aG9kIjogIkJ1c2NhckNvbnNvbGlkYWNhbyJ9LCB7InR5cGUiOiAiSUNvbnRleHQiLCAibWV0aG9kIjogIlVwZGF0ZSJ9LCB7InR5cGUiOiAiSUNvbnRleHQiLCAibWV0aG9kIjogIlVwZGF0ZSJ9LCB7InR5cGUiOiAiSUNvbnRleHQiLCAibWV0aG9kIjogIlNhdmVDaGFuZ2VzQXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkZpcnN0QXN5bmMifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkF0dGFjaCJ9LCB7InR5cGUiOiAiRGlzdENvbnNvbGlkYWNhb0R0bCIsICJtZXRob2QiOiAiQXR0YWNoIn0sIHsidHlwZSI6ICJEaXN0UmV0aWRvIiwgIm1ldGhvZCI6ICJBZGQifSwgeyJ0eXBlIjogIkRpc3RSZXRpZG8iLCAibWV0aG9kIjogIkFkZCJ9XX0sICJDYWxjdWxhclZlcmJhUGFyYURpc3RyaWJ1aWNhb0RvQXVkaW9WaXN1YWwiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgZGVjaW1hbCBDYWxjdWxhclZlcmJhUGFyYURpc3RyaWJ1aWNhb0RvQXVkaW9WaXN1YWwoZGVjaW1hbCBWZXJiYSwgZGVjaW1hbCB2bHJGYXRvckRpc3RyaWJ1aWNhbywgZGVjaW1hbCB2ZXJiYVRvdGFsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gIChWZXJiYSAqIHZsckZhdG9yRGlzdHJpYnVpY2FvKSAvIHZlcmJhVG90YWw7XG4gICAgICAgIH0ifX19fSwgIlZhbHVlT2JqZWN0cyI6IHsiQ29uc29saWRhY2FvQUEiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kQXVkaW9WaXN1YWwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk9jb3JyZW5jaWFzQXVkaW92aXN1YWwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkV4ZWN1Y29lc011c2ljYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUb3RhbEV4ZWN1Y29lcyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVG90YWxFeGVjdWNvZXNYUGVzb0NhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiU29tYUV4ZWN1Y2FvRGFzQ2FyYWN0ZXJpc3RpY2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlBvbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIkNvbnNvbGlkYWNhb0NDIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZEF1ZGlvVmlzdWFsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJPY29ycmVuY2lhc0F1ZGlvdmlzdWFsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJFeGVjdWNvZXNNdXNpY2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVG90YWxFeGVjdWNvZXMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRvdGFsRXhlY3Vjb2VzWFBlc29DYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlNvbWFFeGVjdWNhb0Rhc0NhcmFjdGVyaXN0aWNhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJQb250byI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9fX0sICJFbnVtSGVscGVyIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX19fSwgIkVjYWRHbG9ib1BsYXkuRG9tYWluLlRlc3RzIjogeyJSZXRlbmNhb1NlcnZpY2VUZXN0cyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJSZXRlbmNhb1BvclRpdHVsYXJPYnJhQ29tUGVuZFx1MDBlYW5jaWFfU2hvdWxkQWRkUmVjb3JkcyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyB2b2lkIFJldGVuY2FvUG9yVGl0dWxhck9icmFDb21QZW5kXHUwMGVhbmNpYV9TaG91bGRBZGRSZWNvcmRzKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgdmFyIGF1ZGlvVmlzdWFsID0gbmV3IEF1ZGlvVmlzdWFsR2xvYm9wbGF5IHsgQ29kRGlzdHJpYnVpY2FvID0gMTIzLCBOcm9GYXRvckRpc3RyaWJ1aWNhbyA9IDEsIFZsckZhdG9yRGlzdHJpYnVpY2FvID0gMS4wTSwgQ29tcGV0ZW5jaWEgPSBuZXcgQ29tcGV0ZW5jaWEgeyBWbHJWZXJiYUF1dG9yYWwgPSAxMDAuME0gfSB9O1xuICAgICAgICAgICAgdmFyIHRpdHVsYXIgPSBuZXcgVGl0dWxhck9icmEgeyBDb2RUaXR1bGFyRWNhZCA9IDEsIFBjdFBhcnRpY2lwYWNhbyA9IDUwLjBNLCBDb2RDYXRlZ29yaWEgPSBcIkFcIiwgQ29kU3ViQ2F0ZWdvcmlhID0gXCJCXCIgfTtcbiAgICAgICAgICAgIHZhciBvYnJhID0gbmV3IE11c2ljYUF1ZGlvIHsgQ29kT2JyYU11c0VjYWQgPSAxLCBRdGREdXJhY2FvTXVzaWNhID0gNjAsIENhcmFjdGVyaXN0aWNhRGlzdHJpYnVpY2FvID0gXCJYXCIgfTtcbiAgICAgICAgICAgIHZhciBjb25zb2xpZGFjb2VzQUEgPSBuZXcgTGlzdDxDb25zb2xpZGFjYW9BQT4geyBuZXcgQ29uc29saWRhY2FvQUEgeyBDYXRlZ29yaWEgPSBcIlhcIiwgUG9udG8gPSAxLjBNIH0gfTtcblxuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBfc2VydmljZS5SZXRlbmNhb1BvclRpdHVsYXJPYnJhQ29tUGVuZFx1MDBlYW5jaWEoYXVkaW9WaXN1YWwsIHRpdHVsYXIsIG9icmEsIGNvbnNvbGlkYWNvZXNBQSwgXCJTSUdMQVwiKTtcblxuICAgICAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgICAgICBfbW9ja0NvbnRleHQuVmVyaWZ5KG0gPT4gbS5EaXN0Q29uc29saWRhY2FvLkFkZChJdC5Jc0FueTxEaXN0Q29uc29saWRhY2FvPigpKSwgVGltZXMuT25jZSgpKTtcbiAgICAgICAgICAgIF9tb2NrQ29udGV4dC5WZXJpZnkobSA9PiBtLkRpc3RDb25zb2xpZGFjYW9EdGwuQWRkKEl0LklzQW55PERpc3RDb25zb2xpZGFjYW9EdGw+KCkpLCBUaW1lcy5PbmNlKCkpO1xuICAgICAgICAgICAgX21vY2tDb250ZXh0LlZlcmlmeShtID0+IG0uRGlzdFJldGlkby5BZGQoSXQuSXNBbnk8RGlzdFJldGlkbz4oKSksIFRpbWVzLk9uY2UoKSk7XG4gICAgICAgICAgICBfbW9ja0NvbnRleHQuVmVyaWZ5KG0gPT4gbS5TYXZlQ2hhbmdlcygpLCBUaW1lcy5PbmNlKCkpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVNlcnZpY2UiLCAibWV0aG9kIjogIlJldGVuY2FvUG9yVGl0dWxhck9icmFDb21QZW5kXHUwMGVhbmNpYSJ9LCB7InR5cGUiOiAiSU1vY2tDb250ZXh0IiwgIm1ldGhvZCI6ICJWZXJpZnkifSwgeyJ0eXBlIjogIklNb2NrQ29udGV4dCIsICJtZXRob2QiOiAiVmVyaWZ5In0sIHsidHlwZSI6ICJJTW9ja0NvbnRleHQiLCAibWV0aG9kIjogIlZlcmlmeSJ9LCB7InR5cGUiOiAiSU1vY2tDb250ZXh0IiwgIm1ldGhvZCI6ICJWZXJpZnkifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW8iLCAibWV0aG9kIjogIkFkZCJ9LCB7InR5cGUiOiAiVGltZXMiLCAibWV0aG9kIjogIk9uY2UifSwgeyJ0eXBlIjogIkRpc3RDb25zb2xpZGFjYW9EdGwiLCAibWV0aG9kIjogIkFkZCJ9LCB7InR5cGUiOiAiVGltZXMiLCAibWV0aG9kIjogIk9uY2UifSwgeyJ0eXBlIjogIkRpc3RSZXRpZG8iLCAibWV0aG9kIjogIkFkZCJ9LCB7InR5cGUiOiAiVGltZXMiLCAibWV0aG9kIjogIk9uY2UifSwgeyJ0eXBlIjogIm0iLCAibWV0aG9kIjogIlNhdmVDaGFuZ2VzIn0sIHsidHlwZSI6ICJUaW1lcyIsICJtZXRob2QiOiAiT25jZSJ9XX19fX0sICJFY2FkR2xvYm9wbGF5LkRvbWFpblJlYWQiOiB7ImRhdGEiOiB7Ik11c2ljYUF1ZGlvRFRPIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7ImNvZF9tdXNpY2FhdWRpbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiY29kX29icmFhdWRpb2VjYWQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgImNvZF9mb25vZ3JhbWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgImNvZF9vYnJhbXVzZWNhZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiY29kX3BvdXRfcG91cnJpdCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAibnJvX29jb3JyZW5jaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgInBjdF9wZXNvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJjb2RfY2FwaWVwaXNvZGlvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJjb2RfY2FyYWN0ZXJpc3RpY2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgInF0ZF9kdXJhY2FvbXVzaWNhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJkYXRfaW5jbHVzYW8iOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiRGFwcGVyREFPIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkdldENvbm5lY3Rpb24iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgU3FsQ29ubmVjdGlvbiBHZXRDb25uZWN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTcWxDb25uZWN0aW9uKF9jb25uZWN0aW9uU3RyaW5nKTtcbiAgICAgICAgfSJ9LCAiR2V0Q29tcGV0ZW5jaWFHbG9ib3BsYXkiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzazxDb21wZXRlbmNpYT4gR2V0Q29tcGV0ZW5jaWFHbG9ib3BsYXkoKVxuICAgICAgICB7XG4gICAgICAgICAgICB1c2luZyAodmFyIGNvbm5lY3Rpb24gPSBHZXRDb25uZWN0aW9uKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGNvbm5lY3Rpb24uUXVlcnlGaXJzdEFzeW5jPENvbXBldGVuY2lhPihcIlNFTEVDVCAqIEZST00gZGJvLlZXX0NPTVBFVEVOQ0lBXCIpO1xuICAgICAgICB9In0sICJJbnNlcnREaXN0cmlidWljYW8iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzazxpbnQ+IEluc2VydERpc3RyaWJ1aWNhbyhEYWRvc0Rpc3RyaWJ1aWNhbyBkaXN0cmlidWljYW8pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVzaW5nICh2YXIgY29ubmVjdGlvbiA9IEdldENvbm5lY3Rpb24oKSlcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IEBcIlxuICAgICAgICAgICAgICAgIElOU0VSVCBJTlRPIGRiby5ESVNUUklCVUlDQU8gXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBjb2RfY29tcGV0ZW5jaWEsXG4gICAgICAgICAgICAgICAgICAgIGRhdF9kaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgIHZscl92ZXJiYWF1dG9yYWwsXG4gICAgICAgICAgICAgICAgICAgIHZscl92ZXJiYWNvbmV4YSxcbiAgICAgICAgICAgICAgICAgICAgdmxyX3ZlcmJhc29jaWV0YXJpb1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBPVVRQVVQgSU5TRVJURUQuY29kX2Rpc3RyaWJ1aWNhb1xuICAgICAgICAgICAgICAgIFZBTFVFU1xuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgQENvZENvbXBldGVuY2lhLFxuICAgICAgICAgICAgICAgICAgICBARGF0RGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgICAgICBAVmxyVmVyYmFBdXRvcmFsLFxuICAgICAgICAgICAgICAgICAgICBAVmxyVmVyYmFDb25leGEsXG4gICAgICAgICAgICAgICAgICAgIEBWbHJWZXJiYVNvY2lldGFyaW9cbiAgICAgICAgICAgICAgICApO1wiO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRyb3MgPSBuZXdcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RyaWJ1aWNhby5Db2RDb21wZXRlbmNpYSxcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpYnVpY2FvLkRhdERpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpYnVpY2FvLlZsclZlcmJhQXV0b3JhbCxcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpYnVpY2FvLlZsclZlcmJhQ29uZXhhLFxuICAgICAgICAgICAgICAgICAgICBkaXN0cmlidWljYW8uVmxyVmVyYmFTb2NpZXRhcmlvXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBjb2REaXN0cmlidWljYW8gPSBhd2FpdCBjb25uZWN0aW9uLlF1ZXJ5U2luZ2xlQXN5bmM8aW50PihxdWVyeSwgcGFyYW1ldHJvcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZERpc3RyaWJ1aWNhbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSJ9LCAiSW5zZXJ0RGlzdHJpYnVpY2FvUk9MIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2s8aW50PiBJbnNlcnREaXN0cmlidWljYW9ST0woaW50IGNvZERpc3RyaWJ1aWNhbywgbG9uZyBjb2RSb2xNdXNpY2FsKVxuICAgICAgICB7XG4gICAgICAgICAgICB1c2luZyAodmFyIGNvbm5lY3Rpb24gPSBHZXRDb25uZWN0aW9uKCkpXG4gICAgICAgICAgICB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBAXCJcbiAgICAgICAgICAgICAgICBJTlNFUlQgSU5UTyBkYm8uRElTVF9ST0wgXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBjb2RfZGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgICAgICBjb2Rfcm9sbXVzaWNhbFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBPVVRQVVQgSU5TRVJURUQuY29kX2Rpc3Ryb2xcbiAgICAgICAgICAgICAgICBWQUxVRVNcbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIEBjb2REaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgIEBjb2RSb2xNdXNpY2FsICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICk7XCI7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldHJvcyA9IG5ld1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29kRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgICAgICBjb2RSb2xNdXNpY2FsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBjb2REaXN0Um9sID0gYXdhaXQgY29ubmVjdGlvbi5RdWVyeVNpbmdsZUFzeW5jPGludD4ocXVlcnksIHBhcmFtZXRyb3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2REaXN0Um9sO1xuICAgICAgICAgICAgfVxuICAgICAgICB9In0sICJTdHJlYW1EZXRhbGhlc1JlbGF0YW9yaW9EZW1vbnN0cmF0aXZvVGl0dWxhckFzeW5jIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgU3RyZWFtRGV0YWxoZXNSZWxhdGFvcmlvRGVtb25zdHJhdGl2b1RpdHVsYXJBc3luYyhIZWFkZXJEZW1vbnN0cmF0aXZvVGl0dWxhciBoZWFkZXIsIEZ1bmM8RGV0YWxoZXNEZW1vbnN0cmF0aXZvVGl0dWxhciwgVGFzaz4gcHJvY2Vzc0l0ZW0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVzaW5nICh2YXIgY29ubmVjdGlvbiA9IEdldENvbm5lY3Rpb24oKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBAXCJcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgY29udmVydCh2YXJjaGFyLCBjb2Rfb2JyYWZvbm9yZWFsKSArICcgLSAnICsgbm9tX3RpdHVsb29icmEgYXMgT2JyYU11c2ljYWwsXG4gICAgICAgICAgICBkc2NfcnVicmljYSBhcyBSdWJyaWNhLFxuICAgICAgICAgICAgZGF0X3BlcmlvZG9kaXN0IGFzIFBlcmlvZG8sXG4gICAgICAgICAgICBWTFJfUkVORE9CUkEgYXMgUmVuZGltZW50byxcbiAgICAgICAgICAgIHBjdF9wYXJ0aWNpcGFjYW90aXQgYXMgUGVyY2VudHVhbCxcbiAgICAgICAgICAgIFZMUl9USVRVTEFSIGFzIFJhdGVpbyxcbiAgICAgICAgICAgIG5yb19leGVjdWNvZXMgYXMgRXhlY3Vjb2VzLFxuICAgICAgICAgICAgQ09EX0NBVEVHT1JJQSBhcyBDYXQsXG4gICAgICAgICAgICBjb2RfY2FyYWN0ZXJpc3RpY2FkaXN0IGFzIENhcixcbiAgICAgICAgICAgIE5PTV9USVRVTE9BVURJT09SSUcgYXMgT2JyYUF1ZGlvdmlzdWFsLFxuICAgICAgICAgICAgTlJPX0NBUElUVUxPQVVESU8gKyAnIC0gJyArIE5PTV9DQVBJVFVMT0FVRElPT1JJRyBhcyBDYXBpdHVsbyxcbiAgICAgICAgICAgIEdSQV9JU1JDIGFzIElzcmMsXG4gICAgICAgICAgICBzZ2xfc29jaWVkYWRlIGFzIFNpZ2xhU29jaWVkYWRlLFxuICAgICAgICAgICAgbWVzX3BhZ2FtZW50byBhcyBNZXNBbm8sXG4gICAgICAgICAgICBjb2RfdGl0dWxhcmVjYWQgYXMgVGl0dWxhcmlkYWRlRWNhZFxuICAgICAgICBGUk9NIFJFTF9ERU1PTlNUUkFUSVZPX1RJVFVMQVJcbiAgICAgICAgV0hFUkUgc2dsX3NvY2llZGFkZSA9IEBTaWdsYVNvY2llZGFkZSBBTkQgbWVzX3BhZ2FtZW50byA9IEBNZXNBbm8gQU5EIGNvZF90aXR1bGFyZWNhZCA9IEBUaXR1bGFyaWRhZGVFY2FkXCI7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IG5ld1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgU2lnbGFTb2NpZWRhZGUgPSBoZWFkZXIuQXNzb2NpYWNhbyxcbiAgICAgICAgICAgICAgICAgICAgTWVzQW5vID0gaGVhZGVyLk1lc0FubyxcbiAgICAgICAgICAgICAgICAgICAgVGl0dWxhcmlkYWRlRWNhZCA9IGhlYWRlci5Db2RpZ29cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gU3RyZWFtIHJlc3VsdHMgb25lIHJvdyBhdCBhIHRpbWVcbiAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gYXdhaXQgY29ubmVjdGlvbi5FeGVjdXRlUmVhZGVyQXN5bmMocXVlcnksIHBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChhd2FpdCByZWFkZXIuUmVhZEFzeW5jKCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWxoZSA9IG5ldyBEZXRhbGhlc0RlbW9uc3RyYXRpdm9UaXR1bGFyXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9icmFNdXNpY2FsID0gcmVhZGVyW1wiT2JyYU11c2ljYWxcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJ1YnJpY2EgPSByZWFkZXJbXCJSdWJyaWNhXCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJpb2RvID0gcmVhZGVyW1wiUGVyaW9kb1wiXS5Ub1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVuZGltZW50byA9IHJlYWRlcltcIlJlbmRpbWVudG9cIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFBlcmNlbnR1YWwgPSByZWFkZXJbXCJQZXJjZW50dWFsXCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBSYXRlaW8gPSByZWFkZXJbXCJSYXRlaW9cIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEV4ZWN1Y29lcyA9IHJlYWRlcltcIkV4ZWN1Y29lc1wiXS5Ub1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ID0gcmVhZGVyW1wiQ2F0XCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBDYXIgPSByZWFkZXJbXCJDYXJcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE9icmFBdWRpb3Zpc3VhbCA9IHJlYWRlcltcIk9icmFBdWRpb3Zpc3VhbFwiXS5Ub1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FwaXR1bG8gPSByZWFkZXJbXCJDYXBpdHVsb1wiXS5Ub1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgSXNyYyA9IHJlYWRlcltcIklzcmNcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFNpZ2xhU29jaWVkYWRlID0gcmVhZGVyW1wiU2lnbGFTb2NpZWRhZGVcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc0FubyA9IHJlYWRlcltcIk1lc0Fub1wiXS5Ub1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgVGl0dWxhcmlkYWRlRWNhZCA9IHJlYWRlcltcIlRpdHVsYXJpZGFkZUVjYWRcIl0uVG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NJdGVtKGRldGFsaGUpOyAvLyBQcm9jZXNzIGVhY2ggcm93IG9uZSBieSBvbmVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJjb25uZWN0aW9uIiwgIm1ldGhvZCI6ICJFeGVjdXRlUmVhZGVyQXN5bmMifSwgeyJ0eXBlIjogInJlYWRlciIsICJtZXRob2QiOiAiUmVhZEFzeW5jIn1dfSwgIkdldERldGFsaGVzUmVsYXRhb3Jpb0RlbW9uc3RyYXRpdm9UaXR1bGFyU3RyZWFtQXN5bmMiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgSUFzeW5jRW51bWVyYWJsZTxEZXRhbGhlc0RlbW9uc3RyYXRpdm9UaXR1bGFyPiBHZXREZXRhbGhlc1JlbGF0YW9yaW9EZW1vbnN0cmF0aXZvVGl0dWxhclN0cmVhbUFzeW5jKEhlYWRlckRlbW9uc3RyYXRpdm9UaXR1bGFyIGhlYWRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdXNpbmcgKHZhciBjb25uZWN0aW9uID0gR2V0Q29ubmVjdGlvbigpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IEBcIlxuICAgICAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgICAgIGNvbnZlcnQodmFyY2hhciwgY29kX29icmFmb25vcmVhbCkgKyAnIC0gJyArIG5vbV90aXR1bG9vYnJhIGFzIE9icmFNdXNpY2FsLFxuICAgICAgICAgICAgICAgIGRzY19ydWJyaWNhIGFzIFJ1YnJpY2EsXG4gICAgICAgICAgICAgICAgZGF0X3BlcmlvZG9kaXN0IGFzIFBlcmlvZG8sXG4gICAgICAgICAgICAgICAgVkxSX1JFTkRPQlJBIGFzIFJlbmRpbWVudG8sXG4gICAgICAgICAgICAgICAgcGN0X3BhcnRpY2lwYWNhb3RpdCBhcyBQZXJjZW50dWFsLFxuICAgICAgICAgICAgICAgIFZMUl9USVRVTEFSIGFzIFJhdGVpbyxcbiAgICAgICAgICAgICAgICBucm9fZXhlY3Vjb2VzIGFzIEV4ZWN1Y29lcyxcbiAgICAgICAgICAgICAgICBDT0RfQ0FURUdPUklBIGFzIENhdCxcbiAgICAgICAgICAgICAgICBjb2RfY2FyYWN0ZXJpc3RpY2FkaXN0IGFzIENhcixcbiAgICAgICAgICAgICAgICBOT01fVElUVUxPQVVESU9PUklHIGFzIE9icmFBdWRpb3Zpc3VhbCxcbiAgICAgICAgICAgICAgICBOUk9fQ0FQSVRVTE9BVURJTyArICcgLSAnICsgTk9NX0NBUElUVUxPQVVESU9PUklHIGFzIENhcGl0dWxvLFxuICAgICAgICAgICAgICAgIEdSQV9JU1JDIGFzIElzcmMsXG4gICAgICAgICAgICAgICAgc2dsX3NvY2llZGFkZSBhcyBTaWdsYVNvY2llZGFkZSxcbiAgICAgICAgICAgICAgICBtZXNfcGFnYW1lbnRvIGFzIE1lc0FubyxcbiAgICAgICAgICAgICAgICBjb2RfdGl0dWxhcmVjYWQgYXMgVGl0dWxhcmlkYWRlRWNhZFxuICAgICAgICAgICAgRlJPTSBSRUxfREVNT05TVFJBVElWT19USVRVTEFSXG4gICAgICAgICAgICBXSEVSRSBcbiAgICAgICAgICAgICAgICBzZ2xfc29jaWVkYWRlID0gQFNpZ2xhU29jaWVkYWRlXG4gICAgICAgICAgICAgICAgQU5EIG1lc19wYWdhbWVudG8gPSBATWVzQW5vXG4gICAgICAgICAgICAgICAgQU5EIGNvZF90aXR1bGFyZWNhZCA9IEBUaXR1bGFyaWRhZGVFY2FkXCI7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IG5ld1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgU2lnbGFTb2NpZWRhZGUgPSBoZWFkZXIuQXNzb2NpYWNhbyxcbiAgICAgICAgICAgICAgICAgICAgTWVzQW5vID0gaGVhZGVyLk1lc0FubyxcbiAgICAgICAgICAgICAgICAgICAgVGl0dWxhcmlkYWRlRWNhZCA9IGhlYWRlci5Db2RpZ29cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdXNpbmcgKERiRGF0YVJlYWRlciByZWFkZXIgPSBhd2FpdCBjb25uZWN0aW9uLkV4ZWN1dGVSZWFkZXJBc3luYyhxdWVyeSwgcGFyYW1ldGVycywgbnVsbCwgNzAwKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChhd2FpdCByZWFkZXIuUmVhZEFzeW5jKCkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhbGhlID0gbmV3IERldGFsaGVzRGVtb25zdHJhdGl2b1RpdHVsYXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYnJhTXVzaWNhbCA9IHJlYWRlcltcIk9icmFNdXNpY2FsXCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUnVicmljYSA9IHJlYWRlcltcIlJ1YnJpY2FcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJpb2RvID0gcmVhZGVyW1wiUGVyaW9kb1wiXS5Ub1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbmRpbWVudG8gPSByZWFkZXJbXCJSZW5kaW1lbnRvXCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGVyY2VudHVhbCA9IHJlYWRlcltcIlBlcmNlbnR1YWxcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSYXRlaW8gPSByZWFkZXJbXCJSYXRlaW9cIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGVjdWNvZXMgPSByZWFkZXJbXCJFeGVjdWNvZXNcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXQgPSByZWFkZXJbXCJDYXRcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXIgPSByZWFkZXJbXCJDYXJcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYnJhQXVkaW92aXN1YWwgPSByZWFkZXJbXCJPYnJhQXVkaW92aXN1YWxcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXBpdHVsbyA9IHJlYWRlcltcIkNhcGl0dWxvXCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSXNyYyA9IHJlYWRlcltcIklzcmNcIl0uVG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaWdsYVNvY2llZGFkZSA9IHJlYWRlcltcIlNpZ2xhU29jaWVkYWRlXCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzQW5vID0gcmVhZGVyW1wiTWVzQW5vXCJdLlRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0dWxhcmlkYWRlRWNhZCA9IHJlYWRlcltcIlRpdHVsYXJpZGFkZUVjYWRcIl0uVG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGRldGFsaGU7IC8vIFJldG9ybmEgdW0gaXRlbSBwb3IgdmV6IGNvbmZvcm1lIG8gc3RyZWFtIGRlIGRhZG9zXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJjb25uZWN0aW9uIiwgIm1ldGhvZCI6ICJFeGVjdXRlUmVhZGVyQXN5bmMifSwgeyJ0eXBlIjogInJlYWRlciIsICJtZXRob2QiOiAiUmVhZEFzeW5jIn1dfSwgIkF0dWFsaXphckRhZG9zQ29tcGV0ZW5jaWFBc3luYyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIEF0dWFsaXphckRhZG9zQ29tcGV0ZW5jaWFBc3luYygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVzaW5nICh2YXIgY29ubmVjdGlvbiA9IEdldENvbm5lY3Rpb24oKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBAXCJVUERBVEUgW2Rib10uW0RJU1RfQ09NUEVURU5DSUFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRVQgW2luZF9wcm9jZXNzYWRvXSA9ICdTJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV0hFUkUgY29kX3J1YnJpY2EgPSAzOTkxIEFORCBkYXRfcmVwYXNzZSA9ICcyMDIyLTA1LTI1J1wiO1xuICAgICAgICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uRXhlY3V0ZUFzeW5jKHF1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogImNvbm5lY3Rpb24iLCAibWV0aG9kIjogIkV4ZWN1dGVBc3luYyJ9XX0sICJBdHVhbGl6YXJEYWRvc0Rpc3RyaWJ1aWNhb0FzeW5jIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgQXR1YWxpemFyRGFkb3NEaXN0cmlidWljYW9Bc3luYygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVzaW5nICh2YXIgY29ubmVjdGlvbiA9IEdldENvbm5lY3Rpb24oKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlTdW1WYWxvclRpdHVsYXJEaXN0cmlidWljYW8gPSBAXCJTRUxFQ1QgU1VNKHZscl90aXR1bGFyKSBhcyBzdW1WYWxvclRpdHVsYXJEaXN0cmlidWljYW8gRlJPTSBESVNUX1RJVFVMQVJcIjtcbiAgICAgICAgICAgICAgICB2YXIgc3VtVmFsb3JUaXR1bGFyRGlzdHJpYnVpY2FvID0gYXdhaXQgY29ubmVjdGlvbi5RdWVyeVNpbmdsZUFzeW5jPGxvbmc+KHF1ZXJ5U3VtVmFsb3JUaXR1bGFyRGlzdHJpYnVpY2FvKTtcblxuICAgICAgICAgICAgICAgIHZhciBxdWVyeVN1bVZhbG9yVGl0dWxhclJldGlkbyA9IEBcIlNFTEVDVCBTVU0odmxyX3RpdHVsYXIpIGFzIHN1bVZhbG9yVGl0dWxhclJldGlkbyBGUk9NIERJU1RfUkVUSURPXCI7XG4gICAgICAgICAgICAgICAgdmFyIHN1bVZhbG9yVGl0dWxhclJldGlkbyA9IGF3YWl0IGNvbm5lY3Rpb24uUXVlcnlTaW5nbGVBc3luYzxsb25nPihxdWVyeVN1bVZhbG9yVGl0dWxhclJldGlkbyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlTdW1WYWxvckFzc29jaWFjYW9EaXN0cmlidWljYW8gPSBAXCJTRUxFQ1QgU1VNKHZscl9hc3NvY2lhY2FvKSBhcyBzdW1WYWxvckFzc29jaWFjYW9EaXN0cmlidWljYW8gRlJPTSBESVNUX0FTU09DSUFDQU9cIjtcbiAgICAgICAgICAgICAgICB2YXIgc3VtVmFsb3JBc3NvY2lhY2FvRGlzdHJpYnVpY2FvID0gYXdhaXQgY29ubmVjdGlvbi5RdWVyeVNpbmdsZUFzeW5jPGxvbmc+KHF1ZXJ5U3VtVmFsb3JBc3NvY2lhY2FvRGlzdHJpYnVpY2FvKTtcblxuICAgICAgICAgICAgICAgIHZhciBxdWVyeVN1bVZhbG9yU29jaWVkYWRlUmV0aWRvID0gQFwiU0VMRUNUIFNVTSh2bHJfc29jaWVkYWRlKSBhcyBzdW1WYWxvclNvY2llZGFkZVJldGlkbyBGUk9NIERJU1RfUkVUSURPXCI7XG4gICAgICAgICAgICAgICAgdmFyIHN1bVZhbG9yU29jaWVkYWRlUmV0aWRvID0gYXdhaXQgY29ubmVjdGlvbi5RdWVyeVNpbmdsZUFzeW5jPGxvbmc+KHF1ZXJ5U3VtVmFsb3JTb2NpZWRhZGVSZXRpZG8pO1xuXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5QXR1YWxpemFyRGlzdHJpYnVpY2FvID0gQFwiREVDTEFSRSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFZhbG9yQXV0b3JhbCBERUNJTUFMKDE4LCA5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFZhbG9yQ29uZXhhIERFQ0lNQUwoMTgsIDkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAVmFsb3JBc3NvY2lhY2FvIERFQ0lNQUwoMTgsIDkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAU29tYVRpdHVsYXJBdXRvcmFsIERFQ0lNQUwoMTgsIDkpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFNvbWFUaXR1bGFyQ29uZXhhIERFQ0lNQUwoMTgsIDkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAU29tYVRpdHVsYXJBdXRvcmFsUmV0aWRvIERFQ0lNQUwoMTgsIDkpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFNvbWFUaXR1bGFyQ29uZXhhUmV0aWRvIERFQ0lNQUwoMTgsIDkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAU29tYUFzc29jaWFjYW8gREVDSU1BTCgxOCwgOSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBTb21hQXNzb2NpYWNhb1JldGlkbyBERUNJTUFMKDE4LCA5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQERpZmVyZW5jYUF1dG9yYWwgREVDSU1BTCgxOCwgOSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBEaWZlcmVuY2FDb25leGEgREVDSU1BTCgxOCwgOSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBEaWZlcmVuY2FBc3NvY2lhY2FvIERFQ0lNQUwoMTgsIDkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAVmFsb3JBdXRvcmFsID0gVmxyVmVyYmFBdXRvcmFsLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFZhbG9yQ29uZXhhID0gVmxyVmVyYmFDb25leGEsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAVmFsb3JBc3NvY2lhY2FvID0gVmxyVmVyYmFTb2NpZXRhcmlhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVldfQ09NUEVURU5DSUE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tLS0tLS0tLS0gU09NQSBUSVRVTEFSIEFVVE9SQUwgLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFNvbWFUaXR1bGFyQXV0b3JhbCA9IElTTlVMTChTVU0odmxyX3RpdHVsYXIpLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZST00gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERJU1RfVElUVUxBUiBEVEFcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSk9JTiBESVNUX0NPTlNPTElEQUNBT19EVEwgRFRMQSBPTiBEVEEuY29kX2NvbnNvbGlkZGlzdHJpYmR0bCA9IERUTEEuY29kX2NvbnNvbGlkZGlzdHJpYmR0bCBBTkQgRFRMQS50aXBfcGFydGVyZXByZXNlbnRhZGEgPSAnQUEnXG4gICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLS0tLS0tLS0tIFNPTUEgVElUVUxBUiBDT05FWEEgLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFNvbWFUaXR1bGFyQ29uZXhhID0gSVNOVUxMKFNVTSh2bHJfdGl0dWxhciksIDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRElTVF9USVRVTEFSIERUQ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKT0lOIERJU1RfQ09OU09MSURBQ0FPX0RUTCBEVExDIE9OIERUQy5jb2RfY29uc29saWRkaXN0cmliZHRsID0gRFRMQy5jb2RfY29uc29saWRkaXN0cmliZHRsIEFORCBEVExDLnRpcF9wYXJ0ZXJlcHJlc2VudGFkYSA9ICdDQydcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLS0tLS0tLS0tIFNPTUEgUkVUSURPIEFVVE9SQUwgLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFNvbWFUaXR1bGFyQXV0b3JhbFJldGlkbyA9IElTTlVMTChTVU0odmxyX3RpdHVsYXIpLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFNvbWFBc3NvY2lhY2FvUmV0aWRvID0gSVNOVUxMKFNVTSh2bHJfc29jaWVkYWRlKSwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUk9NIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBESVNUX1JFVElETyBEUkFcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSk9JTiBESVNUX0NPTlNPTElEQUNBT19EVEwgRFRMUkEgT04gRFJBLmNvZF9jb25zb2xpZGRpc3RyaWJkdGwgPSBEVExSQS5jb2RfY29uc29saWRkaXN0cmliZHRsIEFORCBEVExSQS50aXBfcGFydGVyZXByZXNlbnRhZGEgPSAnQUEnXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tLS0tLS0tLS0gU09NQSBSRVRJRE8gQ09ORVhBIC0tLS0tLS0tLS1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VMRUNUIFxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBTb21hVGl0dWxhckNvbmV4YVJldGlkbyA9IElTTlVMTChTVU0odmxyX3RpdHVsYXIpLCAwKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUk9NIFxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERJU1RfUkVUSURPIERSQ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKT0lOIERJU1RfQ09OU09MSURBQ0FPX0RUTCBEVExSQyBPTiBEUkMuY29kX2NvbnNvbGlkZGlzdHJpYmR0bCA9IERUTFJDLmNvZF9jb25zb2xpZGRpc3RyaWJkdGwgQU5EIERUTFJDLnRpcF9wYXJ0ZXJlcHJlc2VudGFkYSA9ICdDQydcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0tLS0tLS0tLSBTT01BIEFTU09DSUFDQU8gUkVUSURPIC0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBTb21hQXNzb2NpYWNhb1JldGlkbyA9IElTTlVMTChTVU0odmxyX3NvY2llZGFkZSksIDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRElTVF9SRVRJRE87XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tLS0tLS0tLS0gU09NQSBBU1NPQ0lBQ0FPIC0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1Rcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBTb21hQXNzb2NpYWNhbyA9IElTTlVMTChTVU0odmxyX2Fzc29jaWFjYW8pLDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlJPTVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRElTVF9BU1NPQ0lBQ0FPXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tLS0tLS0tLS0gQ0FMQ1VMQVIgRElGRVJFTkNBIC0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRVQgQERpZmVyZW5jYUF1dG9yYWwgPSBAVmFsb3JBdXRvcmFsIC0gKEBTb21hVGl0dWxhckF1dG9yYWwgKyBAU29tYVRpdHVsYXJBdXRvcmFsUmV0aWRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRVQgQERpZmVyZW5jYUNvbmV4YSA9IEBWYWxvckNvbmV4YSAtIChAU29tYVRpdHVsYXJDb25leGEgKyBAU29tYVRpdHVsYXJDb25leGFSZXRpZG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFVCBARGlmZXJlbmNhQXNzb2NpYWNhbyA9IEBWYWxvckFzc29jaWFjYW8gLSAoQFNvbWFBc3NvY2lhY2FvICsgQFNvbWFBc3NvY2lhY2FvUmV0aWRvKTtcblx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVVBEQVRFIFtkYm9dLltESVNUUklCVUlDQU9dXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFVCBbdmxyX2RpZmVyZW5jYXZlcmJhYXV0b3JhbF0gPSBARGlmZXJlbmNhQXV0b3JhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2bHJfZGlmZXJlbmNhdmVyYmFjb25leGFdID0gQERpZmVyZW5jYUNvbmV4YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2bHJfZGlmZXJlbmNhdmVyYmFzb2NpZXRhcmlvXSA9IEBEaWZlcmVuY2FBc3NvY2lhY2FvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2luZF9wcm9jZXNzYWRvXSA9ICdTJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdIRVJFIGNvZF9kaXN0cmlidWljYW8gPSAoU0VMRUNUIFRPUCAxIGNvZF9kaXN0cmlidWljYW8gRlJPTSBbZGJvXS5bRElTVFJJQlVJQ0FPXSBPUkRFUiBCWSBjb2RfZGlzdHJpYnVpY2FvIERFU0MpXCI7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uLkV4ZWN1dGVBc3luYyhxdWVyeUF0dWFsaXphckRpc3RyaWJ1aWNhbywgbmV3XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdW1WYWxvclRpdHVsYXJEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgIHN1bVZhbG9yVGl0dWxhclJldGlkbyxcbiAgICAgICAgICAgICAgICAgICAgc3VtVmFsb3JBc3NvY2lhY2FvRGlzdHJpYnVpY2FvLFxuICAgICAgICAgICAgICAgICAgICBzdW1WYWxvclNvY2llZGFkZVJldGlkb1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiY29ubmVjdGlvbiIsICJtZXRob2QiOiAiRXhlY3V0ZUFzeW5jIn1dfX19fSwgIlJlYWRNb2RlbHMiOiB7IkF1ZGlvVmlzdWFsIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZE9icmFBdWRpb0VjYWQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk5yb0ZhdG9yRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJWbHJGYXRvckRpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiU29tYUZhdG9yRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJWbHJQb250byI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tVGl0dWxvT3JpZyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tVGl0dWxvVHJhZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kU2l0dWFjYW9BdWRpb3Zpc3VhbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tQ2FwRXBpc29kaW9PcmlnIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21DYXBFcGlzb2Rpb1RyYWR1emlkbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29tcGV0ZW5jaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkZvbm9ncmFtYXMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk9icmFzTXVzaWNhaXMiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpdHVsYXJlc0Zvbm9ncmFtYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGl0dWxhcmVzT2JyYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kRGlzdHJpYnVpY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2REaXN0Um9sIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RSb2xNdXNpY2FsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXRFeGliaWNhb0F1ZGlvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RPYnJhRm9ub0F1ZGlvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXRJbmljaW9Sb2wiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRhdEZpbVJvbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kRm9udGVSb2wiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFRpcFJvbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kT3JpZ2VtUm9sIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RVc3VhcmlvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJUaXBDYXJhY3RlcmlzdGljYWRpc3QiOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiQ29tcGV0ZW5jaWEiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29kQ29tcGV0ZW5jaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclZlcmJhQXV0b3JhbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVmxyVmVyYmFDb25leGEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclZlcmJhU29jaWV0YXJpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9fX0sICJEYWRvc0Rpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2REaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENvbXBldGVuY2lhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEYXREaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclZlcmJhQXV0b3JhbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVmxyVmVyYmFDb25leGEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlZsclZlcmJhU29jaWV0YXJpbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9fX0sICJEZXRhbGhlc0RlbW9uc3RyYXRpdm9UaXR1bGFyIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX0sICJIZWFkZXJEZW1vbnN0cmF0aXZvVGl0dWxhciI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjoge319LCAiTXVzaWNhQXVkaW8iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNhcmFjdGVyaXN0aWNhUmVnaXN0cm8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlBhcnRlUmVwcmVzZW50YWRhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJRdGREdXJhY2FvTXVzaWNhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RPYnJhQXVkaW9FY2FkIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDb2xldGl2byI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiVGlwU2l0dWFjYW9Gb25vIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RJc3JjIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RHcmEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcFNpdHVhY2FvQ2FkYXN0cmFsIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bG8iOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiU29jaWVkYWRlUmVwcmVzZW50YWNhbyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2RTb2NpZWRhZGUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFRpdHVsYXJFY2FkIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJJbmROYWNpb25hbENvbCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiU2dsU29jaWVkYWRlIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifX19LCAiU29jaWVkYWRlVGl0dWxhciI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb2RTb2NpZWRhZGUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZE5hY2lvbmFsQ29sIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJTZ2xTb2NpZWRhZGUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiU2dsU29jaWVkYWRlUmVwcmVzZW50YSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kVGl0dWxhckVjYWQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRhdFJlc3NvYyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kVGl0dWxhcklkZW50aWZpY2FkbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiSW5kU2l0dWFjYW9Tb2NpZWRhZGUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFNpdHVhY2FvU29jaWVkYWRlUmVwcmVzZW50YSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9fX0sICJUaXR1bGFyRm9ub2dyYW1hIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZFRpdHVsYXJFY2FkIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFN1YkNhdGVnb3JpYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUGN0UGFydGljaXBhY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RGb25vZ3JhbWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFNpdFRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENvbGV0aXZvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RUaXR1bGFySWRlbnRpZmljYWRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21OYW1lVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tQnVzY2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcG9QZXNzb2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENhZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ2djIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDcGYiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFNvY2llZGFkZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUHNldWRvTm9tZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGVzY3JpY2FvQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEZXNjcmljYW9TdWJDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZEZvbm9ncmFtYVRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkFzc29jaWFjb2VzIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJSZXByZXNlbnRhY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In19fSwgIlRpdHVsYXJPYnJhIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvZFRpdHVsYXJFY2FkIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RPYnJhTXVzRWNhZCI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RTdWJDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlBjdFBhcnRpY2lwYWNhbyI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kT2JyYVRpdHVsYXIiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkluZFNpdHVhY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RUaXR1bGFySWRlbnRpZmljYWRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21UaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJOb21OYW1lVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiTm9tQnVzY2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlRpcG9QZXNzb2EiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZENhZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiQ29kQ2djIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJDb2RDcGYiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkNvZFNvY2llZGFkZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGVzY3JpY2FvQ2F0ZWdvcmlhIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEZXNjcmljYW9TdWJDYXRlZ29yaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlBzZXVkb05vbWUiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIlJlcHJlc2VudGFjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkFzc29jaWFjb2VzIjogeyJ0eXBlIjogInByb3BlcnR5In19fX0sICJzZXJ2aWNlcyI6IHsiQXR1YWxpemFyQ29tcGV0ZW5jaWFEaXN0cmlidWljYW9TZXJ2aWNlIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX0sICJPYnRlckRhZG9zRGVtb25zdHJhdGl2b1RpdHVsYXJTZXJ2aWNlIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkRvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgRG8oKVxuICAgIHtcbiAgICAgICAgdmFyIHN0b3BXYXRjaCA9IFN0b3B3YXRjaC5TdGFydE5ldygpO1xuXG4gICAgICAgIHRyeVxuICAgICAgICB7XG4gICAgICAgICAgICBfbG9nZ2VyLkxvZ0luZm9ybWF0aW9uKFwiSW5cdTAwZWRjaW9cIik7XG5cbiAgICAgICAgICAgIHZhciBkZW1vbnN0cmF0aXZvcyA9IGF3YWl0IF9kYXBwZXJEQU8uR2V0QWxsRGV0YWxoZXNSZWxhdGFvcmlvRGVtb25zdHJhdGl2b1RpdHVsYXIoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gYXdhaXQgX2RhcHBlckRBTy5HZXRIZWFkZXJSZWxhdGFvcmlvRGVtb25zdHJhdGl2b1RpdHVsYXIoKTtcblxuICAgICAgICAgICAgdmFyIHRvdGFsSGVhZGVycyA9IGhlYWRlcnMuQ291bnQoKTtcblxuICAgICAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbigkXCJ7dG90YWxIZWFkZXJzfSBoZWFkZXJzIHRvIHByb2Nlc3NcIik7XG5cbiAgICAgICAgICAgIHZhciBoZWFkZXJzV2l0aERldGFpbHMgPSBoZWFkZXJzLlNlbGVjdChoZWFkZXIgPT4gU3lzdGVtLlRleHQuSnNvbi5Kc29uU2VyaWFsaXplci5TZXJpYWxpemUobmV3IEhlYWRlckRlbW9uc3RyYXRpdm9UaXR1bGFyXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgTWVzQW5vID0gaGVhZGVyLk1lc0FubyxcbiAgICAgICAgICAgICAgICBDb2RpZ28gPSBoZWFkZXIuQ29kaWdvLFxuICAgICAgICAgICAgICAgIEFzc29jaWFjYW8gPSBoZWFkZXIuQXNzb2NpYWNhbyxcbiAgICAgICAgICAgICAgICBUb3RhbCA9IGhlYWRlci5Ub3RhbCxcbiAgICAgICAgICAgICAgICBOb21lID0gaGVhZGVyLk5vbWUsXG4gICAgICAgICAgICAgICAgUHNldWRvbmltbyA9IGhlYWRlci5Qc2V1ZG9uaW1vLFxuICAgICAgICAgICAgICAgIERldGFsaGVzRGVtb25zdHJhdGl2b1RpdHVsYXJlcyA9IGRlbW9uc3RyYXRpdm9zXG4gICAgICAgICAgICAgICAgICAgIC5XaGVyZShkID0+IGQuTWVzQW5vID09IGhlYWRlci5NZXNBbm8gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5UaXR1bGFyaWRhZGVFY2FkID09IGhlYWRlci5Db2RpZ28gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5TaWdsYVNvY2llZGFkZSA9PSBoZWFkZXIuQXNzb2NpYWNhbylcbiAgICAgICAgICAgIH0pKTtcblxuXG4gICAgICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gbmV3IExpc3Q8VGFzaz4oKTtcbiAgICAgICAgICAgIHZhciBzZW1hcGhvcmUgPSBuZXcgU2VtYXBob3JlU2xpbSg1MCk7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAxO1xuXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaGVhZGVyIGluIGhlYWRlcnNXaXRoRGV0YWlscylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZW1hcGhvcmUuV2FpdEFzeW5jKCk7IC8vIEFndWFyZGEgYSBsaWJlcmFcdTAwZTdcdTAwZTNvIGRlIHVtIHNsb3Qgbm8gc2VtXHUwMGUxZm9yb1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q291bnQgPSBjb3VudDsgLy8gQ2FwdHVyYSBvIHZhbG9yIGF0dWFsIGRlICdjb3VudCcgcGFyYSBleGliaVx1MDBlN1x1MDBlM28gbm8gbG9nXG5cbiAgICAgICAgICAgICAgICB0YXNrcy5BZGQoVGFzay5SdW4oYXN5bmMgKCkgPT5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTYWx2YSBvIEpTT04gZW0gdW0gQmxvYiBubyBBenVyZSBTdG9yYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvYlVybCA9IGF3YWl0IFNhdmVUb0Jsb2JBc3luYyhoZWFkZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0luZm9ybWF0aW9uKCRcIlNlbnQgbWVzc2FnZSB3aXRoIEJsb2IgVVJMIGZvciBiYXRjaCB7Y3VycmVudENvdW50fS5cIik7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbWFwaG9yZS5SZWxlYXNlKCk7IC8vIExpYmVyYSBvIHNlbVx1MDBlMWZvcm8gYXBcdTAwZjNzIGEgZXhlY3VcdTAwZTdcdTAwZTNvXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBUYXNrLldoZW5BbGwodGFza3MpO1xuXG4gICAgICAgICAgICBfbG9nZ2VyLkxvZ0luZm9ybWF0aW9uKCRcIlRlbXBvIGF0XHUwMGU5IGFnb3JhOiB7c3RvcFdhdGNoLkVsYXBzZWQuVG90YWxNaW51dGVzfVwiKTtcbiAgICAgICAgICAgIF9sb2dnZXIuTG9nSW5mb3JtYXRpb24oJFwie3N0b3BXYXRjaC5FbGFwc2VkLlRvdGFsTWludXRlc30gbWludXRlcyAtIFByb2Nlc3NlZCBhbGwgaGVhZGVycy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleClcbiAgICAgICAge1xuICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcigkXCJ7c3RvcFdhdGNoLkVsYXBzZWQuVG90YWxNaW51dGVzfSBtaW51dGVzIC0gRXJyb3I6IHtleH1cIik7XG4gICAgICAgIH1cbiAgICAgICAgc3RvcFdhdGNoLlN0b3AoKTtcbiAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogIklEYXBwZXJEQU8iLCAibWV0aG9kIjogIkdldEFsbERldGFsaGVzUmVsYXRhb3Jpb0RlbW9uc3RyYXRpdm9UaXR1bGFyIn0sIHsidHlwZSI6ICJJRGFwcGVyREFPIiwgIm1ldGhvZCI6ICJHZXRIZWFkZXJSZWxhdGFvcmlvRGVtb25zdHJhdGl2b1RpdHVsYXIifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dJbmZvcm1hdGlvbiJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiU3RvcHdhdGNoIiwgIm1ldGhvZCI6ICJTdGFydE5ldyJ9LCB7InR5cGUiOiAiaGVhZGVycyIsICJtZXRob2QiOiAiQ291bnQifSwgeyJ0eXBlIjogImhlYWRlcnMiLCAibWV0aG9kIjogIlNlbGVjdCJ9LCB7InR5cGUiOiAiSnNvblNlcmlhbGl6ZXIiLCAibWV0aG9kIjogIlNlcmlhbGl6ZSJ9LCB7InR5cGUiOiAic2VtYXBob3JlIiwgIm1ldGhvZCI6ICJXYWl0QXN5bmMifSwgeyJ0eXBlIjogInRhc2tzIiwgIm1ldGhvZCI6ICJBZGQifSwgeyJ0eXBlIjogIlRhc2siLCAibWV0aG9kIjogIlJ1biJ9LCB7InR5cGUiOiAic2VtYXBob3JlIiwgIm1ldGhvZCI6ICJSZWxlYXNlIn0sIHsidHlwZSI6ICJUYXNrIiwgIm1ldGhvZCI6ICJXaGVuQWxsIn0sIHsidHlwZSI6ICJzdG9wV2F0Y2giLCAibWV0aG9kIjogIlN0b3AifV19LCAiU2F2ZVRvQmxvYkFzeW5jIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSBhc3luYyBUYXNrPHN0cmluZz4gU2F2ZVRvQmxvYkFzeW5jKHN0cmluZyBqc29uUGF5bG9hZClcbiAgICB7XG4gICAgICAgIC8vIE5vbWUgZG8gY29udGFpbmVyXG4gICAgICAgIHZhciBjb250YWluZXJOYW1lID0gXCJwYXlsb2Fkc1wiO1xuXG4gICAgICAgIC8vIE5vbWUgZG8gYXJxdWl2byAodm9jXHUwMGVhIHBvZGUgYWx0ZXJhciBjb25mb3JtZSBzdWEgbFx1MDBmM2dpY2EpXG4gICAgICAgIHZhciBibG9iTmFtZSA9ICRcIntHdWlkLk5ld0d1aWQoKX0uanNvblwiO1xuXG4gICAgICAgIC8vIEFjZXNzYSBvIGNvbnRhaW5lciAoY3JpYSBvIGNvbnRhaW5lciBzZSBuXHUwMGUzbyBleGlzdGlyKVxuICAgICAgICB2YXIgY29udGFpbmVyQ2xpZW50ID0gX2Jsb2JTZXJ2aWNlQ2xpZW50LkdldEJsb2JDb250YWluZXJDbGllbnQoY29udGFpbmVyTmFtZSk7XG5cbiAgICAgICAgLy8gQWNlc3NhIG8gYmxvYiAoYXJxdWl2byBKU09OKVxuICAgICAgICB2YXIgYmxvYkNsaWVudCA9IGNvbnRhaW5lckNsaWVudC5HZXRCbG9iQ2xpZW50KGJsb2JOYW1lKTtcblxuICAgICAgICAvLyBDYXJyZWdhIG8gcGF5bG9hZCBjb21vIHN0cmVhbSBwYXJhIG8gYmxvYlxuICAgICAgICB1c2luZyB2YXIgbWVtb3J5U3RyZWFtID0gbmV3IE1lbW9yeVN0cmVhbShTeXN0ZW0uVGV4dC5FbmNvZGluZy5VVEY4LkdldEJ5dGVzKGpzb25QYXlsb2FkKSk7XG4gICAgICAgIGF3YWl0IGJsb2JDbGllbnQuVXBsb2FkQXN5bmMobWVtb3J5U3RyZWFtLCB0cnVlKTtcblxuICAgICAgICAvLyBSZXRvcm5hIG8gbGluayBwYXJhIG8gYmxvYiAodm9jXHUwMGVhIHBvZGUgYWp1c3RhciBvIGZvcm1hdG8gZG8gVVJMIHNlIHByZWNpc2FyIGRlIHVtIFNBUyBUb2tlbilcbiAgICAgICAgcmV0dXJuIGJsb2JDbGllbnQuVXJpLlRvU3RyaW5nKCk7XG4gICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklCbG9iU2VydmljZUNsaWVudCIsICJtZXRob2QiOiAiR2V0QmxvYkNvbnRhaW5lckNsaWVudCJ9LCB7InR5cGUiOiAiR3VpZCIsICJtZXRob2QiOiAiTmV3R3VpZCJ9LCB7InR5cGUiOiAiY29udGFpbmVyQ2xpZW50IiwgIm1ldGhvZCI6ICJHZXRCbG9iQ2xpZW50In0sIHsidHlwZSI6ICJVVEY4IiwgIm1ldGhvZCI6ICJHZXRCeXRlcyJ9LCB7InR5cGUiOiAiYmxvYkNsaWVudCIsICJtZXRob2QiOiAiVXBsb2FkQXN5bmMifSwgeyJ0eXBlIjogIlVyaSIsICJtZXRob2QiOiAiVG9TdHJpbmcifV19fX0sICJPYnRlckRhZG9zU2VydmljZSI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJEbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIERvKClcbiAgICAgICAge1xuICAgICAgICAgICAgQ29tcGV0ZW5jaWEgY29tcGV0ZW5jaWE7XG4gICAgICAgICAgICBjb21wZXRlbmNpYSA9IGF3YWl0IF9kYXBwZXJEQU8uR2V0Q29tcGV0ZW5jaWFHbG9ib3BsYXkoKTtcblxuICAgICAgICAgICAgSUVudW1lcmFibGU8QXVkaW9WaXN1YWw+IGF1ZGlvVmlzdWFpcztcbiAgICAgICAgICAgIGF1ZGlvVmlzdWFpcyA9IGF3YWl0IF9kYXBwZXJEQU8uR2V0QXVkaW9WaXN1YWxHbG9ib3BsYXkoKTtcblxuICAgICAgICAgICAgLy92YXIgYXVkaW9WaXN1YWlzUGFyYVJldGVuY2FvID0gbmV3IExpc3Q8QXVkaW9WaXN1YWw+KCk7XG4gICAgICAgICAgICAvL3ZhciBzb2NpZWRhZGVSZXByZXNlbnRhY2FvID0gX2RhcHBlckRBTy5HZXRTb2NpZWRhZGVSZXByZXNlbnRhY2FvKCkuUmVzdWx0O1xuICAgICAgICAgICAgLy9hdWRpb1Zpc3VhaXMgPSBDYWxjdWxhckZhdG9yRGlzdHJpYnVpY2FvKGNvbXBldGVuY2lhLCBhdWRpb1Zpc3VhaXMpO1xuICAgICAgICAgICAgLy92YXIgdGFza3MgPSBuZXcgTGlzdDxUYXNrPigpO1xuICAgICAgICAgICAgLy9pbnQgc2tpcCA9IDA7XG4gICAgICAgICAgICAvL2ludCB0YWtlID0gMTAwMDtcblxuXG4gICAgICAgICAgICB2YXIgZGFkb3NEaXN0cmlidWljYW8gPSBuZXcgRGFkb3NEaXN0cmlidWljYW9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBDb2RDb21wZXRlbmNpYSA9IGNvbXBldGVuY2lhLkNvZENvbXBldGVuY2lhLFxuICAgICAgICAgICAgICAgIERhdERpc3RyaWJ1aWNhbyA9IERhdGVUaW1lLlV0Y05vdyxcbiAgICAgICAgICAgICAgICBWbHJWZXJiYUF1dG9yYWwgPSBjb21wZXRlbmNpYS5WbHJWZXJiYUF1dG9yYWwsXG4gICAgICAgICAgICAgICAgVmxyVmVyYmFDb25leGEgPSBjb21wZXRlbmNpYS5WbHJWZXJiYUNvbmV4YSxcbiAgICAgICAgICAgICAgICBWbHJWZXJiYVNvY2lldGFyaW8gPSBjb21wZXRlbmNpYS5WbHJWZXJiYVNvY2lldGFyaWEsXG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgY29kRGlzdHJpYnVpY2FvID0gYXdhaXQgX2RhcHBlckRBTy5JbnNlcnREaXN0cmlidWljYW8oZGFkb3NEaXN0cmlidWljYW8pO1xuICAgICAgICAgICAgdmFyIGNvZERpc3RSb2wgPSBhd2FpdCBfZGFwcGVyREFPLkluc2VydERpc3RyaWJ1aWNhb1JPTChjb2REaXN0cmlidWljYW8sIGF1ZGlvVmlzdWFpcy5GaXJzdCgpLkNvZFJvbE11c2ljYWwpO1xuXG4gICAgICAgICAgICB1c2luZyAoX3RlbGVtZXRyeUNsaWVudC5TdGFydE9wZXJhdGlvbjxSZXF1ZXN0VGVsZW1ldHJ5PihcIlNlcnZpY2VidXNDbGllbnRcIikpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX3RlbGVtZXRyeUNsaWVudC5UcmFja0V2ZW50KFwiU2VydmljZWJ1c0NsaWVudFwiKTtcbiAgICAgICAgICAgICAgICBTZXJ2aWNlYnVzQ2xpZW50IHNlbmRlciA9IG5ldyBTZXJ2aWNlYnVzQ2xpZW50KF9zZXJ2aWNlQnVzQ29ubmVjdGlvbi5Db25uZWN0aW9uU3RyaW5nLCBfc2VydmljZUJ1c0Nvbm5lY3Rpb24uUXVldWUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRlci5TZW5kTWVzc2FnZXNBc3luYyhDYWxjdWxhckZhdG9yRGlzdHJpYnVpY2FvKGNvbXBldGVuY2lhLCBhdWRpb1Zpc3VhaXMpLCBjb21wZXRlbmNpYSwgY29kRGlzdHJpYnVpY2FvLCBjb2REaXN0Um9sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklEYXBwZXJEQU8iLCAibWV0aG9kIjogIkdldENvbXBldGVuY2lhR2xvYm9wbGF5In0sIHsidHlwZSI6ICJJRGFwcGVyREFPIiwgIm1ldGhvZCI6ICJHZXRBdWRpb1Zpc3VhbEdsb2JvcGxheSJ9LCB7InR5cGUiOiAiSURhcHBlckRBTyIsICJtZXRob2QiOiAiR2V0U29jaWVkYWRlUmVwcmVzZW50YWNhbyJ9LCB7InR5cGUiOiAiSURhcHBlckRBTyIsICJtZXRob2QiOiAiSW5zZXJ0RGlzdHJpYnVpY2FvIn0sIHsidHlwZSI6ICJJRGFwcGVyREFPIiwgIm1ldGhvZCI6ICJJbnNlcnREaXN0cmlidWljYW9ST0wifSwgeyJ0eXBlIjogIklUZWxlbWV0cnlDbGllbnQiLCAibWV0aG9kIjogIlRyYWNrRXZlbnQifSwgeyJ0eXBlIjogImF1ZGlvVmlzdWFpcyIsICJtZXRob2QiOiAiRmlyc3QifSwgeyJ0eXBlIjogInNlbmRlciIsICJtZXRob2QiOiAiU2VuZE1lc3NhZ2VzQXN5bmMifV19LCAiQ29sZXRhckVFbnZpYXJEYWRvcyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzazxib29sPiBDb2xldGFyRUVudmlhckRhZG9zKElFbnVtZXJhYmxlPEF1ZGlvVmlzdWFsPiBhdWRpb1Zpc3VhaXMsIHN0cmluZyB0YXNrTnVtYmVyLCBDb21wZXRlbmNpYSBjb21wZXRlbmNpYSwgSUVudW1lcmFibGU8RWNhZEdsb2JvcGxheS5Eb21haW5SZWFkLm1vZGVscy5Tb2NpZWRhZGVSZXByZXNlbnRhY2FvPiBzb2NpZWRhZGVSZXByZXNlbnRhY2FvKVxuICAgICAgICB7ICAgICAgICAgICBcbiAgICAgICAgICAgIC8vU3RvcHdhdGNoIHN3ID0gU3RvcHdhdGNoLlN0YXJ0TmV3KCk7XG4gICAgICAgICAgICAvL3ZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKCRcInt0YXNrTnVtYmVyfSAtIEluaWNpb1wiKTtcblxuICAgICAgICAgICAgLy90cnlcbiAgICAgICAgICAgIC8ve1xuICAgICAgICAgICAgLy8gICAgLy9mb3JlYWNoICh2YXIgYXVkaW9WaXN1YWwgaW4gYXVkaW9WaXN1YWlzKVxuICAgICAgICAgICAgLy8gICAgLy97XG4gICAgICAgICAgICAvLyAgICAvLyAgICBjb3VudCsrO1xuICAgICAgICAgICAgLy8gICAgLy8gICAgYXVkaW9WaXN1YWwuQ29tcGV0ZW5jaWEgPSBjb21wZXRlbmNpYTtcbiAgICAgICAgICAgIC8vICAgIC8vICAgIGF1ZGlvVmlzdWFsLk9icmFzTXVzaWNhaXMgPSBhd2FpdCBfZGFwcGVyREFPLkdldE9icmFzTXVzaWNhaXMoYXVkaW9WaXN1YWwuQ29kT2JyYUF1ZGlvRWNhZCwgYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvKTtcbiAgICAgICAgICAgIC8vICAgIC8vICAgIGF1ZGlvVmlzdWFsLkZvbm9ncmFtYXMgPSBhd2FpdCBfZGFwcGVyREFPLkdldEZvbm9ncmFtYXMoYXVkaW9WaXN1YWwuQ29kT2JyYUF1ZGlvRWNhZCwgYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvKTtcblxuICAgICAgICAgICAgLy8gICAgLy8gICAgZm9yZWFjaCAodmFyIG9icmEgaW4gYXVkaW9WaXN1YWwuT2JyYXNNdXNpY2FpcylcbiAgICAgICAgICAgIC8vICAgIC8vICAgIHtcbiAgICAgICAgICAgIC8vICAgIC8vICAgICAgICBhdWRpb1Zpc3VhbC5UaXR1bGFyZXNPYnJhID0gYXdhaXQgX2RhcHBlckRBTy5HZXRUaXR1bGFyT2JyYSgobG9uZylvYnJhLkNvZE9icmFNdXNFY2FkKTtcblxuICAgICAgICAgICAgLy8gICAgICAgICAgICBmb3JlYWNoICh2YXIgdGl0dWxhck9icmEgaW4gYXVkaW9WaXN1YWwuVGl0dWxhcmVzT2JyYSlcbiAgICAgICAgICAgIC8vICAgICAgICAgICAge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgdGl0dWxhck9icmEuUmVwcmVzZW50YWNhbyA9IGF3YWl0IF9kYXBwZXJEQU8uR2V0VGl0dWxhclNvY2llZGFkZSh0aXR1bGFyT2JyYS5Db2RUaXR1bGFyRWNhZCwgdGl0dWxhck9icmEuQ29kQ2F0ZWdvcmlhKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgICAgIH1cblxuICAgICAgICAgICAgLy8gICAgLy8gICAgZm9yZWFjaCAodmFyIGZvbm8gaW4gYXVkaW9WaXN1YWwuRm9ub2dyYW1hcylcbiAgICAgICAgICAgIC8vICAgIC8vICAgIHtcbiAgICAgICAgICAgIC8vICAgIC8vICAgICAgICAvL2F1ZGlvVmlzdWFsLlRpdHVsYXJlc0Zvbm9ncmFtYSA9IGF3YWl0IF9kYXBwZXJEQU8uR2V0VGl0dWxhckZvbm9ncmFtYSgobG9uZylmb25vLkZvbm9ncmFtYSk7XG5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgZm9yZWFjaCAodmFyIHRpdHVsYXJGb25vIGluIGF1ZGlvVmlzdWFsLlRpdHVsYXJlc0Zvbm9ncmFtYSlcbiAgICAgICAgICAgIC8vICAgICAgICAgICAge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgdGl0dWxhckZvbm8uUmVwcmVzZW50YWNhbyA9IGF3YWl0IF9kYXBwZXJEQU8uR2V0VGl0dWxhclNvY2llZGFkZSh0aXR1bGFyRm9uby5Db2RUaXR1bGFyRWNhZCwgdGl0dWxhckZvbm8uQ29kQ2F0ZWdvcmlhKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgICAgIH1cblxuICAgICAgICAgICAgLy8gICAgLy8gICAgdmFyIHggPSBNZXNzYWdlQ2xpZW50LnNlbmRlck1lc3NhZ2UoYXVkaW9WaXN1YWwsIF9zZXJ2aWNlQnVzQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAvLyAgICAvLyAgICBDb25zb2xlLldyaXRlTGluZSgkXCIge3Rhc2tOdW1iZXJ9IC0ge2NvdW50fSAgLSB7c3cuRWxhcHNlZC5Ub3RhbE1pbnV0ZXN9XCIpO1xuICAgICAgICAgICAgLy8gICAgLy99XG5cbiAgICAgICAgICAgIC8vICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoJFwie3Rhc2tOdW1iZXJ9IC0gRmltIDoge3N3LlRvU3RyaW5nKCl9XCIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAvL2NhdGNoIChFeGNlcHRpb24gZXgpXG4gICAgICAgICAgICAvL3tcbiAgICAgICAgICAgIC8vICAgIENvbnNvbGUuV3JpdGVMaW5lKHRhc2tOdW1iZXIgKyBcIiAtIFwiICsgZXguTWVzc2FnZSk7XG4gICAgICAgICAgICAvLyAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJRGFwcGVyREFPIiwgIm1ldGhvZCI6ICJHZXRPYnJhc011c2ljYWlzIn0sIHsidHlwZSI6ICJJRGFwcGVyREFPIiwgIm1ldGhvZCI6ICJHZXRGb25vZ3JhbWFzIn0sIHsidHlwZSI6ICJJRGFwcGVyREFPIiwgIm1ldGhvZCI6ICJHZXRUaXR1bGFyT2JyYSJ9LCB7InR5cGUiOiAiSURhcHBlckRBTyIsICJtZXRob2QiOiAiR2V0VGl0dWxhclNvY2llZGFkZSJ9LCB7InR5cGUiOiAiSURhcHBlckRBTyIsICJtZXRob2QiOiAiR2V0VGl0dWxhckZvbm9ncmFtYSJ9LCB7InR5cGUiOiAiSURhcHBlckRBTyIsICJtZXRob2QiOiAiR2V0VGl0dWxhclNvY2llZGFkZSJ9LCB7InR5cGUiOiAiU3RvcHdhdGNoIiwgIm1ldGhvZCI6ICJTdGFydE5ldyJ9LCB7InR5cGUiOiAiQ29uc29sZSIsICJtZXRob2QiOiAiV3JpdGVMaW5lIn0sIHsidHlwZSI6ICJNZXNzYWdlQ2xpZW50IiwgIm1ldGhvZCI6ICJzZW5kZXJNZXNzYWdlIn0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifSwgeyJ0eXBlIjogIkNvbnNvbGUiLCAibWV0aG9kIjogIldyaXRlTGluZSJ9LCB7InR5cGUiOiAic3ciLCAibWV0aG9kIjogIlRvU3RyaW5nIn0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifV19LCAiQ2FsY3VsYXJGYXRvckRpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBJRW51bWVyYWJsZTxBdWRpb1Zpc3VhbD4gQ2FsY3VsYXJGYXRvckRpc3RyaWJ1aWNhbyhDb21wZXRlbmNpYT8gY29tcGV0ZW5jaWEsIElFbnVtZXJhYmxlPEF1ZGlvVmlzdWFsPiBhdWRpb1Zpc3VhaXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBzb21hRmF0b3JEaXN0cmlidWljYW8gPSBhdWRpb1Zpc3VhaXMuU3VtKHggPT4geC5Ocm9GYXRvckRpc3RyaWJ1aWNhbyk7XG4gICAgICAgICAgICB2YXIgdmVyYmFUb3RhbCA9IGNvbXBldGVuY2lhLlZsclZlcmJhQXV0b3JhbCArIGNvbXBldGVuY2lhLlZsclZlcmJhQ29uZXhhO1xuICAgICAgICAgICAgdmFyIHBvbnRvID0gdmVyYmFUb3RhbCAvIHNvbWFGYXRvckRpc3RyaWJ1aWNhbztcblxuICAgICAgICAgICAgcmV0dXJuIGF1ZGlvVmlzdWFpcy5TZWxlY3QoeCA9PlxuICAgICAgICAgICAgICAgIG5ldyBBdWRpb1Zpc3VhbFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgQ29kQ2FwaUVwaXNvZGlvID0geC5Db2RDYXBpRXBpc29kaW8sXG4gICAgICAgICAgICAgICAgICAgIENvZE9icmFBdWRpb0VjYWQgPSB4LkNvZE9icmFBdWRpb0VjYWQsXG4gICAgICAgICAgICAgICAgICAgIE5yb0ZhdG9yRGlzdHJpYnVpY2FvID0geC5Ocm9GYXRvckRpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICAgICAgVmxyRmF0b3JEaXN0cmlidWljYW8gPSBwb250byAqIHguTnJvRmF0b3JEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgIFNvbWFGYXRvckRpc3RyaWJ1aWNhbyA9IHNvbWFGYXRvckRpc3RyaWJ1aWNhbyxcbiAgICAgICAgICAgICAgICAgICAgVmxyUG9udG8gPSBwb250byxcbiAgICAgICAgICAgICAgICAgICAgTm9tVGl0dWxvT3JpZyA9IHguTm9tVGl0dWxvT3JpZyxcbiAgICAgICAgICAgICAgICAgICAgTm9tVGl0dWxvVHJhZCA9IHguTm9tVGl0dWxvVHJhZCxcbiAgICAgICAgICAgICAgICAgICAgSW5kU2l0dWFjYW9BdWRpb3Zpc3VhbCA9IHguSW5kU2l0dWFjYW9BdWRpb3Zpc3VhbCxcbiAgICAgICAgICAgICAgICAgICAgTnJvQ2FwRXBpc29kaW8gPSB4Lk5yb0NhcEVwaXNvZGlvLFxuICAgICAgICAgICAgICAgICAgICBOb21DYXBFcGlzb2Rpb09yaWcgPSB4Lk5vbUNhcEVwaXNvZGlvT3JpZyxcbiAgICAgICAgICAgICAgICAgICAgTm9tQ2FwRXBpc29kaW9UcmFkdXppZG8gPSB4Lk5vbUNhcEVwaXNvZGlvVHJhZHV6aWRvLFxuICAgICAgICAgICAgICAgICAgICBDb2RSb2xNdXNpY2FsID0geC5Db2RSb2xNdXNpY2FsLFxuICAgICAgICAgICAgICAgICAgICBEYXRFeGliaWNhb0F1ZGlvID0geC5EYXRFeGliaWNhb0F1ZGlvLFxuICAgICAgICAgICAgICAgICAgICBDb2RPYnJhRm9ub0F1ZGlvID0geC5Db2RPYnJhRm9ub0F1ZGlvLFxuICAgICAgICAgICAgICAgICAgICBEYXRJbmljaW9Sb2wgPSB4LkRhdEluaWNpb1JvbCxcbiAgICAgICAgICAgICAgICAgICAgRGF0RmltUm9sID0geC5EYXRGaW1Sb2wsXG4gICAgICAgICAgICAgICAgICAgIENvZEZvbnRlUm9sID0geC5Db2RGb250ZVJvbCxcbiAgICAgICAgICAgICAgICAgICAgQ29kVGlwUm9sID0geC5Db2RUaXBSb2wsXG4gICAgICAgICAgICAgICAgICAgIENvZE9yaWdlbVJvbCA9IHguQ29kT3JpZ2VtUm9sLFxuICAgICAgICAgICAgICAgICAgICBDb2RVc3VhcmlvID0geC5Db2RVc3VhcmlvLFxuICAgICAgICAgICAgICAgICAgICBUaXBDYXJhY3RlcmlzdGljYWRpc3QgPSB4LlRpcENhcmFjdGVyaXN0aWNhZGlzdFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICkuVG9MaXN0KCk7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJRW51bWVyYWJsZTxBdWRpb1Zpc3VhbD4iLCAibWV0aG9kIjogIlN1bSJ9LCB7InR5cGUiOiAiSUVudW1lcmFibGU8QXVkaW9WaXN1YWw+IiwgIm1ldGhvZCI6ICJTZWxlY3QifV19fX0sICJTZXJ2aWNlYnVzQ2xpZW50IjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IlNlbmRNZXNzYWdlc0FzeW5jIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIGFzeW5jIFRhc2sgU2VuZE1lc3NhZ2VzQXN5bmMoSUVudW1lcmFibGU8QXVkaW9WaXN1YWw+IG1lc3NhZ2VzLCBDb21wZXRlbmNpYSBjb21wZXRlbmNpYSwgaW50IGNvZGlnb0Rpc3RyaWJ1aWNhbywgaW50IGNvZERpc3RSb2wpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gbmV3IFBhcmFsbGVsT3B0aW9ucygpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgTWF4RGVncmVlT2ZQYXJhbGxlbGlzbSA9IEVudmlyb25tZW50LlByb2Nlc3NvckNvdW50XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCBQYXJhbGxlbC5Gb3JFYWNoQXN5bmMobWVzc2FnZXMsIG9wdGlvbnMsIGFzeW5jIChtZXNzYWdlLCB0b2tlbikgPT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0cnlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuQ29tcGV0ZW5jaWEgPSBjb21wZXRlbmNpYTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5Db2REaXN0cmlidWljYW8gPSBjb2RpZ29EaXN0cmlidWljYW87XG5cbiAgICAgICAgICAgICAgICAgICAgU2VydmljZUJ1c01lc3NhZ2Ugc2VydmljZUJ1c01lc3NhZ2UgPSBuZXcgU2VydmljZUJ1c01lc3NhZ2UoSnNvblNlcmlhbGl6ZXIuU2VyaWFsaXplKG1lc3NhZ2UpKTtcblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kZXIuU2VuZE1lc3NhZ2VBc3luYyhzZXJ2aWNlQnVzTWVzc2FnZSwgdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZSgkXCJNZXNzYWdlIHNlbnQ6IHttZXNzYWdlfVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuVHJhY2tUcmFjZShleC5Ub1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoJFwiRmFsaG91OiB7ZXguTWVzc2FnZX1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVRlbGVtZXRyeUNsaWVudCIsICJtZXRob2QiOiAiVHJhY2tUcmFjZSJ9LCB7InR5cGUiOiAiUGFyYWxsZWwiLCAibWV0aG9kIjogIkZvckVhY2hBc3luYyJ9LCB7InR5cGUiOiAiSnNvblNlcmlhbGl6ZXIiLCAibWV0aG9kIjogIlNlcmlhbGl6ZSJ9LCB7InR5cGUiOiAic2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifSwgeyJ0eXBlIjogImV4IiwgIm1ldGhvZCI6ICJUb1N0cmluZyJ9LCB7InR5cGUiOiAiQ29uc29sZSIsICJtZXRob2QiOiAiV3JpdGVMaW5lIn1dfX19fX0sICJFY2FkR2xvYm9QbGF5LkZvbm9ncmFtYSI6IHsiUHJvZ3JhbSI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjoge319LCAiV29ya2VyIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkV4ZWN1dGVBc3luYyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByb3RlY3RlZCBhc3luYyBvdmVycmlkZSBUYXNrIEV4ZWN1dGVBc3luYyhDYW5jZWxsYXRpb25Ub2tlbiBzdG9wcGluZ1Rva2VuKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoZm9ub2dyYW1hcy5BbnkoKSA9PSBmYWxzZSlcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIHZhciBmb25vZ3JhbWFzR2xvYm9wbGF5ID0gYXdhaXQgX2Rhby5HZXRGb25vZ3JhbWFzR2xvYm9wbGF5KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IFByb2Nlc3NNZXNzYWdlc0FzeW5jKCk7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJRGFvIiwgIm1ldGhvZCI6ICJHZXRGb25vZ3JhbWFzR2xvYm9wbGF5In0sIHsidHlwZSI6ICJmb25vZ3JhbWFzIiwgIm1ldGhvZCI6ICJBbnkifV19LCAiUHJvY2Vzc01lc3NhZ2VzQXN5bmMiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgUHJvY2Vzc01lc3NhZ2VzQXN5bmMoKVxuICAgICAgICB7XG4gICAgICAgICAgICBTZXJ2aWNlQnVzUmVjZWl2ZXIgcmVjZWl2ZXIgPSBfc2VydmljZUJ1c0NsaWVudC5DcmVhdGVSZWNlaXZlcihcIm9icmFzbXVzaWNhaXNnbG9ib3BsYXlcIik7XG5cbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gYXdhaXQgcmVjZWl2ZXIuUmVjZWl2ZU1lc3NhZ2VzQXN5bmMobWF4TWVzc2FnZXM6IDEwMCwgbWF4V2FpdFRpbWU6IFRpbWVTcGFuLkZyb21TZWNvbmRzKDEpKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZXMuQW55KCkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9jZXNzaW5nVGFza3MgPSBuZXcgTGlzdDxUYXNrPigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbWVzc2FnZSBpbiBtZXNzYWdlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nVGFza3MuQWRkKFByb2Nlc3NNZXNzYWdlQXN5bmMocmVjZWl2ZXIsIG1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgVGFzay5XaGVuQWxsKHByb2Nlc3NpbmdUYXNrcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmVjZWl2ZXIuQ2xvc2VBc3luYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVNlcnZpY2VCdXNDbGllbnQiLCAibWV0aG9kIjogIkNyZWF0ZVJlY2VpdmVyIn0sIHsidHlwZSI6ICJyZWNlaXZlciIsICJtZXRob2QiOiAiUmVjZWl2ZU1lc3NhZ2VzQXN5bmMifSwgeyJ0eXBlIjogIlRpbWVTcGFuIiwgIm1ldGhvZCI6ICJGcm9tU2Vjb25kcyJ9LCB7InR5cGUiOiAibWVzc2FnZXMiLCAibWV0aG9kIjogIkFueSJ9LCB7InR5cGUiOiAicHJvY2Vzc2luZ1Rhc2tzIiwgIm1ldGhvZCI6ICJBZGQifSwgeyJ0eXBlIjogIlRhc2siLCAibWV0aG9kIjogIldoZW5BbGwifSwgeyJ0eXBlIjogInJlY2VpdmVyIiwgIm1ldGhvZCI6ICJDbG9zZUFzeW5jIn1dfSwgIlByb2Nlc3NNZXNzYWdlQXN5bmMiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgUHJvY2Vzc01lc3NhZ2VBc3luYyhTZXJ2aWNlQnVzUmVjZWl2ZXIgcmVjZWl2ZXIsIFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2UgbWVzc2FnZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGF1ZGlvVmlzdWFsID0gSnNvbkNvbnZlcnQuRGVzZXJpYWxpemVPYmplY3Q8QXVkaW9WaXN1YWw+KG1lc3NhZ2UuQm9keS5Ub1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIC8vIEFMVEVSQVIgQSBDT05ESVx1MDBjN1x1MDBjM08gRE8gRklMVFJPIEFOVEVTIERFIFJPREFSXG4gICAgICAgICAgICAgICAgYXVkaW9WaXN1YWwuT2JyYXNNdXNpY2FpcyA9IGZvbm9ncmFtYXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguQ29kT2JyYUF1ZGlvRWNhZCA9PSBhdWRpb1Zpc3VhbC5Db2RPYnJhQXVkaW9FY2FkICYmIHguQ29kQ2FwRXBpc29kaW8gPT0gYXVkaW9WaXN1YWwuQ29kQ2FwaUVwaXNvZGlvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdCh5ID0+IG5ldyBNdXNpY2FBdWRpb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvZENvbGV0aXZvID0geS5Db2RDb2xldGl2byxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXBTaXR1YWNhb0Zvbm8gPSB5LlRpcFNpdHVhY2FvRm9ubyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJhY3RlcmlzdGljYURpc3RyaWJ1aWNhbyA9IHkuQ2FyYWN0ZXJpc3RpY2FEaXN0cmlidWljYW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FyYWN0ZXJpc3RpY2FSZWdpc3RybyA9IHkuQ2FyYWN0ZXJpc3RpY2FSZWdpc3RybyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb2RDYXBFcGlzb2RpbyA9IHkuQ29kQ2FwRXBpc29kaW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29kR3JhID0geS5Db2RHcmEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29kSXNyYyA9IHkuQ29kSXNyYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb2RPYnJhQXVkaW9FY2FkID0geS5Db2RPYnJhQXVkaW9FY2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvZE9icmFNdXNFY2FkID0geS5Db2RPYnJhTXVzRWNhZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb25vZ3JhbWEgPSB5LkZvbm9ncmFtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJ0ZVJlcHJlc2VudGFkYSA9IHkuUGFydGVSZXByZXNlbnRhZGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXRkRHVyYWNhb011c2ljYSA9IHkuUXRkRHVyYWNhb011c2ljYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuVG9MaXN0KCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBTZW5kTWVzc2FnZVRvUXVldWUoSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KGF1ZGlvVmlzdWFsKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmVjZWl2ZXIuQ29tcGxldGVNZXNzYWdlQXN5bmMobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoJFwiTWVuc2FnZW0gcHJvY2Vzc2FkYS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCRcIkVycm9yIHByb2Nlc3NpbmcgbWVzc2FnZToge2V4Lk1lc3NhZ2V9XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiQm9keSIsICJtZXRob2QiOiAiVG9TdHJpbmcifSwgeyJ0eXBlIjogIkpzb25Db252ZXJ0IiwgIm1ldGhvZCI6ICJTZXJpYWxpemVPYmplY3QifSwgeyJ0eXBlIjogIlNlcnZpY2VCdXNSZWNlaXZlciIsICJtZXRob2QiOiAiQ29tcGxldGVNZXNzYWdlQXN5bmMifSwgeyJ0eXBlIjogIkNvbnNvbGUiLCAibWV0aG9kIjogIldyaXRlTGluZSJ9LCB7InR5cGUiOiAiQ29uc29sZSIsICJtZXRob2QiOiAiV3JpdGVMaW5lIn1dfSwgIlNlbmRNZXNzYWdlVG9RdWV1ZSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzayBTZW5kTWVzc2FnZVRvUXVldWUoc3RyaW5nIG1lc3NhZ2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShtZXNzYWdlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0Vycm9yKFwiTWVzc2FnZSB0byBzZW5kIHRvIHRoZSBxdWV1ZSBpcyBudWxsIG9yIGVtcHR5LlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNlcnZpY2VCdXNTZW5kZXIgc2VuZGVyID0gX3NlcnZpY2VCdXNDbGllbnQuQ3JlYXRlU2VuZGVyKF9vdXRwdXRRdWV1ZU5hbWUpO1xuXG4gICAgICAgICAgICB0cnlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBTZXJ2aWNlQnVzTWVzc2FnZSBidXNNZXNzYWdlID0gbmV3IFNlcnZpY2VCdXNNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRlci5TZW5kTWVzc2FnZUFzeW5jKGJ1c01lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbihcIk1lc3NhZ2Ugc2VudCB0byB0aGUgcXVldWU6IHttZXNzYWdlfVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZW5kZXIuRGlzcG9zZUFzeW5jKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiSVNlcnZpY2VCdXNDbGllbnQiLCAibWV0aG9kIjogIkNyZWF0ZVNlbmRlciJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogInN0cmluZyIsICJtZXRob2QiOiAiSXNOdWxsT3JFbXB0eSJ9LCB7InR5cGUiOiAic2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJzZW5kZXIiLCAibWV0aG9kIjogIkRpc3Bvc2VBc3luYyJ9XX19fX0sICJFY2FkR2xvYm9QbGF5LkZvbm9ncmFtYXMiOiB7IkdldEZvbm9ncmFtYXMiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiUnVuIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIHN0YXRpYyBhc3luYyBUYXNrIFJ1bihcbiAgICAgICAgICAgIFtTZXJ2aWNlQnVzVHJpZ2dlcihcIlF1ZXVlTmFtZVwiLCBDb25uZWN0aW9uID0gXCJOYW1lc3BhY2VDb25uZWN0aW9uU3RyaW5nXCIpXSBzdHJpbmcgaW5wdXRRdWV1ZSxcbiAgICAgICAgICAgIFtTZXJ2aWNlQnVzKFwiT3V0cHV0UXVldWVOYW1lXCIsIENvbm5lY3Rpb24gPSBcIk5hbWVzcGFjZUNvbm5lY3Rpb25TdHJpbmdcIildIElBc3luY0NvbGxlY3RvcjxzdHJpbmc+IG91dHB1dFF1ZXVlLFxuICAgICAgICAgICAgSUxvZ2dlciBsb2cpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxvZy5Mb2dJbmZvcm1hdGlvbigkXCJDIyBTZXJ2aWNlQnVzIHF1ZXVlIHRyaWdnZXIgZnVuY3Rpb24gcHJvY2Vzc2VkIG1lc3NhZ2U6IHtpbnB1dFF1ZXVlfVwiKTtcblxuICAgICAgICAgICAgdmFyIF9zdHJpbmdDb25uZWN0aW9uID0gXCJTZXJ2ZXI9dGNwOmVjYWRwb2RzeW5hcHNlLnNxbC5henVyZXN5bmFwc2UubmV0LDE0MzM7SW5pdGlhbCBDYXRhbG9nPXNxbHBvb2xwb2NlY2FkO1BlcnNpc3QgU2VjdXJpdHkgSW5mbz1GYWxzZTtVc2VyIElEPXNxbGFkbWludXNlcjtQYXNzd29yZD1zbSMpTWdeeER9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAibG9nIiwgIm1ldGhvZCI6ICJMb2dJbmZvcm1hdGlvbiJ9XX19fSwgIlN0YXJ0dXAiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29uZmlndXJlIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIG92ZXJyaWRlIHZvaWQgQ29uZmlndXJlKElGdW5jdGlvbnNIb3N0QnVpbGRlciBidWlsZGVyKVxuICAgIHtcbiAgICAgICAgYnVpbGRlci5TZXJ2aWNlcy5BZGRIdHRwQ2xpZW50KCk7XG5cbiAgICAgICAgdmFyIGNvbm5lY3Rpb25TZXJ2aWNlQnVzID0gXCJFbmRwb2ludD1zYjovL2FzYi1wb2MtZWNhZC5zZXJ2aWNlYnVzLndpbmRvd3MubmV0LztTaGFyZWRBY2Nlc3NLZXlOYW1lPWFzYi1wb2MtZWNhZC1ydWxlO1NoYXJlZEFjY2Vzc0tleT1uZ3JmdmdvKzBxazh0TlVqNVVCV0RSelQzNUwzVUp0UWMrQVNiSDMra2RJPVwiO1xuICAgICAgICB2YXIgcXVldWVTZXJ2aWNlQnVzID0gXCJmb25vZ3JhbWFzZ2xvYm9wbGF5XCI7XG5cbiAgICAgICAgYnVpbGRlci5TZXJ2aWNlcy5BZGRTY29wZWQ8U2VydmljZWJ1c0NsaWVudD4oeCA9PiBuZXcgU2VydmljZWJ1c0NsaWVudChjb25uZWN0aW9uU2VydmljZUJ1cywgcXVldWVTZXJ2aWNlQnVzKSk7XG4gICAgICAgIGJ1aWxkZXIuU2VydmljZXMuQWRkU2NvcGVkPElPYnRlckRhZG9zU2VydmljZSwgT2J0ZXJEYWRvc1NlcnZpY2U+KCk7XG4gICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIlNlcnZpY2VzIiwgIm1ldGhvZCI6ICJBZGRIdHRwQ2xpZW50In1dfX19fSwgIkVjYWRHbG9ib3BsYXkuSW5mcmEiOiB7IkRhdGEiOiB7IkF6dXJlRGJDb250ZXh0IjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkRpc3RBc3NvY2lhY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0Q29tcGV0ZW5jaWEiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RDb25zb2xpZGFjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RDb25zb2xpZGFjYW9BdWQiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RDb25zb2xpZGFjYW9EdGwiOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RFeGVjdWNhb1N1bWFyaW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RQZW5kZW50ZSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiRGlzdFBvbnRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0UmV0aWRvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0Um9sIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0Um9sT3JpZ2VtRXhlY3VjYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIkRpc3RUaXR1bGFyIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEaXN0cmlidWljYW8iOiB7InR5cGUiOiAicHJvcGVydHkifSwgIk1vdGl2b1JldGVuY2FvIjogeyJ0eXBlIjogInByb3BlcnR5In0sICJEZW1vbnN0cmF0aXZvVGl0dWxhciI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiUnVicmljYSI6IHsidHlwZSI6ICJwcm9wZXJ0eSJ9LCAiT25Nb2RlbENyZWF0aW5nIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25Nb2RlbENyZWF0aW5nKE1vZGVsQnVpbGRlciBtb2RlbEJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RBc3NvY2lhY2FvKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdEFzc29jaWFjYW8+KCkpO1xuICAgICAgICAgICAgQ29uZmlndXJlRGlzdENvbXBldGVuY2lhKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdENvbXBldGVuY2lhPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RDb25zb2xpZGFjYW8obW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0Q29uc29saWRhY2FvPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RDb25zb2xpZGFjYW9BdWQobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0Q29uc29saWRhY2FvQXVkPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RDb25zb2xpZGFjYW9EdGwobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0Q29uc29saWRhY2FvRHRsPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RFeGVjdWNhb1N1bWFyaW8obW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0RXhlY3VjYW9TdW1hcmlvPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RQZW5kZW50ZShtb2RlbEJ1aWxkZXIuRW50aXR5PERpc3RQZW5kZW50ZT4oKSk7XG4gICAgICAgICAgICBDb25maWd1cmVEaXN0UG9udG8obW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0UG9udG8+KCkpO1xuICAgICAgICAgICAgQ29uZmlndXJlRGlzdFJldGlkbyhtb2RlbEJ1aWxkZXIuRW50aXR5PERpc3RSZXRpZG8+KCkpO1xuICAgICAgICAgICAgQ29uZmlndXJlRGlzdHJpYnVpY2FvKG1vZGVsQnVpbGRlci5FbnRpdHk8RGlzdHJpYnVpY2FvPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RSb2wobW9kZWxCdWlsZGVyLkVudGl0eTxEaXN0Um9sPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZURpc3RSb2xPcmlnZW1FeGVjdWNhbyhtb2RlbEJ1aWxkZXIuRW50aXR5PERpc3RSb2xPcmlnZW1FeGVjdWNhbz4oKSk7XG4gICAgICAgICAgICBDb25maWd1cmVEaXN0VGl0dWxhcihtb2RlbEJ1aWxkZXIuRW50aXR5PERpc3RUaXR1bGFyPigpKTtcbiAgICAgICAgICAgIENvbmZpZ3VyZU1vdGl2b1JldGVuY2FvKG1vZGVsQnVpbGRlci5FbnRpdHk8TW90aXZvUmV0ZW5jYW8+KCkpO1xuICAgICAgICAgICAgQ29uZmlndXJlRGVtb25zdHJhdGl2b1RpdHVsYXIobW9kZWxCdWlsZGVyLkVudGl0eTxSZWxEZW1vbnN0cmF0aXZvVGl0dWxhcj4oKSk7XG4gICAgICAgICAgICBDb25maWd1cmVSdWJyaWNhKG1vZGVsQnVpbGRlci5FbnRpdHk8UnVicmljYT4oKSk7XG5cbiAgICAgICAgICAgIGJhc2UuT25Nb2RlbENyZWF0aW5nKG1vZGVsQnVpbGRlcik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJiYXNlIiwgIm1ldGhvZCI6ICJPbk1vZGVsQ3JlYXRpbmcifV19LCAiQ29uZmlndXJlRGlzdEFzc29jaWFjYW8iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIHZvaWQgQ29uZmlndXJlRGlzdEFzc29jaWFjYW8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdEFzc29jaWFjYW8+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfQVNTT0NJQUNBT1wiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2REaXN0QXNzb2NpYWNhbyk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2REaXN0QXNzb2NpYWNhbykuSGFzQ29sdW1uTmFtZShcImNvZF9kaXN0YXNzb2NpYWNhb1wiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RBc3NvY2lhY2FvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdEFzc29jaWFjYW8+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RBc3NvY2lhY2FvPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdENvbXBldGVuY2lhIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RDb21wZXRlbmNpYShFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29tcGV0ZW5jaWE+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfQ09NUEVURU5DSUFcIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUpO1xuICAgICAgICAgICAgYnVpbGRlci5Qcm9wZXJ0eShlID0+IGUuQ29kQ29tcGV0ZW5jaWEpLkhhc0NvbHVtbk5hbWUoXCJjb2RfY29tcGV0ZW5jaWFcIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29tcGV0ZW5jaWE+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29tcGV0ZW5jaWE+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RDb21wZXRlbmNpYT4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RDb25zb2xpZGFjYW8iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIHZvaWQgQ29uZmlndXJlRGlzdENvbnNvbGlkYWNhbyhFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUX0NPTlNPTElEQUNBT1wiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2RDb25zb2xpZERpc3RyaWIpO1xuICAgICAgICAgICAgYnVpbGRlci5Qcm9wZXJ0eShlID0+IGUuQ29kQ29uc29saWREaXN0cmliKS5IYXNDb2x1bW5OYW1lKFwiY29kX2NvbnNvbGlkZGlzdHJpYlwiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RDb25zb2xpZGFjYW8+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdENvbnNvbGlkYWNhb0F1ZCI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0Q29uc29saWRhY2FvQXVkKEVudGl0eVR5cGVCdWlsZGVyPERpc3RDb25zb2xpZGFjYW9BdWQ+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfQ09OU09MSURBQ0FPX0FVRFwiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2RDb25zb2xpZERpc3RyaWJBdWRpbyk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2RDb25zb2xpZERpc3RyaWJBdWRpbykuSGFzQ29sdW1uTmFtZShcImNvZF9jb25zb2xpZGRpc3RyaWJhdWRpb1wiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RDb25zb2xpZGFjYW9BdWQ+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvQXVkPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvQXVkPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdENvbnNvbGlkYWNhb0R0bCI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0Q29uc29saWRhY2FvRHRsKEVudGl0eVR5cGVCdWlsZGVyPERpc3RDb25zb2xpZGFjYW9EdGw+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfQ09OU09MSURBQ0FPX0RUTFwiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2RDb25zb2xpZERpc3RyaWJEdGwpO1xuICAgICAgICAgICAgYnVpbGRlci5Qcm9wZXJ0eShlID0+IGUuQ29kQ29uc29saWREaXN0cmliRHRsKS5IYXNDb2x1bW5OYW1lKFwiY29kX2NvbnNvbGlkZGlzdHJpYmR0bFwiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RDb25zb2xpZGFjYW9EdGw+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvRHRsPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Q29uc29saWRhY2FvRHRsPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdEV4ZWN1Y2FvU3VtYXJpbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0RXhlY3VjYW9TdW1hcmlvKEVudGl0eVR5cGVCdWlsZGVyPERpc3RFeGVjdWNhb1N1bWFyaW8+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfRVhFQ1VDQU9fU1VNQVJJT1wiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2REaXN0RXhlY3VjYW9TdW1hcmlvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RFeGVjdWNhb1N1bWFyaW8pLkhhc0NvbHVtbk5hbWUoXCJjb2RfZGlzdGV4ZWN1Y2Fvc3VtYXJpb1wiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RFeGVjdWNhb1N1bWFyaW8+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0RXhlY3VjYW9TdW1hcmlvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0RXhlY3VjYW9TdW1hcmlvPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdFBlbmRlbnRlIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RQZW5kZW50ZShFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UGVuZGVudGU+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfUEVOREVOVEVcIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kRGlzdFBlbmRlbnRlKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RQZW5kZW50ZSkuSGFzQ29sdW1uTmFtZShcImNvZF9kaXN0cGVuZGVudGVcIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UGVuZGVudGU+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UGVuZGVudGU+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RQZW5kZW50ZT4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RQb250byI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0UG9udG8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFBvbnRvPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUX1BPTlRPXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZFBvbnRvRGlzdHJpYnVpY2FvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZFBvbnRvRGlzdHJpYnVpY2FvKS5IYXNDb2x1bW5OYW1lKFwiY29kX3BvbnRvZGlzdHJpYnVpY2FvXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFBvbnRvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFBvbnRvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UG9udG8+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVEaXN0UmV0aWRvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RSZXRpZG8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJldGlkbz4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiRElTVF9SRVRJRE9cIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kRGlzdFJldGlkbyk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2REaXN0UmV0aWRvKS5IYXNDb2x1bW5OYW1lKFwiY29kX2Rpc3RyZXRpZG9cIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0UmV0aWRvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJldGlkbz4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJldGlkbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RyaWJ1aWNhbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0cmlidWljYW8oRW50aXR5VHlwZUJ1aWxkZXI8RGlzdHJpYnVpY2FvPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUUklCVUlDQU9cIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kRGlzdHJpYnVpY2FvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RyaWJ1aWNhbykuSGFzQ29sdW1uTmFtZShcImNvZF9kaXN0cmlidWljYW9cIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0cmlidWljYW8+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0cmlidWljYW8+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RyaWJ1aWNhbz4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfSwgIkNvbmZpZ3VyZURpc3RSb2wiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIHZvaWQgQ29uZmlndXJlRGlzdFJvbChFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sPiBidWlsZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWlsZGVyLlRvVGFibGUoXCJESVNUX1JPTFwiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2REaXN0Um9sKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RSb2wpLkhhc0NvbHVtbk5hbWUoXCJjb2RfZGlzdHJvbFwiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPERpc3RSb2w+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlRGlzdFJvbE9yaWdlbUV4ZWN1Y2FvIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSB2b2lkIENvbmZpZ3VyZURpc3RSb2xPcmlnZW1FeGVjdWNhbyhFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sT3JpZ2VtRXhlY3VjYW8+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIkRJU1RfUk9MT1JJR0VNX0VYRUNVQ0FPXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZERpc3RPcmlnZW1FeGVjdWNhbyk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2REaXN0T3JpZ2VtRXhlY3VjYW8pLkhhc0NvbHVtbk5hbWUoXCJjb2RfZGlzdG9yaWdlbWV4ZWN1Y2FvXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJvbE9yaWdlbUV4ZWN1Y2FvPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFJvbE9yaWdlbUV4ZWN1Y2FvPiIsICJtZXRob2QiOiAiSGFzS2V5In0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0Um9sT3JpZ2VtRXhlY3VjYW8+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVEaXN0VGl0dWxhciI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEaXN0VGl0dWxhcihFbnRpdHlUeXBlQnVpbGRlcjxEaXN0VGl0dWxhcj4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiRElTVF9USVRVTEFSXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLkNvZERpc3RUaXR1bGFyKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLkNvZERpc3RUaXR1bGFyKS5IYXNDb2x1bW5OYW1lKFwiY29kX2Rpc3R0aXR1bGFyXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFRpdHVsYXI+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxEaXN0VGl0dWxhcj4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8RGlzdFRpdHVsYXI+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVNb3Rpdm9SZXRlbmNhbyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVNb3Rpdm9SZXRlbmNhbyhFbnRpdHlUeXBlQnVpbGRlcjxNb3Rpdm9SZXRlbmNhbz4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiTU9USVZPX1JFVEVOQ0FPXCIpO1xuICAgICAgICAgICAgYnVpbGRlci5IYXNLZXkoZSA9PiBlLlNnbE1vdGl2b1JldGVuY2FvKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuUHJvcGVydHkoZSA9PiBlLlNnbE1vdGl2b1JldGVuY2FvKS5IYXNDb2x1bW5OYW1lKFwic2dsX21vdGl2b3JldGVuY2FvXCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8TW90aXZvUmV0ZW5jYW8+IiwgIm1ldGhvZCI6ICJUb1RhYmxlIn0sIHsidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxNb3Rpdm9SZXRlbmNhbz4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8TW90aXZvUmV0ZW5jYW8+IiwgIm1ldGhvZCI6ICJQcm9wZXJ0eSJ9XX0sICJDb25maWd1cmVEZW1vbnN0cmF0aXZvVGl0dWxhciI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVEZW1vbnN0cmF0aXZvVGl0dWxhcihFbnRpdHlUeXBlQnVpbGRlcjxSZWxEZW1vbnN0cmF0aXZvVGl0dWxhcj4gYnVpbGRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRlci5Ub1RhYmxlKFwiUkVMX0RFTU9OU1RSQVRJVk9fVElUVUxBUlwiKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuSGFzS2V5KGUgPT4gZS5Db2REaXN0VGl0dWxhcik7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2REaXN0VGl0dWxhcikuSGFzQ29sdW1uTmFtZShcImNvZF9kaXN0dGl0dWxhclwiKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPFJlbERlbW9uc3RyYXRpdm9UaXR1bGFyPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8UmVsRGVtb25zdHJhdGl2b1RpdHVsYXI+IiwgIm1ldGhvZCI6ICJIYXNLZXkifSwgeyJ0eXBlIjogIkVudGl0eVR5cGVCdWlsZGVyPFJlbERlbW9uc3RyYXRpdm9UaXR1bGFyPiIsICJtZXRob2QiOiAiUHJvcGVydHkifV19LCAiQ29uZmlndXJlUnVicmljYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgdm9pZCBDb25maWd1cmVSdWJyaWNhKEVudGl0eVR5cGVCdWlsZGVyPFJ1YnJpY2E+IGJ1aWxkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuVG9UYWJsZShcIlJVQlJJQ0FcIik7XG4gICAgICAgICAgICBidWlsZGVyLkhhc0tleShlID0+IGUuQ29kUnVicmljYSk7XG4gICAgICAgICAgICBidWlsZGVyLlByb3BlcnR5KGUgPT4gZS5Db2RSdWJyaWNhKS5IYXNDb2x1bW5OYW1lKFwiY29kX3J1YnJpY2FcIik7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJFbnRpdHlUeXBlQnVpbGRlcjxSdWJyaWNhPiIsICJtZXRob2QiOiAiVG9UYWJsZSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8UnVicmljYT4iLCAibWV0aG9kIjogIkhhc0tleSJ9LCB7InR5cGUiOiAiRW50aXR5VHlwZUJ1aWxkZXI8UnVicmljYT4iLCAibWV0aG9kIjogIlByb3BlcnR5In1dfX19fSwgIlNlcnZpY2VzIjogeyJNZXNzYWdlQ2xpZW50IjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7InNlbmRlck1lc3NhZ2UiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzazxib29sPiBzZW5kZXJNZXNzYWdlKGR5bmFtaWMgbWVzc2FnZSwgc3RyaW5nIGNvbm5lY3Rpb25TdHJpbmcsIHN0cmluZyBxdWV1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgU2VydmljZUJ1c0NsaWVudCBjbGllbnQ7XG4gICAgICAgICAgICBTZXJ2aWNlQnVzU2VuZGVyIHNlbmRlcjtcblxuICAgICAgICAgICAgdmFyIGNsaWVudE9wdGlvbnMgPSBuZXcgU2VydmljZUJ1c0NsaWVudE9wdGlvbnMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFRyYW5zcG9ydFR5cGUgPSBTZXJ2aWNlQnVzVHJhbnNwb3J0VHlwZS5BbXFwV2ViU29ja2V0c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNsaWVudCA9IG5ldyBTZXJ2aWNlQnVzQ2xpZW50KGNvbm5lY3Rpb25TdHJpbmcsIGNsaWVudE9wdGlvbnMpO1xuICAgICAgICAgICAgc2VuZGVyID0gY2xpZW50LkNyZWF0ZVNlbmRlcihxdWV1ZSk7XG5cbiAgICAgICAgICAgIHVzaW5nIFNlcnZpY2VCdXNNZXNzYWdlQmF0Y2ggbWVzc2FnZUJhdGNoID0gYXdhaXQgc2VuZGVyLkNyZWF0ZU1lc3NhZ2VCYXRjaEFzeW5jKCk7XG4gICAgICAgICAgICBtZXNzYWdlQmF0Y2guVHJ5QWRkTWVzc2FnZShuZXcgU2VydmljZUJ1c01lc3NhZ2UoSnNvblNlcmlhbGl6ZXIuU2VyaWFsaXplKG1lc3NhZ2UpKSk7XG5cbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRlci5TZW5kTWVzc2FnZXNBc3luYyhtZXNzYWdlQmF0Y2gpO1xuICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCRcIm1lc3NhZ2VzIGhhcyBiZWVuIHB1Ymxpc2hlZCB0byB0aGUgcXVldWUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRlci5EaXNwb3NlQXN5bmMoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGllbnQuRGlzcG9zZUFzeW5jKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiY2xpZW50IiwgIm1ldGhvZCI6ICJDcmVhdGVTZW5kZXIifSwgeyJ0eXBlIjogInNlbmRlciIsICJtZXRob2QiOiAiQ3JlYXRlTWVzc2FnZUJhdGNoQXN5bmMifSwgeyJ0eXBlIjogIm1lc3NhZ2VCYXRjaCIsICJtZXRob2QiOiAiVHJ5QWRkTWVzc2FnZSJ9LCB7InR5cGUiOiAiSnNvblNlcmlhbGl6ZXIiLCAibWV0aG9kIjogIlNlcmlhbGl6ZSJ9LCB7InR5cGUiOiAic2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZXNBc3luYyJ9LCB7InR5cGUiOiAiQ29uc29sZSIsICJtZXRob2QiOiAiV3JpdGVMaW5lIn0sIHsidHlwZSI6ICJzZW5kZXIiLCAibWV0aG9kIjogIkRpc3Bvc2VBc3luYyJ9LCB7InR5cGUiOiAiY2xpZW50IiwgIm1ldGhvZCI6ICJEaXNwb3NlQXN5bmMifV19fX0sICJSb2xQcm9jZXNzYWRvIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX0sICJTZXJ2aWNlQnVzQ29ubmVjdGlvbiI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjoge319fX0sICJFY2FkR2xvYm9wbGF5Lk1vbml0b3IiOiB7IlByb2dyYW0iOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHt9fSwgIldvcmtlciI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJNb25pdG9yYW1lbnRvT2JyYUZvbm9ncmFtYSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzayBNb25pdG9yYW1lbnRvT2JyYUZvbm9ncmFtYShDYW5jZWxsYXRpb25Ub2tlbiBzdG9wcGluZ1Rva2VuKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgaW5pY2lvdUV4ZWN1Y2FvID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVzaW5nIChfdGVsZW1ldHJ5Q2xpZW50LlN0YXJ0T3BlcmF0aW9uPFJlcXVlc3RUZWxlbWV0cnk+KFwiUHJvY2Vzc2FuZG9BdWRpb1Zpc3VhbFwiKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuVHJhY2tFdmVudChcIk1vbml0b3JhbWVudG9DYWxjdWxvQXRpdm9cIiwgbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB7IFwidGltZXN0YW1wXCIsIERhdGVUaW1lLlV0Y05vdy5Ub1N0cmluZyhcIm9cIikgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0luZm9ybWF0aW9uKFwiTW9uaXRvcmFtZW50b0NhbGN1bG9BdGl2b1wiKTtcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9waWNOYW1lID0gXCJyZXRlbmNhby1vYnJhLWZvbm9ncmFtYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjEgPSBcImZvbm9ncmFtYXNcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24yID0gXCJvYnJhc211c2ljYWlzXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBhIHByaW1laXJhIHN1YnNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjFEZXRhaWxzID0gYXdhaXQgX2FkbWluQ2xpZW50LkdldFN1YnNjcmlwdGlvblJ1bnRpbWVQcm9wZXJ0aWVzQXN5bmModG9waWNOYW1lLCBzdWJzY3JpcHRpb24xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmcgc3Vic2NyaXB0aW9uMU1lc3NhZ2VDb3VudCA9IHN1YnNjcmlwdGlvbjFEZXRhaWxzLlZhbHVlLkFjdGl2ZU1lc3NhZ2VDb3VudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIGEgc2VndW5kYSBzdWJzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24yRGV0YWlscyA9IGF3YWl0IF9hZG1pbkNsaWVudC5HZXRTdWJzY3JpcHRpb25SdW50aW1lUHJvcGVydGllc0FzeW5jKHRvcGljTmFtZSwgc3Vic2NyaXB0aW9uMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb25nIHN1YnNjcmlwdGlvbjJNZXNzYWdlQ291bnQgPSBzdWJzY3JpcHRpb24yRGV0YWlscy5WYWx1ZS5BY3RpdmVNZXNzYWdlQ291bnQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbjFNZXNzYWdlQ291bnQgIT0gMCB8fCBzdWJzY3JpcHRpb24yTWVzc2FnZUNvdW50ICE9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RlbGVtZXRyeUNsaWVudC5UcmFja0V2ZW50KFwiRXhlY3VjYW9JbmljaWFkYVwiLCBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgXCJ0aW1lc3RhbXBcIiwgRGF0ZVRpbWUuVXRjTm93LlRvU3RyaW5nKFwib1wiKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbihcIkV4ZWN1Y2FvSW5pY2lhZGFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pY2lvdUV4ZWN1Y2FvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5pY2lvdUV4ZWN1Y2FvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pY2lvdUV4ZWN1Y2FvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoNjAwMDAsIHN0b3BwaW5nVG9rZW4pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuVHJhY2tFdmVudChcIkZpbVByb2Nlc3NhbWVudG9cIiwgbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgXCJ0aW1lc3RhbXBcIiwgRGF0ZVRpbWUuVXRjTm93LlRvU3RyaW5nKFwib1wiKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuTG9nSW5mb3JtYXRpb24oXCJGaW1Qcm9jZXNzYW1lbnRvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBJbmljaWFyUHJvY2Vzc2FtZW50b0VzcGVsaG9EZW1vbnN0cmF0aXZvKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuTG9nSW5mb3JtYXRpb24oXCJNZW5zYWdlbnMgZGUgcGFnaW5hXHUwMGU3XHUwMGUzbyBlbnZpYWRhc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoMTIwMDAwLCBzdG9wcGluZ1Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbiBleClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0Vycm9yKGV4LCBcIkVycm8gbm8gTW9uaXRvcmFtZW50b09icmFGb25vZ3JhbWFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJVGVsZW1ldHJ5Q2xpZW50IiwgIm1ldGhvZCI6ICJUcmFja0V2ZW50In0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dJbmZvcm1hdGlvbiJ9LCB7InR5cGUiOiAiSUFkbWluQ2xpZW50IiwgIm1ldGhvZCI6ICJHZXRTdWJzY3JpcHRpb25SdW50aW1lUHJvcGVydGllc0FzeW5jIn0sIHsidHlwZSI6ICJJQWRtaW5DbGllbnQiLCAibWV0aG9kIjogIkdldFN1YnNjcmlwdGlvblJ1bnRpbWVQcm9wZXJ0aWVzQXN5bmMifSwgeyJ0eXBlIjogIklUZWxlbWV0cnlDbGllbnQiLCAibWV0aG9kIjogIlRyYWNrRXZlbnQifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJJVGVsZW1ldHJ5Q2xpZW50IiwgIm1ldGhvZCI6ICJUcmFja0V2ZW50In0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dJbmZvcm1hdGlvbiJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0Vycm9yIn0sIHsidHlwZSI6ICJVdGNOb3ciLCAibWV0aG9kIjogIlRvU3RyaW5nIn0sIHsidHlwZSI6ICJVdGNOb3ciLCAibWV0aG9kIjogIlRvU3RyaW5nIn0sIHsidHlwZSI6ICJUYXNrIiwgIm1ldGhvZCI6ICJEZWxheSJ9LCB7InR5cGUiOiAiVXRjTm93IiwgIm1ldGhvZCI6ICJUb1N0cmluZyJ9LCB7InR5cGUiOiAiVGFzayIsICJtZXRob2QiOiAiRGVsYXkifV19LCAiSW5pY2lhclByb2Nlc3NhbWVudG9Fc3BlbGhvRGVtb25zdHJhdGl2byI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzayBJbmljaWFyUHJvY2Vzc2FtZW50b0VzcGVsaG9EZW1vbnN0cmF0aXZvKClcbiAgICAgICAge1xuICAgICAgICAgICAgdXNpbmcgKF90ZWxlbWV0cnlDbGllbnQuU3RhcnRPcGVyYXRpb248UmVxdWVzdFRlbGVtZXRyeT4oXCJQcm9jZXNzYW5kb0F1ZGlvVmlzdWFsXCIpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuVHJhY2tFdmVudChcIkluaWNpb1Byb2Nlc3NhbWVudG9QZGZcIiwgbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBcInRpbWVzdGFtcFwiLCBEYXRlVGltZS5VdGNOb3cuVG9TdHJpbmcoXCJvXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uMURldGFpbHMgPSBhd2FpdCBfYWRtaW5DbGllbnQuR2V0U3Vic2NyaXB0aW9uUnVudGltZVByb3BlcnRpZXNBc3luYyhcImRlbW9uc3RyYXRpdm9zXCIsIFwic3lzdGVtXCIpO1xuXG4gICAgICAgICAgICBpZihzdWJzY3JpcHRpb24xRGV0YWlscy5WYWx1ZS5Ub3RhbE1lc3NhZ2VDb3VudCA9PSAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBwYWdpbmFzID0gUGFnaW5hY2FvRGVtb25zdHJhdGl2by5PYnRlclBhZ2luYWNhb0VzcGVsaG8oKTtcblxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYWdpbmEgaW4gcGFnaW5hcylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXlsb2FkID0gU3lzdGVtLlRleHQuSnNvbi5Kc29uU2VyaWFsaXplci5TZXJpYWxpemUocGFnaW5hKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3NlbmRlci5TZW5kTWVzc2FnZUFzeW5jKG5ldyBTZXJ2aWNlQnVzTWVzc2FnZShwYXlsb2FkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVRlbGVtZXRyeUNsaWVudCIsICJtZXRob2QiOiAiVHJhY2tFdmVudCJ9LCB7InR5cGUiOiAiSUFkbWluQ2xpZW50IiwgIm1ldGhvZCI6ICJHZXRTdWJzY3JpcHRpb25SdW50aW1lUHJvcGVydGllc0FzeW5jIn0sIHsidHlwZSI6ICJJU2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJVdGNOb3ciLCAibWV0aG9kIjogIlRvU3RyaW5nIn0sIHsidHlwZSI6ICJQYWdpbmFjYW9EZW1vbnN0cmF0aXZvIiwgIm1ldGhvZCI6ICJPYnRlclBhZ2luYWNhb0VzcGVsaG8ifSwgeyJ0eXBlIjogIkpzb25TZXJpYWxpemVyIiwgIm1ldGhvZCI6ICJTZXJpYWxpemUifV19LCAiTW9uaXRvcmFtZW50b0RlbW9uc3RyYXRpdm8iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgTW9uaXRvcmFtZW50b0RlbW9uc3RyYXRpdm8oQ2FuY2VsbGF0aW9uVG9rZW4gc3RvcHBpbmdUb2tlbilcbiAgICAgICAge1xuICAgICAgICAgICAgdXNpbmcgKF90ZWxlbWV0cnlDbGllbnQuU3RhcnRPcGVyYXRpb248UmVxdWVzdFRlbGVtZXRyeT4oXCJQcm9jZXNzYW5kb0F1ZGlvVmlzdWFsXCIpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgX3RlbGVtZXRyeUNsaWVudC5UcmFja0V2ZW50KFwiTW9uaXRvcmFtZW50b0RlbW9uc3RyYXRpdm9BdGl2b1wiLCBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz5cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgeyBcInRpbWVzdGFtcFwiLCBEYXRlVGltZS5VdGNOb3cuVG9TdHJpbmcoXCJvXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuTG9nSW5mb3JtYXRpb24oXCJNb25pdG9yYW1lbnRvRGVtb25zdHJhdGl2b0F0aXZvXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmljaW91RXhlY3VjYW8gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXVlTmFtZSA9IFwiZGVtb25zdHJhdGl2b1wiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uMURldGFpbHMgPSBhd2FpdCBfYWRtaW5DbGllbnQuR2V0UXVldWVSdW50aW1lUHJvcGVydGllc0FzeW5jKHF1ZXVlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb25nIG1lc3NhZ2VDb3VudCA9IHN1YnNjcmlwdGlvbjFEZXRhaWxzLlZhbHVlLkFjdGl2ZU1lc3NhZ2VDb3VudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb3VudCAhPSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaWNpb3VFeGVjdWNhbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbihcIkV4ZWN1Y2FvIGRvIFBERiBJbmljaWFkYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5pY2lvdUV4ZWN1Y2FvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pY2lvdUV4ZWN1Y2FvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoNjAwMDAsIHN0b3BwaW5nVG9rZW4pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuVHJhY2tFdmVudChcIkZpbVByb2Nlc3NhbWVudG9QZGZcIiwgbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgXCJ0aW1lc3RhbXBcIiwgRGF0ZVRpbWUuVXRjTm93LlRvU3RyaW5nKFwib1wiKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0luZm9ybWF0aW9uKFwiRmltUHJvY2Vzc2FtZW50b1BkZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSg2MDAwMCwgc3RvcHBpbmdUb2tlbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9Y2F0Y2goRXhjZXB0aW9uIGV4KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJFcnJvIG5vIE1vbml0b3JhbWVudG9EZW1vbnN0cmF0aXZvXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklUZWxlbWV0cnlDbGllbnQiLCAibWV0aG9kIjogIlRyYWNrRXZlbnQifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJJQWRtaW5DbGllbnQiLCAibWV0aG9kIjogIkdldFF1ZXVlUnVudGltZVByb3BlcnRpZXNBc3luYyJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogIklUZWxlbWV0cnlDbGllbnQiLCAibWV0aG9kIjogIlRyYWNrRXZlbnQifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiVXRjTm93IiwgIm1ldGhvZCI6ICJUb1N0cmluZyJ9LCB7InR5cGUiOiAiVGFzayIsICJtZXRob2QiOiAiRGVsYXkifSwgeyJ0eXBlIjogIlV0Y05vdyIsICJtZXRob2QiOiAiVG9TdHJpbmcifSwgeyJ0eXBlIjogIlRhc2siLCAibWV0aG9kIjogIkRlbGF5In1dfX19fSwgIkVjYWRHbG9ib1BsYXkuT2JyYXNNdXNpY2FpcyI6IHsiR2V0T2JyYXNNdXNpY2FpcyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJSdW4iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzayBSdW4oXG4gICAgICAgICAgICBbU2VydmljZUJ1c1RyaWdnZXIoXCJhdWRpb3Zpc3VhbGdsb2JvcGxheVwiLCBDb25uZWN0aW9uID0gXCJTZXJ2aWNlQnVzQ29ubmVjdGlvblwiKV0gc3RyaW5nIG15UXVldWVJdGVtLCBTZXJ2aWNlQnVzTWVzc2FnZUFjdGlvbnMgbWVzc2FnZUFjdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIF9sb2dnZXIuTG9nSW5mb3JtYXRpb24oJFwiQyMgU2VydmljZUJ1cyBxdWV1ZSB0cmlnZ2VyIGZ1bmN0aW9uIHByb2Nlc3NlZCBtZXNzYWdlOiB7bXlRdWV1ZUl0ZW19XCIpO1xuICAgICAgICAgICAgU2VydmljZUJ1c1JlY2VpdmVkTWVzc2FnZSBtZXNzYWdlID0gbnVsbDtcblxuICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IEpzb25Db252ZXJ0LkRlc2VyaWFsaXplT2JqZWN0PFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2U+KG15UXVldWVJdGVtKTtcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzYXIgYSBtZW5zYWdlbSBlIGNvbnN1bHRhciBvIGJhbmNvIGRlIGRhZG9zXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGF3YWl0IFByb2Nlc3NNZXNzYWdlQXN5bmMobXlRdWV1ZUl0ZW0pO1xuICAgICAgICAgICAgICAgIFxuXG5cbiAgICAgICAgICAgICAgICAvLyBFbnZpYXIgbWVuc2FnZW0gcGFyYSBhIGZpbGEgZm9ub2dyYW1hc1xuICAgICAgICAgICAgICAgIGF3YWl0IFNlbmRNZXNzYWdlVG9RdWV1ZShKc29uQ29udmVydC5TZXJpYWxpemVPYmplY3QocmVzdWx0KSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWVzc2FnZUFjdGlvbnMuQ29tcGxldGVNZXNzYWdlQXN5bmMobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChFeGNlcHRpb24gZXgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWVzc2FnZUFjdGlvbnMuRGVhZExldHRlck1lc3NhZ2VBc3luYyhtZXNzYWdlLCBleC5Ub1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJKc29uQ29udmVydCIsICJtZXRob2QiOiAiU2VyaWFsaXplT2JqZWN0In0sIHsidHlwZSI6ICJtZXNzYWdlQWN0aW9ucyIsICJtZXRob2QiOiAiQ29tcGxldGVNZXNzYWdlQXN5bmMifSwgeyJ0eXBlIjogIm1lc3NhZ2VBY3Rpb25zIiwgIm1ldGhvZCI6ICJEZWFkTGV0dGVyTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJleCIsICJtZXRob2QiOiAiVG9TdHJpbmcifV19LCAiUHJvY2Vzc01lc3NhZ2VBc3luYyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzazxBdWRpb1Zpc3VhbD4gUHJvY2Vzc01lc3NhZ2VBc3luYyhzdHJpbmcgbWVzc2FnZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBKc29uQ29udmVydC5EZXNlcmlhbGl6ZU9iamVjdDxBdWRpb1Zpc3VhbD4obWVzc2FnZSk7XG5cbiAgICAgICAgICAgIGRhdGEuT2JyYXNNdXNpY2FpcyA9IGF3YWl0IF9kYW8uR2V0T2JyYXNNdXNpY2FpcyhkYXRhLkNvZE9icmFBdWRpb0VjYWQsIGRhdGEuQ29kQ2FwaUVwaXNvZGlvKTtcblxuICAgICAgICAgICAgLy8gUmV0b3JuYXIgbyByZXN1bHRhZG8gZG8gcHJvY2Vzc2FtZW50b1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJRGFvIiwgIm1ldGhvZCI6ICJHZXRPYnJhc011c2ljYWlzIn1dfSwgIlNlbmRNZXNzYWdlVG9RdWV1ZSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzayBTZW5kTWVzc2FnZVRvUXVldWUoc3RyaW5nIG1lc3NhZ2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShtZXNzYWdlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0Vycm9yKFwiTWVzc2FnZSB0byBzZW5kIHRvIHRoZSBxdWV1ZSBpcyBudWxsIG9yIGVtcHR5LlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNlcnZpY2VCdXNTZW5kZXIgc2VuZGVyID0gX3NlcnZpY2VCdXNDbGllbnQuQ3JlYXRlU2VuZGVyKE91dHB1dFF1ZXVlTmFtZSk7XG5cbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFNlcnZpY2VCdXNNZXNzYWdlIGJ1c01lc3NhZ2UgPSBuZXcgU2VydmljZUJ1c01lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VuZGVyLlNlbmRNZXNzYWdlQXN5bmMoYnVzTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbihcIk1lc3NhZ2Ugc2VudCB0byB0aGUgcXVldWU6IHttZXNzYWdlfVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZW5kZXIuRGlzcG9zZUFzeW5jKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiSVNlcnZpY2VCdXNDbGllbnQiLCAibWV0aG9kIjogIkNyZWF0ZVNlbmRlciJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogInN0cmluZyIsICJtZXRob2QiOiAiSXNOdWxsT3JFbXB0eSJ9LCB7InR5cGUiOiAic2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJzZW5kZXIiLCAibWV0aG9kIjogIkRpc3Bvc2VBc3luYyJ9XX19fSwgIlN0YXJ0dXAiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiQ29uZmlndXJlIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHVibGljIG92ZXJyaWRlIHZvaWQgQ29uZmlndXJlKElGdW5jdGlvbnNIb3N0QnVpbGRlciBidWlsZGVyKVxuICAgIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBidWlsZGVyLkdldENvbnRleHQoKTtcbiAgICAgICAgdmFyIGNvbmZpZ3VyYXRpb24gPSBidWlsZGVyLkdldENvbnRleHQoKS5Db25maWd1cmF0aW9uO1xuXG4gICAgICAgIGJ1aWxkZXIuU2VydmljZXMuQWRkSHR0cENsaWVudCgpO1xuXG4gICAgICAgIHZhciBfc3RyaW5nQ29ubmVjdGlvbiA9IFwiU2VydmVyPXRjcDplY2FkcG9kc3luYXBzZS5zcWwuYXp1cmVzeW5hcHNlLm5ldCwxNDMzO0luaXRpYWwgQ2F0YWxvZz1zcWxwb29scG9jZWNhZDtQZXJzaXN0IFNlY3VyaXR5IEluZm89RmFsc2U7VXNlciBJRD1zcWxhZG1pbnVzZXI7UGFzc3dvcmQ9c20jKU1nXnhEfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklGdW5jdGlvbnNIb3N0QnVpbGRlciIsICJtZXRob2QiOiAiR2V0Q29udGV4dCJ9LCB7InR5cGUiOiAiSUZ1bmN0aW9uc0hvc3RCdWlsZGVyIiwgIm1ldGhvZCI6ICJHZXRDb250ZXh0In0sIHsidHlwZSI6ICJTZXJ2aWNlcyIsICJtZXRob2QiOiAiQWRkSHR0cENsaWVudCJ9XX19fX0sICJFY2FkR2xvYm9wbGF5Lk9icmFzTXVzaWNhaXNGdW5jdGlvbiI6IHsiRnVuY3Rpb24xIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IlJ1biI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyB2b2lkIFJ1bihbU2VydmljZUJ1c1RyaWdnZXIoXCJteXF1ZXVlXCIsIENvbm5lY3Rpb24gPSBcIlwiKV1zdHJpbmcgbXlRdWV1ZUl0ZW0sIElMb2dnZXIgbG9nKVxuICAgICAgICB7XG4gICAgICAgICAgICBsb2cuTG9nSW5mb3JtYXRpb24oJFwiQyMgU2VydmljZUJ1cyBxdWV1ZSB0cmlnZ2VyIGZ1bmN0aW9uIHByb2Nlc3NlZCBtZXNzYWdlOiB7bXlRdWV1ZUl0ZW19XCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAibG9nIiwgIm1ldGhvZCI6ICJMb2dJbmZvcm1hdGlvbiJ9XX19fX0sICJFY2FkR2xvYm9wbGF5LlByb2Nlc3NpbmdGb25vZ3JhbWFzV29ya2VyIjogeyJQcm9ncmFtIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX0sICJXb3JrZXIiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiU3RhcnRQcm9jZXNzb3IiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgU3RhcnRQcm9jZXNzb3IoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsbGF0aW9uVG9rZW4pXG4gICAgICAgIHtcbiAgICAgICAgICAgIFNlbWFwaG9yZVNsaW0gc2VtYXBob3JlID0gbmV3IFNlbWFwaG9yZVNsaW0oMTUpO1xuXG5cbiAgICAgICAgICAgIC8vdmFyIHJlY2VpdmVyID0gX2NsaWVudC5DcmVhdGVSZWNlaXZlcihcInJldGVuY2FvLW9icmEtZm9ub2dyYW1hLXNlY3VuZGFyaW9cIiwgXCJmb25vZ3JhbWFzXCIsIG5ldyBTZXJ2aWNlQnVzUmVjZWl2ZXJPcHRpb25zKCkgeyBQcmVmZXRjaENvdW50ID0gMTAwIH0pO1xuICAgICAgICAgICAgdmFyIHJlY2VpdmVyID0gX2NsaWVudC5DcmVhdGVSZWNlaXZlcihcInJldGVuY2FvLW9icmEtZm9ub2dyYW1hXCIsIFwiZm9ub2dyYW1hc1wiLCBuZXcgU2VydmljZUJ1c1JlY2VpdmVyT3B0aW9ucygpIHsgUHJlZmV0Y2hDb3VudCA9IDEwMCwgUmVjZWl2ZU1vZGUgPSBTZXJ2aWNlQnVzUmVjZWl2ZU1vZGUuUmVjZWl2ZUFuZERlbGV0ZSB9KTtcblxuICAgICAgICAgICAgaW50IGJhdGNoU2l6ZSA9IDUwO1xuICAgICAgICAgICAgVGltZVNwYW4gbWF4V2FpdFRpbWUgPSBUaW1lU3Bhbi5Gcm9tU2Vjb25kcygxNSk7XG5cbiAgICAgICAgICAgIHdoaWxlICghY2FuY2VsbGF0aW9uVG9rZW4uSXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgTGlzdDxTZXJ2aWNlQnVzUmVjZWl2ZWRNZXNzYWdlPiBhY2N1bXVsYXRlZE1lc3NhZ2VzID0gbmV3IExpc3Q8U2VydmljZUJ1c1JlY2VpdmVkTWVzc2FnZT4oKTtcbiAgICAgICAgICAgICAgICBEYXRlVGltZSBzdGFydFRpbWUgPSBEYXRlVGltZS5VdGNOb3c7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAoYWNjdW11bGF0ZWRNZXNzYWdlcy5Db3VudCA8IGJhdGNoU2l6ZSAmJiAoRGF0ZVRpbWUuVXRjTm93IC0gc3RhcnRUaW1lKSA8IG1heFdhaXRUaW1lKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZ1RpbWUgPSBtYXhXYWl0VGltZSAtIChEYXRlVGltZS5VdGNOb3cgLSBzdGFydFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nVGltZSA8PSBUaW1lU3Bhbi5aZXJvKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlY2ViZSBtZW5zYWdlbnMgY29tIG8gdGVtcG8gcmVzdGFudGVcbiAgICAgICAgICAgICAgICAgICAgSVJlYWRPbmx5TGlzdDxTZXJ2aWNlQnVzUmVjZWl2ZWRNZXNzYWdlPiBtZXNzYWdlcyA9IGF3YWl0IHJlY2VpdmVyLlJlY2VpdmVNZXNzYWdlc0FzeW5jKGJhdGNoU2l6ZSwgcmVtYWluaW5nVGltZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VzICE9IG51bGwgJiYgbWVzc2FnZXMuQW55KCkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkTWVzc2FnZXMuQWRkUmFuZ2UobWVzc2FnZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFhY2N1bXVsYXRlZE1lc3NhZ2VzLkFueSgpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoXCJOZW5odW1hIG1lbnNhZ2VtIHJlY2ViaWRhLiBUZW50YW5kbyBub3ZhbWVudGUuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgc2NvcGUgPSBfc2NvcGVGYWN0b3J5LkNyZWF0ZVNjb3BlKCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGVTZXJ2aWNlID0gc2NvcGUuU2VydmljZVByb3ZpZGVyLkdldFJlcXVpcmVkU2VydmljZTxJQ29uc29saWRhY2FvQ2FjaGVTZXJ2aWNlPigpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWNoZVNlcnZpY2UuQ2FycmVnYXJDYWNoZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIExpc3Q8VGFzaz4gdGhyZWFkcyA9IG5ldyBMaXN0PFRhc2s+KCk7XG4gICAgICAgICAgICAgICAgLy8gUHJvY2Vzc2FyIGNhZGEgbWVuc2FnZW0gZW0gdW1hIG5vdmEgdGhyZWFkXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG1lc3NhZ2UgaW4gYWNjdW11bGF0ZWRNZXNzYWdlcylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vYXdhaXQgc2VtYXBob3JlLldhaXRBc3luYyhjYW5jZWxsYXRpb25Ub2tlbik7IC8vIENvbnRyb2xhIG8gblx1MDBmYW1lcm8gZGUgdGhyZWFkc1xuICAgICAgICAgICAgICAgICAgICAvL3RocmVhZHMuQWRkKFRhc2suUnVuKGFzeW5jICgpID0+XG4gICAgICAgICAgICAgICAgICAgIC8ve1xuICAgICAgICAgICAgICAgICAgICAvLyAgICB0cnlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgYXdhaXQgUHJvY2Vzc01lc3NhZ2VBc3luYyhyZWNlaXZlciwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgY2F0Y2ggKEV4Y2VwdGlvbiBleClcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJGYWxoYSBubyBwcm9jZXNzYW1lbnRvIGRhcyBjb25zb2xpZGFjb2VzXCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgYXdhaXQgU2VuZFRvRGVhZGxldHRlcihtZXNzYWdlLkJvZHkuVG9TdHJpbmcoKSwgZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGZpbmFsbHlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgc2VtYXBob3JlLlJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgICAgICAgICAvL30sIGNhbmNlbGxhdGlvblRva2VuKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvY2Vzc01lc3NhZ2VBc3luYyhyZWNlaXZlciwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vYXdhaXQgVGFzay5XaGVuQWxsKHRocmVhZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUNsaWVudCIsICJtZXRob2QiOiAiQ3JlYXRlUmVjZWl2ZXIifSwgeyJ0eXBlIjogIklDbGllbnQiLCAibWV0aG9kIjogIkNyZWF0ZVJlY2VpdmVyIn0sIHsidHlwZSI6ICJJU2NvcGVGYWN0b3J5IiwgIm1ldGhvZCI6ICJDcmVhdGVTY29wZSJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nRXJyb3IifSwgeyJ0eXBlIjogIlRpbWVTcGFuIiwgIm1ldGhvZCI6ICJGcm9tU2Vjb25kcyJ9LCB7InR5cGUiOiAicmVjZWl2ZXIiLCAibWV0aG9kIjogIlJlY2VpdmVNZXNzYWdlc0FzeW5jIn0sIHsidHlwZSI6ICJtZXNzYWdlcyIsICJtZXRob2QiOiAiQW55In0sIHsidHlwZSI6ICJhY2N1bXVsYXRlZE1lc3NhZ2VzIiwgIm1ldGhvZCI6ICJBZGRSYW5nZSJ9LCB7InR5cGUiOiAiYWNjdW11bGF0ZWRNZXNzYWdlcyIsICJtZXRob2QiOiAiQW55In0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifSwgeyJ0eXBlIjogImNhY2hlU2VydmljZSIsICJtZXRob2QiOiAiQ2FycmVnYXJDYWNoZSJ9LCB7InR5cGUiOiAic2VtYXBob3JlIiwgIm1ldGhvZCI6ICJXYWl0QXN5bmMifSwgeyJ0eXBlIjogInRocmVhZHMiLCAibWV0aG9kIjogIkFkZCJ9LCB7InR5cGUiOiAiVGFzayIsICJtZXRob2QiOiAiUnVuIn0sIHsidHlwZSI6ICJCb2R5IiwgIm1ldGhvZCI6ICJUb1N0cmluZyJ9LCB7InR5cGUiOiAic2VtYXBob3JlIiwgIm1ldGhvZCI6ICJSZWxlYXNlIn0sIHsidHlwZSI6ICJUYXNrIiwgIm1ldGhvZCI6ICJXaGVuQWxsIn1dfSwgIlByb2Nlc3NNZXNzYWdlQXN5bmMiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgUHJvY2Vzc01lc3NhZ2VBc3luYyhTZXJ2aWNlQnVzUmVjZWl2ZXIgcmVjZWl2ZXIsIFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2UgbWVzc2FnZSlcbiAgICAgICAge1xuICAgICAgICAgICAgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgcmVuZXdhbFRva2VuU291cmNlID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZUJvZHkgPSBtZXNzYWdlLkJvZHkuVG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgdXNpbmcgKHZhciBvcGVyYXRpb24gPSBfdGVsZW1ldHJ5Q2xpZW50LlN0YXJ0T3BlcmF0aW9uPFJlcXVlc3RUZWxlbWV0cnk+KFwiUHJvY2Vzc2luZ0Zvbm9ncmFtYXNXb3JrZXJcIikpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBBdWRpb1Zpc3VhbEdsb2JvcGxheT8gYXVkaW9WaXN1YWwgPSBKc29uU2VyaWFsaXplci5EZXNlcmlhbGl6ZTxBdWRpb1Zpc3VhbEdsb2JvcGxheT4obWVzc2FnZUJvZHkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgc2NvcGUgPSBfc2NvcGVGYWN0b3J5LkNyZWF0ZVNjb3BlKCkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxjdWxhclJvbFNlcnZpY2UgPSBzY29wZS5TZXJ2aWNlUHJvdmlkZXIuR2V0UmVxdWlyZWRTZXJ2aWNlPElDYWxjdWxhRm9ub2dyYW1hU2VydmljZT4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhbGN1bGFyUm9sU2VydmljZS5DYWxjdWxhRm9ub2dyYW1hcyhhdWRpb1Zpc3VhbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbCAhPSBudWxsICYmIGF1ZGlvVmlzdWFsLkZvbm9ncmFtYXMgIT0gbnVsbCAmJiBhdWRpb1Zpc3VhbC5UaXR1bGFyZXNGb25vZ3JhbWEgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGVsZW1ldHJ5Q2xpZW50LlRyYWNrRXZlbnQoXCJQcm9jZXNzYW1lbnRvRm9ub2dyYW1hXCIsIG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBcImZvbm9ncmFtYXNcIiwgKGF1ZGlvVmlzdWFsPy5Gb25vZ3JhbWFzPy5Db3VudCgpID8/IDApLlRvU3RyaW5nKCkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBcInRpdHVsYXJlc0Zvbm9ncmFtYVwiLCAoYXVkaW9WaXN1YWw/LlRpdHVsYXJlc0Zvbm9ncmFtYT8uQ291bnQoKSA/PyAwKS5Ub1N0cmluZygpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgXCJjb2RDYXBpRXBpc29kaW9cIiwgYXVkaW9WaXN1YWw/LkNvZENhcGlFcGlzb2Rpbz8uVG9TdHJpbmcoKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IFwiY29kT2JyYUF1ZGlvRWNhZFwiLCBhdWRpb1Zpc3VhbD8uQ29kT2JyYUF1ZGlvRWNhZC5Ub1N0cmluZygpIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJGYWxoYSBubyBwcm9jZXNzYW1lbnRvIGRvcyBmb25vZ3JhbWFzXCIpO1xuICAgICAgICAgICAgICAgICAgICBfdGVsZW1ldHJ5Q2xpZW50LlRyYWNrRXhjZXB0aW9uKGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgU2VuZFRvRGVhZGxldHRlcihtZXNzYWdlQm9keSwgZXgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuU3RvcE9wZXJhdGlvbihvcGVyYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVNjb3BlRmFjdG9yeSIsICJtZXRob2QiOiAiQ3JlYXRlU2NvcGUifSwgeyJ0eXBlIjogIklUZWxlbWV0cnlDbGllbnQiLCAibWV0aG9kIjogIlRyYWNrRXZlbnQifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0Vycm9yIn0sIHsidHlwZSI6ICJJVGVsZW1ldHJ5Q2xpZW50IiwgIm1ldGhvZCI6ICJUcmFja0V4Y2VwdGlvbiJ9LCB7InR5cGUiOiAiSVRlbGVtZXRyeUNsaWVudCIsICJtZXRob2QiOiAiU3RvcE9wZXJhdGlvbiJ9LCB7InR5cGUiOiAiQm9keSIsICJtZXRob2QiOiAiVG9TdHJpbmcifSwgeyJ0eXBlIjogImNhbGN1bGFyUm9sU2VydmljZSIsICJtZXRob2QiOiAiQ2FsY3VsYUZvbm9ncmFtYXMifSwgeyJ0eXBlIjogIkNvZE9icmFBdWRpb0VjYWQiLCAibWV0aG9kIjogIlRvU3RyaW5nIn1dfSwgIlNlbmRUb0RlYWRsZXR0ZXIiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgU2VuZFRvRGVhZGxldHRlcihzdHJpbmcgbWVzc2FnZSwgRXhjZXB0aW9uIGV4KVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24gPSBleC5TdGFja1RyYWNlO1xuXG4gICAgICAgICAgICBpZiAoZXguSW5uZXJFeGNlcHRpb24gIT0gbnVsbClcbiAgICAgICAgICAgICAgICBkZWFkTGV0dGVyRXJyb3JEZXNjcmlwdGlvbiArPSAkXCIge2V4LklubmVyRXhjZXB0aW9uLlRvU3RyaW5nKCl9XCI7XG5cbiAgICAgICAgICAgIGRlYWRMZXR0ZXJFcnJvckRlc2NyaXB0aW9uID0gZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24/Lkxlbmd0aCA+IDQwMDAgPyAgZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24/LlN1YnN0cmluZygwLCA0MDAwKSA6IGRlYWRMZXR0ZXJFcnJvckRlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgICB2YXIgZmFpbGVkTWVzc2FnZSA9IG5ldyBTZXJ2aWNlQnVzTWVzc2FnZShtZXNzYWdlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uUHJvcGVydGllcyA9IHsgeyBcIkV4Y2VwdGlvblwiLCBleC5NZXNzYWdlIH0sIHsgXCJTdGFja1RyYWNlXCIsIGRlYWRMZXR0ZXJFcnJvckRlc2NyaXB0aW9uIH0gfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gRW52aWUgYSBtZW5zYWdlbSBwYXJhIGEgZmlsYSBkZSBmYWxoYXMgcGVyc29uYWxpemFkYVxuICAgICAgICAgICAgYXdhaXQgX3NlbmRlci5TZW5kTWVzc2FnZUFzeW5jKGZhaWxlZE1lc3NhZ2UpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSVNlbmRlciIsICJtZXRob2QiOiAiU2VuZE1lc3NhZ2VBc3luYyJ9LCB7InR5cGUiOiAiSW5uZXJFeGNlcHRpb24iLCAibWV0aG9kIjogIlRvU3RyaW5nIn1dfX19fSwgIkVjYWRHbG9ib3BsYXkuUHJvY2Vzc2luZ0Z1bmN0aW9uIjogeyJQcm9jZXNzQXVkaW9WaXN1YWxGdW5jdGlvbiI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJSdW4iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgYXN5bmMgVGFzayBSdW4oXG4gICAgICAgICAgICBbU2VydmljZUJ1c1RyaWdnZXIoXCJnbG9ib3BsYXktZGlzdDJcIiwgQ29ubmVjdGlvbiA9IFwiU2VydmljZUJ1c0Nvbm5lY3Rpb25cIildIHN0cmluZyBxdWV1ZUl0ZW0sIFNlcnZpY2VCdXNNZXNzYWdlQWN0aW9ucyBtZXNzYWdlQWN0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbigkXCJDIyBTZXJ2aWNlQnVzIHF1ZXVlIHRyaWdnZXIgZnVuY3Rpb24gcHJvY2Vzc2VkIG1lc3NhZ2U6IHtxdWV1ZUl0ZW19XCIpO1xuICAgICAgICAgICAgU2VydmljZUJ1c1JlY2VpdmVkTWVzc2FnZSBtZXNzYWdlID0gbnVsbDtcblxuICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGF1ZGlvVmlzdWFsID0gYXdhaXQgUHJvY2Vzc01lc3NhZ2VBc3luYyhxdWV1ZUl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy9hd2FpdCBTZW5kTWVzc2FnZVRvUXVldWUoSnNvblNlcmlhbGl6ZXIuU2VyaWFsaXplKGF1ZGlvVmlzdWFsKSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2VBY3Rpb25zLkNvbXBsZXRlTWVzc2FnZUFzeW5jKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2UuXCIpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlICE9IG51bGwpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlQWN0aW9ucy5EZWFkTGV0dGVyTWVzc2FnZUFzeW5jKG1lc3NhZ2UsIGV4LlRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiSnNvblNlcmlhbGl6ZXIiLCAibWV0aG9kIjogIlNlcmlhbGl6ZSJ9LCB7InR5cGUiOiAibWVzc2FnZUFjdGlvbnMiLCAibWV0aG9kIjogIkNvbXBsZXRlTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJtZXNzYWdlQWN0aW9ucyIsICJtZXRob2QiOiAiRGVhZExldHRlck1lc3NhZ2VBc3luYyJ9LCB7InR5cGUiOiAiZXgiLCAibWV0aG9kIjogIlRvU3RyaW5nIn1dfSwgIlByb2Nlc3NNZXNzYWdlQXN5bmMiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2s8QXVkaW9WaXN1YWxHbG9ib3BsYXk+IFByb2Nlc3NNZXNzYWdlQXN5bmMoc3RyaW5nIG1lc3NhZ2VCb2R5KVxuICAgICAgICB7XG4gICAgICAgICAgICBBdWRpb1Zpc3VhbEdsb2JvcGxheT8gYXVkaW9WaXN1YWwgPSBudWxsO1xuICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXVkaW9WaXN1YWwgPSBKc29uU2VyaWFsaXplci5EZXNlcmlhbGl6ZTxBdWRpb1Zpc3VhbEdsb2JvcGxheT4obWVzc2FnZUJvZHkpO1xuICAgICAgICAgICAgICAgIF9sb2dnZXIuTG9nSW5mb3JtYXRpb24oJFwiSW5pY2lhbmRvIHByb2Nlc3NhbWVudG8gZGUgYXVkaW8gdmlzdWFsIHthdWRpb1Zpc3VhbC5Db2RPYnJhQXVkaW9FY2FkfVwiKTtcblxuICAgICAgICAgICAgICAgIGlmIChhdWRpb1Zpc3VhbCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgX2NhbGN1bGFyUm9sU2VydmljZS5DYWxjdWxhRUdlcmFSZXRlbmNhbyhhdWRpb1Zpc3VhbCk7XG4gICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuTG9nSW5mb3JtYXRpb24oJFwiUHJvY2Vzc2FtZW50byBmaW5hbGl6YWRvIC0ge2F1ZGlvVmlzdWFsLkNvZE9icmFBdWRpb0VjYWR9XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2VcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhdWRpb1Zpc3VhbDtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn0sIHsidHlwZSI6ICJJQ2FsY3VsYXJSb2xTZXJ2aWNlIiwgIm1ldGhvZCI6ICJDYWxjdWxhRUdlcmFSZXRlbmNhbyJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0Vycm9yIn1dfSwgIlNlbmRNZXNzYWdlVG9RdWV1ZSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzayBTZW5kTWVzc2FnZVRvUXVldWUoc3RyaW5nIG1lc3NhZ2UpXG4gICAgICAgIC8ve1xuICAgICAgICAvLyAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkobWVzc2FnZSkpXG4gICAgICAgIC8vICAgIHtcbiAgICAgICAgLy8gICAgICAgIF9sb2dnZXIuTG9nRXJyb3IoXCJNZXNzYWdlIHRvIHNlbmQgdG8gdGhlIHF1ZXVlIGlzIG51bGwgb3IgZW1wdHkuXCIpO1xuICAgICAgICAvLyAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyAgICB9XG5cbiAgICAgICAgLy8gICAgU2VydmljZUJ1c1NlbmRlciBzZW5kZXIgPSBfc2VydmljZUJ1c0NsaWVudC5DcmVhdGVTZW5kZXIoT3V0cHV0UXVldWVOYW1lKTtcblxuICAgICAgICAvLyAgICB0cnlcbiAgICAgICAgLy8gICAge1xuICAgICAgICAvLyAgICAgICAgU2VydmljZUJ1c01lc3NhZ2UgYnVzTWVzc2FnZSA9IG5ldyBTZXJ2aWNlQnVzTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgLy8gICAgICAgIGF3YWl0IHNlbmRlci5TZW5kTWVzc2FnZUFzeW5jKGJ1c01lc3NhZ2UpO1xuICAgICAgICAvLyAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbihcIk1lc3NhZ2Ugc2VudCB0byB0aGUgcXVldWU6IHttZXNzYWdlfVwiLCBtZXNzYWdlKTtcbiAgICAgICAgLy8gICAgfVxuICAgICAgICAvLyAgICBmaW5hbGx5XG4gICAgICAgIC8vICAgIHtcbiAgICAgICAgLy8gICAgICAgIGF3YWl0IHNlbmRlci5EaXNwb3NlQXN5bmMoKTtcbiAgICAgICAgLy8gICAgfVxuICAgICAgICAvL30iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiSVNlcnZpY2VCdXNDbGllbnQiLCAibWV0aG9kIjogIkNyZWF0ZVNlbmRlciJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogInN0cmluZyIsICJtZXRob2QiOiAiSXNOdWxsT3JFbXB0eSJ9LCB7InR5cGUiOiAic2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJzZW5kZXIiLCAibWV0aG9kIjogIkRpc3Bvc2VBc3luYyJ9XX19fSwgIkZ1bmN0aW9uMSI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb25maWd1cmUiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgb3ZlcnJpZGUgdm9pZCBDb25maWd1cmUoSUZ1bmN0aW9uc0hvc3RCdWlsZGVyIGJ1aWxkZXIpXG4gICAge1xuICAgICAgICB2YXIgY29udGV4dCA9IGJ1aWxkZXIuR2V0Q29udGV4dCgpO1xuICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9IGJ1aWxkZXIuR2V0Q29udGV4dCgpLkNvbmZpZ3VyYXRpb247XG5cbiAgICAgICAgYnVpbGRlci5TZXJ2aWNlcy5BZGRIdHRwQ2xpZW50KCk7XG5cbiAgICAgICAgdmFyIF9zdHJpbmdDb25uZWN0aW9uID0gXCJTZXJ2ZXI9dGNwOnNxbHNlcnZlcnBvY2VjYWQuZGF0YWJhc2Uud2luZG93cy5uZXQsMTQzMztJbml0aWFsIENhdGFsb2c9YXp1cmVzcWxwb2NlY2FkO1BlcnNpc3QgU2VjdXJpdHkgSW5mbz1GYWxzZTtVc2VyIElEPXNxbGFkbWludXNlcjtQYXNzd29yZD15P3ZlfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklGdW5jdGlvbnNIb3N0QnVpbGRlciIsICJtZXRob2QiOiAiR2V0Q29udGV4dCJ9LCB7InR5cGUiOiAiSUZ1bmN0aW9uc0hvc3RCdWlsZGVyIiwgIm1ldGhvZCI6ICJHZXRDb250ZXh0In0sIHsidHlwZSI6ICJTZXJ2aWNlcyIsICJtZXRob2QiOiAiQWRkSHR0cENsaWVudCJ9XX19fX0sICJFY2FkR2xvYm9wbGF5LlByb2Nlc3NpbmdPYnJhc011c2ljYWlzV29ya2VyIjogeyJQcm9ncmFtIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX0sICJXb3JrZXIiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiU3RhcnRQcm9jZXNzb3IiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgU3RhcnRQcm9jZXNzb3IoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsbGF0aW9uVG9rZW4pXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vU2VtYXBob3JlU2xpbSBzZW1hcGhvcmUgPSBuZXcgU2VtYXBob3JlU2xpbSgxNSk7XG5cbiAgICAgICAgICAgIHZhciByZWNlaXZlciA9IF9jbGllbnQuQ3JlYXRlUmVjZWl2ZXIoXCJyZXRlbmNhby1vYnJhLWZvbm9ncmFtYVwiLCBcIm9icmFzbXVzaWNhaXNcIiwgbmV3IFNlcnZpY2VCdXNSZWNlaXZlck9wdGlvbnMoKSB7IFByZWZldGNoQ291bnQgPSAxMDAsIFJlY2VpdmVNb2RlID0gU2VydmljZUJ1c1JlY2VpdmVNb2RlLlJlY2VpdmVBbmREZWxldGUgfSk7XG4gICAgICAgICAgICBpbnQgYmF0Y2hTaXplID0gNTA7XG4gICAgICAgICAgICBUaW1lU3BhbiBtYXhXYWl0VGltZSA9IFRpbWVTcGFuLkZyb21TZWNvbmRzKDE1KTtcblxuICAgICAgICAgICAgd2hpbGUgKCFjYW5jZWxsYXRpb25Ub2tlbi5Jc0NhbmNlbGxhdGlvblJlcXVlc3RlZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBMaXN0PFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2U+IGFjY3VtdWxhdGVkTWVzc2FnZXMgPSBuZXcgTGlzdDxTZXJ2aWNlQnVzUmVjZWl2ZWRNZXNzYWdlPigpO1xuICAgICAgICAgICAgICAgIERhdGVUaW1lIHN0YXJ0VGltZSA9IERhdGVUaW1lLlV0Y05vdztcblxuICAgICAgICAgICAgICAgIHdoaWxlIChhY2N1bXVsYXRlZE1lc3NhZ2VzLkNvdW50IDwgYmF0Y2hTaXplICYmIChEYXRlVGltZS5VdGNOb3cgLSBzdGFydFRpbWUpIDwgbWF4V2FpdFRpbWUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nVGltZSA9IG1heFdhaXRUaW1lIC0gKERhdGVUaW1lLlV0Y05vdyAtIHN0YXJ0VGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdUaW1lIDw9IFRpbWVTcGFuLlplcm8pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVjZWJlIG1lbnNhZ2VucyBjb20gbyB0ZW1wbyByZXN0YW50ZVxuICAgICAgICAgICAgICAgICAgICBJUmVhZE9ubHlMaXN0PFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2U+IG1lc3NhZ2VzID0gYXdhaXQgcmVjZWl2ZXIuUmVjZWl2ZU1lc3NhZ2VzQXN5bmMoYmF0Y2hTaXplLCByZW1haW5pbmdUaW1lKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZXMgIT0gbnVsbCAmJiBtZXNzYWdlcy5BbnkoKSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRNZXNzYWdlcy5BZGRSYW5nZShtZXNzYWdlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWFjY3VtdWxhdGVkTWVzc2FnZXMuQW55KCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShcIk5lbmh1bWEgbWVuc2FnZW0gcmVjZWJpZGEuIFRlbnRhbmRvIG5vdmFtZW50ZS4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdXNpbmcgKHZhciBzY29wZSA9IF9zY29wZUZhY3RvcnkuQ3JlYXRlU2NvcGUoKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZVNlcnZpY2UgPSBzY29wZS5TZXJ2aWNlUHJvdmlkZXIuR2V0UmVxdWlyZWRTZXJ2aWNlPElDb25zb2xpZGFjYW9DYWNoZVNlcnZpY2U+KCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhY2hlU2VydmljZS5DYXJyZWdhckNhY2hlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHRhc2tzID0gbmV3IExpc3Q8VGFzaz4oKTtcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzYXIgY2FkYSBtZW5zYWdlbSBlbSB1bWEgbm92YSB0aHJlYWRcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbWVzc2FnZSBpbiBhY2N1bXVsYXRlZE1lc3NhZ2VzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy9hd2FpdCBzZW1hcGhvcmUuV2FpdEFzeW5jKGNhbmNlbGxhdGlvblRva2VuKTsgLy8gQ29udHJvbGEgbyBuXHUwMGZhbWVybyBkZSB0aHJlYWRzXG4gICAgICAgICAgICAgICAgICAgIC8vdGFza3MuQWRkKFRhc2suUnVuKGFzeW5jICgpID0+XG4gICAgICAgICAgICAgICAgICAgIC8ve1xuICAgICAgICAgICAgICAgICAgICAvLyAgICB0cnlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgYXdhaXQgUHJvY2Vzc01lc3NhZ2VBc3luYyhyZWNlaXZlciwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgY2F0Y2ggKEV4Y2VwdGlvbiBleClcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJGYWxoYSBubyBwcm9jZXNzYW1lbnRvIGRhcyBjb25zb2xpZGFjb2VzXCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgYXdhaXQgU2VuZFRvRGVhZGxldHRlcihtZXNzYWdlLkJvZHkuVG9TdHJpbmcoKSwgZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGZpbmFsbHlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgc2VtYXBob3JlLlJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgICAgICAgICAvL30sIGNhbmNlbGxhdGlvblRva2VuKSk7XG4gICAgICAgICAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9jZXNzTWVzc2FnZUFzeW5jKHJlY2VpdmVyLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0Vycm9yKGV4LCBcIkZhbGhhIG5vIHByb2Nlc3NhbWVudG8gZGFzIGNvbnNvbGlkYWNvZXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBTZW5kVG9EZWFkbGV0dGVyKG1lc3NhZ2UuQm9keS5Ub1N0cmluZygpLCBleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL2F3YWl0IFRhc2suV2hlbkFsbCh0YXNrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJQ2xpZW50IiwgIm1ldGhvZCI6ICJDcmVhdGVSZWNlaXZlciJ9LCB7InR5cGUiOiAiSVNjb3BlRmFjdG9yeSIsICJtZXRob2QiOiAiQ3JlYXRlU2NvcGUifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0Vycm9yIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiVGltZVNwYW4iLCAibWV0aG9kIjogIkZyb21TZWNvbmRzIn0sIHsidHlwZSI6ICJyZWNlaXZlciIsICJtZXRob2QiOiAiUmVjZWl2ZU1lc3NhZ2VzQXN5bmMifSwgeyJ0eXBlIjogIm1lc3NhZ2VzIiwgIm1ldGhvZCI6ICJBbnkifSwgeyJ0eXBlIjogImFjY3VtdWxhdGVkTWVzc2FnZXMiLCAibWV0aG9kIjogIkFkZFJhbmdlIn0sIHsidHlwZSI6ICJhY2N1bXVsYXRlZE1lc3NhZ2VzIiwgIm1ldGhvZCI6ICJBbnkifSwgeyJ0eXBlIjogIkNvbnNvbGUiLCAibWV0aG9kIjogIldyaXRlTGluZSJ9LCB7InR5cGUiOiAiY2FjaGVTZXJ2aWNlIiwgIm1ldGhvZCI6ICJDYXJyZWdhckNhY2hlIn0sIHsidHlwZSI6ICJzZW1hcGhvcmUiLCAibWV0aG9kIjogIldhaXRBc3luYyJ9LCB7InR5cGUiOiAidGFza3MiLCAibWV0aG9kIjogIkFkZCJ9LCB7InR5cGUiOiAiVGFzayIsICJtZXRob2QiOiAiUnVuIn0sIHsidHlwZSI6ICJCb2R5IiwgIm1ldGhvZCI6ICJUb1N0cmluZyJ9LCB7InR5cGUiOiAic2VtYXBob3JlIiwgIm1ldGhvZCI6ICJSZWxlYXNlIn0sIHsidHlwZSI6ICJCb2R5IiwgIm1ldGhvZCI6ICJUb1N0cmluZyJ9LCB7InR5cGUiOiAiVGFzayIsICJtZXRob2QiOiAiV2hlbkFsbCJ9XX0sICJQcm9jZXNzTWVzc2FnZUFzeW5jIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSBhc3luYyBUYXNrIFByb2Nlc3NNZXNzYWdlQXN5bmMoU2VydmljZUJ1c1JlY2VpdmVyIHJlY2VpdmVyLCBTZXJ2aWNlQnVzUmVjZWl2ZWRNZXNzYWdlIG1lc3NhZ2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIENhbmNlbGxhdGlvblRva2VuU291cmNlIHJlbmV3YWxUb2tlblNvdXJjZSA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VCb2R5ID0gbWVzc2FnZS5Cb2R5LlRvU3RyaW5nKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIEF1ZGlvVmlzdWFsR2xvYm9wbGF5PyBhdWRpb1Zpc3VhbCA9IEpzb25TZXJpYWxpemVyLkRlc2VyaWFsaXplPEF1ZGlvVmlzdWFsR2xvYm9wbGF5PihtZXNzYWdlQm9keSk7XG5cbiAgICAgICAgICAgICAgICB1c2luZyAodmFyIHNjb3BlID0gX3Njb3BlRmFjdG9yeS5DcmVhdGVTY29wZSgpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdXNpbmcgKHZhciBvcGVyYXRpb24gPSBfdGVsZW1ldHJ5Q2xpZW50LlN0YXJ0T3BlcmF0aW9uPFJlcXVlc3RUZWxlbWV0cnk+KFwiUHJvY2Vzc2luZ09icmFzV29ya2VyXCIpKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsY3VsYXJSb2xTZXJ2aWNlID0gc2NvcGUuU2VydmljZVByb3ZpZGVyLkdldFJlcXVpcmVkU2VydmljZTxJQ2FsY3VsYU9icmFTZXJ2aWNlPigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsY3VsYXJSb2xTZXJ2aWNlLkNhbGN1bGFPYnJhc011c2ljYWlzKGF1ZGlvVmlzdWFsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1ZGlvVmlzdWFsICE9IG51bGwgJiYgYXVkaW9WaXN1YWwuT2JyYXNNdXNpY2FpcyAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuVHJhY2tFdmVudChcIlByb2Nlc3NhbWVudG9PYnJhXCIsIG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBcIm9icmFzXCIsIChhdWRpb1Zpc3VhbD8uT2JyYXNNdXNpY2Fpcz8uQ291bnQoKSA/PyAwKS5Ub1N0cmluZygpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgXCJjb2RDYXBpRXBpc29kaW9cIiwgYXVkaW9WaXN1YWw/LkNvZENhcGlFcGlzb2Rpbz8uVG9TdHJpbmcoKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IFwiY29kT2JyYUF1ZGlvRWNhZFwiLCBhdWRpb1Zpc3VhbD8uQ29kT2JyYUF1ZGlvRWNhZC5Ub1N0cmluZygpIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuU3RvcE9wZXJhdGlvbihvcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfbG9nZ2VyLkxvZ0Vycm9yKGV4LCBcIkZhbGhhIG5vIHByb2Nlc3NhbWVudG8gZGFzIG9icmFzXCIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IFNlbmRUb0RlYWRsZXR0ZXIobWVzc2FnZUJvZHksIGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklTY29wZUZhY3RvcnkiLCAibWV0aG9kIjogIkNyZWF0ZVNjb3BlIn0sIHsidHlwZSI6ICJJVGVsZW1ldHJ5Q2xpZW50IiwgIm1ldGhvZCI6ICJUcmFja0V2ZW50In0sIHsidHlwZSI6ICJJVGVsZW1ldHJ5Q2xpZW50IiwgIm1ldGhvZCI6ICJTdG9wT3BlcmF0aW9uIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiQm9keSIsICJtZXRob2QiOiAiVG9TdHJpbmcifSwgeyJ0eXBlIjogImNhbGN1bGFyUm9sU2VydmljZSIsICJtZXRob2QiOiAiQ2FsY3VsYU9icmFzTXVzaWNhaXMifSwgeyJ0eXBlIjogIkNvZE9icmFBdWRpb0VjYWQiLCAibWV0aG9kIjogIlRvU3RyaW5nIn1dfSwgIlNlbmRUb0RlYWRsZXR0ZXIiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgU2VuZFRvRGVhZGxldHRlcihzdHJpbmcgbWVzc2FnZSwgRXhjZXB0aW9uIGV4KVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24gPSBleC5TdGFja1RyYWNlO1xuXG4gICAgICAgICAgICBpZiAoZXguSW5uZXJFeGNlcHRpb24gIT0gbnVsbClcbiAgICAgICAgICAgICAgICBkZWFkTGV0dGVyRXJyb3JEZXNjcmlwdGlvbiArPSAkXCIge2V4LklubmVyRXhjZXB0aW9uLlRvU3RyaW5nKCl9XCI7XG5cbiAgICAgICAgICAgIGRlYWRMZXR0ZXJFcnJvckRlc2NyaXB0aW9uID0gZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24/Lkxlbmd0aCA+IDQwMDAgPyBkZWFkTGV0dGVyRXJyb3JEZXNjcmlwdGlvbj8uU3Vic3RyaW5nKDAsIDQwMDApIDogZGVhZExldHRlckVycm9yRGVzY3JpcHRpb247XG5cbiAgICAgICAgICAgIHZhciBmYWlsZWRNZXNzYWdlID0gbmV3IFNlcnZpY2VCdXNNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Qcm9wZXJ0aWVzID0geyB7IFwiRXhjZXB0aW9uXCIsIGV4Lk1lc3NhZ2UgfSwgeyBcIlN0YWNrVHJhY2VcIiwgZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24gfSB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBFbnZpZSBhIG1lbnNhZ2VtIHBhcmEgYSBmaWxhIGRlIGZhbGhhcyBwZXJzb25hbGl6YWRhXG4gICAgICAgICAgICBhd2FpdCBfc2VuZGVyLlNlbmRNZXNzYWdlQXN5bmMoZmFpbGVkTWVzc2FnZSk7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJU2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJJbm5lckV4Y2VwdGlvbiIsICJtZXRob2QiOiAiVG9TdHJpbmcifV19fX19LCAiRWNhZEdsb2JvcGxheS5Qcm9jZXNzaW5nV29ya2VyIjogeyJQcm9ncmFtIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX0sICJXb3JrZXIiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiU3RhcnRQcm9jZXNzb3IiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgU3RhcnRQcm9jZXNzb3IoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsbGF0aW9uVG9rZW4pXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vU2VtYXBob3JlU2xpbSBzZW1hcGhvcmUgPSBuZXcgU2VtYXBob3JlU2xpbSgyMCk7XG5cbiAgICAgICAgICAgIHZhciByZWNlaXZlciA9IF9jbGllbnQuQ3JlYXRlUmVjZWl2ZXIoXCJyZXRlbmNhb1wiLCBcInJldGVuY2FvXCIsIG5ldyBTZXJ2aWNlQnVzUmVjZWl2ZXJPcHRpb25zKCkgeyBQcmVmZXRjaENvdW50ID0gMTAwLCBSZWNlaXZlTW9kZSA9IFNlcnZpY2VCdXNSZWNlaXZlTW9kZS5SZWNlaXZlQW5kRGVsZXRlIH0pO1xuICAgICAgICAgICAgaW50IGJhdGNoU2l6ZSA9IDUwO1xuICAgICAgICAgICAgVGltZVNwYW4gbWF4V2FpdFRpbWUgPSBUaW1lU3Bhbi5Gcm9tU2Vjb25kcygxNSk7XG5cblxuICAgICAgICAgICAgd2hpbGUgKCFjYW5jZWxsYXRpb25Ub2tlbi5Jc0NhbmNlbGxhdGlvblJlcXVlc3RlZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBMaXN0PFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2U+IGFjY3VtdWxhdGVkTWVzc2FnZXMgPSBuZXcgTGlzdDxTZXJ2aWNlQnVzUmVjZWl2ZWRNZXNzYWdlPigpO1xuICAgICAgICAgICAgICAgIERhdGVUaW1lIHN0YXJ0VGltZSA9IERhdGVUaW1lLlV0Y05vdztcblxuICAgICAgICAgICAgICAgIHdoaWxlIChhY2N1bXVsYXRlZE1lc3NhZ2VzLkNvdW50IDwgYmF0Y2hTaXplICYmIChEYXRlVGltZS5VdGNOb3cgLSBzdGFydFRpbWUpIDwgbWF4V2FpdFRpbWUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nVGltZSA9IG1heFdhaXRUaW1lIC0gKERhdGVUaW1lLlV0Y05vdyAtIHN0YXJ0VGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdUaW1lIDw9IFRpbWVTcGFuLlplcm8pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVjZWJlIG1lbnNhZ2VucyBjb20gbyB0ZW1wbyByZXN0YW50ZVxuICAgICAgICAgICAgICAgICAgICBJUmVhZE9ubHlMaXN0PFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2U+IG1lc3NhZ2VzID0gYXdhaXQgcmVjZWl2ZXIuUmVjZWl2ZU1lc3NhZ2VzQXN5bmMoYmF0Y2hTaXplLCByZW1haW5pbmdUaW1lKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZXMgIT0gbnVsbCAmJiBtZXNzYWdlcy5BbnkoKSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRNZXNzYWdlcy5BZGRSYW5nZShtZXNzYWdlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWFjY3VtdWxhdGVkTWVzc2FnZXMuQW55KCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShcIk5lbmh1bWEgbWVuc2FnZW0gcmVjZWJpZGEuIFRlbnRhbmRvIG5vdmFtZW50ZS4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUHJvY2Vzc2FyIGNhZGEgbWVuc2FnZW0gZW0gdW1hIG5vdmEgdGhyZWFkXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG1lc3NhZ2UgaW4gYWNjdW11bGF0ZWRNZXNzYWdlcylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vYXdhaXQgc2VtYXBob3JlLldhaXRBc3luYyhjYW5jZWxsYXRpb25Ub2tlbik7IC8vIENvbnRyb2xhIG8gblx1MDBmYW1lcm8gZGUgdGhyZWFkc1xuXG4gICAgICAgICAgICAgICAgICAgIC8vXyA9IFRhc2suUnVuKGFzeW5jICgpID0+XG4gICAgICAgICAgICAgICAgICAgIC8ve1xuICAgICAgICAgICAgICAgICAgICAvLyAgICB0cnlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgYXdhaXQgUHJvY2Vzc01lc3NhZ2VBc3luYyhyZWNlaXZlciwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgY2F0Y2ggKEV4Y2VwdGlvbiBleClcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJGYWxoYSBubyBwcm9jZXNzYW1lbnRvIGRhcyBjb25zb2xpZGFjb2VzXCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgYXdhaXQgU2VuZFRvRGVhZGxldHRlcihtZXNzYWdlLkJvZHkuVG9TdHJpbmcoKSwgZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGZpbmFsbHlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgc2VtYXBob3JlLlJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgICAgICAgICAvL30sIGNhbmNlbGxhdGlvblRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb2Nlc3NNZXNzYWdlQXN5bmMocmVjZWl2ZXIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuTG9nRXJyb3IoZXgsIFwiRmFsaGEgbm8gcHJvY2Vzc2FtZW50byBkYXMgY29uc29saWRhY29lc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFNlbmRUb0RlYWRsZXR0ZXIobWVzc2FnZS5Cb2R5LlRvU3RyaW5nKCksIGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklDbGllbnQiLCAibWV0aG9kIjogIkNyZWF0ZVJlY2VpdmVyIn0sIHsidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nRXJyb3IifSwgeyJ0eXBlIjogIlRpbWVTcGFuIiwgIm1ldGhvZCI6ICJGcm9tU2Vjb25kcyJ9LCB7InR5cGUiOiAicmVjZWl2ZXIiLCAibWV0aG9kIjogIlJlY2VpdmVNZXNzYWdlc0FzeW5jIn0sIHsidHlwZSI6ICJtZXNzYWdlcyIsICJtZXRob2QiOiAiQW55In0sIHsidHlwZSI6ICJhY2N1bXVsYXRlZE1lc3NhZ2VzIiwgIm1ldGhvZCI6ICJBZGRSYW5nZSJ9LCB7InR5cGUiOiAiYWNjdW11bGF0ZWRNZXNzYWdlcyIsICJtZXRob2QiOiAiQW55In0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifSwgeyJ0eXBlIjogInNlbWFwaG9yZSIsICJtZXRob2QiOiAiV2FpdEFzeW5jIn0sIHsidHlwZSI6ICJUYXNrIiwgIm1ldGhvZCI6ICJSdW4ifSwgeyJ0eXBlIjogIkJvZHkiLCAibWV0aG9kIjogIlRvU3RyaW5nIn0sIHsidHlwZSI6ICJzZW1hcGhvcmUiLCAibWV0aG9kIjogIlJlbGVhc2UifSwgeyJ0eXBlIjogIkJvZHkiLCAibWV0aG9kIjogIlRvU3RyaW5nIn1dfSwgIlByb2Nlc3NNZXNzYWdlQXN5bmMiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgUHJvY2Vzc01lc3NhZ2VBc3luYyhTZXJ2aWNlQnVzUmVjZWl2ZXIgcmVjZWl2ZXIsIFNlcnZpY2VCdXNSZWNlaXZlZE1lc3NhZ2UgbWVzc2FnZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VCb2R5ID0gbWVzc2FnZS5Cb2R5LlRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAgeyAgICBcbiAgICAgICAgICAgICAgICBBdWRpb1Zpc3VhbEdsb2JvcGxheT8gYXVkaW9WaXN1YWwgPSBKc29uU2VyaWFsaXplci5EZXNlcmlhbGl6ZTxBdWRpb1Zpc3VhbEdsb2JvcGxheT4obWVzc2FnZUJvZHkpO1xuXG4gICAgICAgICAgICAgICAgdXNpbmcgKHZhciBzY29wZSA9IF9zY29wZUZhY3RvcnkuQ3JlYXRlU2NvcGUoKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgb3BlcmF0aW9uID0gX3RlbGVtZXRyeUNsaWVudC5TdGFydE9wZXJhdGlvbjxSZXF1ZXN0VGVsZW1ldHJ5PihcIlByb2Nlc3NpbmdSZXRlbmNhb1dvcmtlclwiKSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGN1bGFyUm9sU2VydmljZSA9IHNjb3BlLlNlcnZpY2VQcm92aWRlci5HZXRSZXF1aXJlZFNlcnZpY2U8SUNhbGN1bGFyUm9sU2VydmljZT4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhbGN1bGFyUm9sU2VydmljZS5DYWxjdWxhRUdlcmFSZXRlbmNhbyhhdWRpb1Zpc3VhbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF90ZWxlbWV0cnlDbGllbnQuVHJhY2tNZXRyaWMoXCJQYXlsb2FkQXVkaW9WaXN1YWxcIiwgYXVkaW9WaXN1YWwuQ29kT2JyYUF1ZGlvRWNhZCwgbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+IHsgeyBcIkF1ZGlvVmlzdWFsXCIsIG1lc3NhZ2VCb2R5IH0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGVsZW1ldHJ5Q2xpZW50LlN0b3BPcGVyYXRpb24ob3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgXCJGYWxoYSBubyBwcm9jZXNzYW1lbnRvIGRhcyBjb25zb2xpZGFjb2VzXCIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IFNlbmRUb0RlYWRsZXR0ZXIobWVzc2FnZUJvZHksIGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklTY29wZUZhY3RvcnkiLCAibWV0aG9kIjogIkNyZWF0ZVNjb3BlIn0sIHsidHlwZSI6ICJJVGVsZW1ldHJ5Q2xpZW50IiwgIm1ldGhvZCI6ICJUcmFja01ldHJpYyJ9LCB7InR5cGUiOiAiSVRlbGVtZXRyeUNsaWVudCIsICJtZXRob2QiOiAiU3RvcE9wZXJhdGlvbiJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nRXJyb3IifSwgeyJ0eXBlIjogIkJvZHkiLCAibWV0aG9kIjogIlRvU3RyaW5nIn0sIHsidHlwZSI6ICJjYWxjdWxhclJvbFNlcnZpY2UiLCAibWV0aG9kIjogIkNhbGN1bGFFR2VyYVJldGVuY2FvIn1dfSwgIlNlbmRUb0RlYWRsZXR0ZXIiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgU2VuZFRvRGVhZGxldHRlcihzdHJpbmcgbWVzc2FnZSwgRXhjZXB0aW9uIGV4KVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24gPSBleC5TdGFja1RyYWNlO1xuXG4gICAgICAgICAgICBpZiAoZXguSW5uZXJFeGNlcHRpb24gIT0gbnVsbClcbiAgICAgICAgICAgICAgICBkZWFkTGV0dGVyRXJyb3JEZXNjcmlwdGlvbiArPSAkXCIge2V4LklubmVyRXhjZXB0aW9uLlRvU3RyaW5nKCl9XCI7XG5cbiAgICAgICAgICAgIGRlYWRMZXR0ZXJFcnJvckRlc2NyaXB0aW9uID0gZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24/Lkxlbmd0aCA+IDQwMDAgPyBkZWFkTGV0dGVyRXJyb3JEZXNjcmlwdGlvbj8uU3Vic3RyaW5nKDAsIDQwMDApIDogZGVhZExldHRlckVycm9yRGVzY3JpcHRpb247XG5cbiAgICAgICAgICAgIHZhciBmYWlsZWRNZXNzYWdlID0gbmV3IFNlcnZpY2VCdXNNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Qcm9wZXJ0aWVzID0geyB7IFwiRXhjZXB0aW9uXCIsIGV4Lk1lc3NhZ2UgfSwgeyBcIlN0YWNrVHJhY2VcIiwgZGVhZExldHRlckVycm9yRGVzY3JpcHRpb24gfSB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBFbnZpZSBhIG1lbnNhZ2VtIHBhcmEgYSBmaWxhIGRlIGZhbGhhcyBwZXJzb25hbGl6YWRhXG4gICAgICAgICAgICBhd2FpdCBfc2VuZGVyLlNlbmRNZXNzYWdlQXN5bmMoZmFpbGVkTWVzc2FnZSk7XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJU2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJJbm5lckV4Y2VwdGlvbiIsICJtZXRob2QiOiAiVG9TdHJpbmcifV19fX19LCAiRWNhZEdsb2JvcGxheS5SZWxhdG9yaW9QZXJmb3JtYW5jZSI6IHsiV29ya2VyIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX19LCAiRWNhZEdsb2JvUGxheS5UZXN0IjogeyJDYWxjdWxhRm9ub2dyYW1hU2VydmljZXNUZXN0cyI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDYWxjdWxhRm9ub2dyYW1hc19WYWxpZEF1ZGlvVmlzdWFsX1ZhbGlkYXRlc0NhbGN1bGF0aW9uUmVzdWx0cyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBhc3luYyBUYXNrIENhbGN1bGFGb25vZ3JhbWFzX1ZhbGlkQXVkaW9WaXN1YWxfVmFsaWRhdGVzQ2FsY3VsYXRpb25SZXN1bHRzKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgdmFyIGF1ZGlvVmlzdWFsID0gbmV3IEF1ZGlvVmlzdWFsR2xvYm9wbGF5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgRm9ub2dyYW1hcyA9IG5ldyBMaXN0PE11c2ljYUF1ZGlvPlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5ldyBNdXNpY2FBdWRpb1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgVGlwU2l0dWFjYW9Gb25vID0gXCJMXCIsXG4gICAgICAgICAgICAgICAgICAgIEZvbm9ncmFtYSA9IDEyMyxcbiAgICAgICAgICAgICAgICAgICAgUXRkRHVyYWNhb011c2ljYSA9IDEyMCAvLyBEdXJhXHUwMGU3XHUwMGUzbyBkYSBtXHUwMGZhc2ljYSBlbSBzZWd1bmRvc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgVGl0dWxhcmVzRm9ub2dyYW1hID0gbmV3IExpc3Q8VGl0dWxhckZvbm9ncmFtYT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXcgVGl0dWxhckZvbm9ncmFtYVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgQ29kRm9ub2dyYW1hID0gMTIzLFxuICAgICAgICAgICAgICAgICAgICBQY3RQYXJ0aWNpcGFjYW8gPSA1MCAvLyBQYXJ0aWNpcGFcdTAwZTdcdTAwZTNvIGRvIHRpdHVsYXIgKDUwJSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIENvZENhcGlFcGlzb2RpbyA9IDEsXG4gICAgICAgICAgICAgICAgSW5kU2l0dWFjYW9BdWRpb3Zpc3VhbCA9IFwiUFwiLFxuICAgICAgICAgICAgICAgIENvZGlnb0Nvc29saWRhY2FvQ0MgPSAxMDAsXG4gICAgICAgICAgICAgICAgQ29kaWdvQ29zb2xpZGFjYW9DQ0R0bCA9IDIwMCxcbiAgICAgICAgICAgICAgICBOcm9GYXRvckRpc3RyaWJ1aWNhbyA9IDEwLCAvLyBOXHUwMGZhbWVybyBkZSBleGVjdVx1MDBlN1x1MDBmNWVzXG4gICAgICAgICAgICAgICAgQ29tcGV0ZW5jaWEgPSBuZXcgQ29tcGV0ZW5jaWFcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFZsclZlcmJhQ29uZXhhID0gMTAwMG0sXG4gICAgICAgICAgICAgICAgICAgIFZsckZhdG9yRGlzdHJpYnVpY2FvID0gMW0sXG4gICAgICAgICAgICAgICAgICAgIFZlcmJhVG90YWwgPSA1MDAwbVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBjb25zb2xpZGFjYW8gPSBuZXcgRGlzdENvbnNvbGlkYWNhb0R0bFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIENvZENvbnNvbGlkRGlzdHJpYkR0bCA9IGF1ZGlvVmlzdWFsLkNvZGlnb0Nvc29saWRhY2FvQ0NEdGwuVmFsdWVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIF9jYWNoZVNlcnZpY2VNb2NrLlNldHVwKHggPT4geC5CdXNjYXJDb25zb2xpZGFjYW8oSXQuSXNBbnk8aW50PigpKSlcbiAgICAgICAgICAgICAgICAuUmV0dXJucyhjb25zb2xpZGFjYW8pO1xuXG4gICAgICAgICAgICAvLyBDYWxjdWxhIG9zIHZhbG9yZXMgZXNwZXJhZG9zIG1hbnVhbG1lbnRlIHBhcmEgY29tcGFyYVx1MDBlN1x1MDBlM29cbiAgICAgICAgICAgIHZhciBlc3BlcmFkb1JlbmRpbWVudG8gPSAoYXVkaW9WaXN1YWwuTnJvRmF0b3JEaXN0cmlidWljYW8gKiAxMjApICogY29uc29saWRhY2FvLlBvbnRvOyAvLyAxMCBleGVjdVx1MDBlN1x1MDBmNWVzICogMTIwIHNlZ3VuZG9zICogMC41IHBvbnRvXG4gICAgICAgICAgICB2YXIgZXNwZXJhZG9WYWxvclRpdHVsYXIgPSAoZXNwZXJhZG9SZW5kaW1lbnRvICogNTApIC8gMTAwO1xuXG4gICAgICAgICAgICAvLyBBY3RcbiAgICAgICAgICAgIGF3YWl0IF9jYWxjdWxhRm9ub2dyYW1hU2VydmljZS5DYWxjdWxhRm9ub2dyYW1hcyhhdWRpb1Zpc3VhbCk7XG5cbiAgICAgICAgICAgIC8vIEFzc2VydFxuICAgICAgICAgICAgX3JldGVuY2FvU2VydmljZU1vY2suVmVyaWZ5KHggPT4geC5SZXRlbmNhb1BvclRpdHVsYXJGb25vZ3JhbWFDb21QZW5kXHUwMGVhbmNpYShcbiAgICAgICAgICAgICAgICBJdC5JczxBdWRpb1Zpc3VhbEdsb2JvcGxheT4oYSA9PiBhID09IGF1ZGlvVmlzdWFsKSxcbiAgICAgICAgICAgICAgICBJdC5JczxUaXR1bGFyRm9ub2dyYW1hPih0ID0+IHQuUGN0UGFydGljaXBhY2FvID09IDUwKSxcbiAgICAgICAgICAgICAgICBJdC5JczxNdXNpY2FBdWRpbz4obSA9PiBtLkZvbm9ncmFtYSA9PSAxMjMpLFxuICAgICAgICAgICAgICAgIEl0LklzQW55PElFbnVtZXJhYmxlPENvbnNvbGlkYWNhb0NDPj4oKSxcbiAgICAgICAgICAgICAgICBJdC5Jc0FueTxzdHJpbmc+KCksXG4gICAgICAgICAgICAgICAgSXQuSXNBbnk8RGlzdENvbnNvbGlkYWNhb0R0bD4oKSksIFRpbWVzLk9uY2UpO1xuXG4gICAgICAgICAgICAvLyBBcXVpIHZlcmlmaWNhbW9zIHF1ZSBvIGNcdTAwZTFsY3VsbyBkb3MgdmFsb3JlcyBlc3RcdTAwZTEgY29ycmV0b1xuICAgICAgICAgICAgQXNzZXJ0LkVxdWFsKGVzcGVyYWRvUmVuZGltZW50bywgNjAwKTtcbiAgICAgICAgICAgIEFzc2VydC5FcXVhbChlc3BlcmFkb1ZhbG9yVGl0dWxhciwgMzAwKTtcbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklDYWNoZVNlcnZpY2VNb2NrIiwgIm1ldGhvZCI6ICJTZXR1cCJ9LCB7InR5cGUiOiAiSUNhbGN1bGFGb25vZ3JhbWFTZXJ2aWNlIiwgIm1ldGhvZCI6ICJDYWxjdWxhRm9ub2dyYW1hcyJ9LCB7InR5cGUiOiAiSVJldGVuY2FvU2VydmljZU1vY2siLCAibWV0aG9kIjogIlZlcmlmeSJ9LCB7InR5cGUiOiAieCIsICJtZXRob2QiOiAiQnVzY2FyQ29uc29saWRhY2FvIn0sIHsidHlwZSI6ICJ4IiwgIm1ldGhvZCI6ICJSZXRlbmNhb1BvclRpdHVsYXJGb25vZ3JhbWFDb21QZW5kXHUwMGVhbmNpYSJ9LCB7InR5cGUiOiAiQXNzZXJ0IiwgIm1ldGhvZCI6ICJFcXVhbCJ9LCB7InR5cGUiOiAiQXNzZXJ0IiwgIm1ldGhvZCI6ICJFcXVhbCJ9XX19fX0sICJFY2FkR2xvYm9wbGF5LlRpdHVsYXJlc0Zvbm9ncmFtYSI6IHsiR2V0VGl0dWxhcmVzRm9ub2dyYW1hIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IlJ1biI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBzdGF0aWMgYXN5bmMgVGFzayBSdW4oXG4gICAgICAgICAgICBbU2VydmljZUJ1c1RyaWdnZXIoXCJRdWV1ZU5hbWVcIiwgQ29ubmVjdGlvbiA9IFwiTmFtZXNwYWNlQ29ubmVjdGlvblN0cmluZ1wiKV0gc3RyaW5nIGlucHV0UXVldWUsXG4gICAgICAgICAgICBbU2VydmljZUJ1cyhcIk91dHB1dFF1ZXVlTmFtZVwiLCBDb25uZWN0aW9uID0gXCJOYW1lc3BhY2VDb25uZWN0aW9uU3RyaW5nXCIpXSBJQXN5bmNDb2xsZWN0b3I8c3RyaW5nPiBvdXRwdXRRdWV1ZSxcbiAgICAgICAgICAgIElMb2dnZXIgbG9nKVxuICAgICAgICB7XG4gICAgICAgICAgICBsb2cuTG9nSW5mb3JtYXRpb24oJFwiQyMgU2VydmljZUJ1cyBxdWV1ZSB0cmlnZ2VyIGZ1bmN0aW9uIHByb2Nlc3NlZCBtZXNzYWdlOiB7aW5wdXRRdWV1ZX1cIik7XG5cbiAgICAgICAgICAgIHZhciBfc3RyaW5nQ29ubmVjdGlvbiA9IFwiU2VydmVyPXRjcDplY2FkcG9kc3luYXBzZS5zcWwuYXp1cmVzeW5hcHNlLm5ldCwxNDMzO0luaXRpYWwgQ2F0YWxvZz1zcWxwb29scG9jZWNhZDtQZXJzaXN0IFNlY3VyaXR5IEluZm89RmFsc2U7VXNlciBJRD1zcWxhZG1pbnVzZXI7UGFzc3dvcmQ9c20jKU1nXnhEfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogImxvZyIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifV19fX0sICJTdGFydHVwIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IkNvbmZpZ3VyZSI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyBvdmVycmlkZSB2b2lkIENvbmZpZ3VyZShJRnVuY3Rpb25zSG9zdEJ1aWxkZXIgYnVpbGRlcilcbiAgICB7XG4gICAgICAgIGJ1aWxkZXIuU2VydmljZXMuQWRkSHR0cENsaWVudCgpO1xuICAgICAgICB2YXIgY29ubmVjdGlvblNlcnZpY2VCdXMgPSBcIkVuZHBvaW50PXNiOi8vYXNiLXBvYy1lY2FkLnNlcnZpY2VidXMud2luZG93cy5uZXQvO1NoYXJlZEFjY2Vzc0tleU5hbWU9YXNiLXBvYy1lY2FkLXJ1bGU7U2hhcmVkQWNjZXNzS2V5PW5ncmZ2Z28rMHFrOHROVWo1VUJXRFJ6VDM1TDNVSnRRYytBU2JIMytrZEk9XCI7XG4gICAgICAgIHZhciBxdWV1ZVNlcnZpY2VCdXMgPSBcInRpdHVsYXJlc2Zvbm9ncmFtYWdsb2JvcGxheVwiO1xuXG4gICAgICAgIGJ1aWxkZXIuU2VydmljZXMuQWRkU2NvcGVkPFNlcnZpY2VidXNDbGllbnQ+KHggPT4gbmV3IFNlcnZpY2VidXNDbGllbnQoY29ubmVjdGlvblNlcnZpY2VCdXMsIHF1ZXVlU2VydmljZUJ1cykpO1xuICAgICAgICBidWlsZGVyLlNlcnZpY2VzLkFkZFNjb3BlZDxJT2J0ZXJEYWRvc1NlcnZpY2UsIE9idGVyRGFkb3NTZXJ2aWNlPigpO1xuICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJTZXJ2aWNlcyIsICJtZXRob2QiOiAiQWRkSHR0cENsaWVudCJ9XX19fX0sICJFY2FkR2xvYm9wbGF5LlRpdHVsYXJlc09icmFNdXNpY2FsIjogeyJHZXRUaXR1bGFyZXNPYnJhTXVzaWNhbCI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJSdW4iOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgc3RhdGljIGFzeW5jIFRhc2sgUnVuKFxuICAgICAgICAgICAgW1NlcnZpY2VCdXNUcmlnZ2VyKFwiUXVldWVOYW1lXCIsIENvbm5lY3Rpb24gPSBcIk5hbWVzcGFjZUNvbm5lY3Rpb25TdHJpbmdcIildIHN0cmluZyBpbnB1dFF1ZXVlLFxuICAgICAgICAgICAgW1NlcnZpY2VCdXMoXCJPdXRwdXRRdWV1ZU5hbWVcIiwgQ29ubmVjdGlvbiA9IFwiTmFtZXNwYWNlQ29ubmVjdGlvblN0cmluZ1wiKV0gSUFzeW5jQ29sbGVjdG9yPHN0cmluZz4gb3V0cHV0UXVldWUsXG4gICAgICAgICAgICBJTG9nZ2VyIGxvZylcbiAgICAgICAge1xuICAgICAgICAgICAgbG9nLkxvZ0luZm9ybWF0aW9uKCRcIkMjIFNlcnZpY2VCdXMgcXVldWUgdHJpZ2dlciBmdW5jdGlvbiBwcm9jZXNzZWQgbWVzc2FnZToge2lucHV0UXVldWV9XCIpO1xuXG4gICAgICAgICAgICB2YXIgX3N0cmluZ0Nvbm5lY3Rpb24gPSBcIlNlcnZlcj10Y3A6ZWNhZHBvZHN5bmFwc2Uuc3FsLmF6dXJlc3luYXBzZS5uZXQsMTQzMztJbml0aWFsIENhdGFsb2c9c3FscG9vbHBvY2VjYWQ7UGVyc2lzdCBTZWN1cml0eSBJbmZvPUZhbHNlO1VzZXIgSUQ9c3FsYWRtaW51c2VyO1Bhc3N3b3JkPXNtIylNZ154RH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJsb2ciLCAibWV0aG9kIjogIkxvZ0luZm9ybWF0aW9uIn1dfX19LCAiU3RhcnR1cCI6IHsidHlwZSI6ICJjbGFzcyIsICJtZW1iZXJzIjogeyJDb25maWd1cmUiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwdWJsaWMgb3ZlcnJpZGUgdm9pZCBDb25maWd1cmUoSUZ1bmN0aW9uc0hvc3RCdWlsZGVyIGJ1aWxkZXIpXG4gICAge1xuICAgICAgICBidWlsZGVyLlNlcnZpY2VzLkFkZEh0dHBDbGllbnQoKTtcblxuICAgICAgICB2YXIgY29ubmVjdGlvblNlcnZpY2VCdXMgPSBcIkVuZHBvaW50PXNiOi8vYXNiLXBvYy1lY2FkLnNlcnZpY2VidXMud2luZG93cy5uZXQvO1NoYXJlZEFjY2Vzc0tleU5hbWU9YXNiLXBvYy1lY2FkLXJ1bGU7U2hhcmVkQWNjZXNzS2V5PW5ncmZ2Z28rMHFrOHROVWo1VUJXRFJ6VDM1TDNVSnRRYytBU2JIMytrZEk9XCI7XG4gICAgICAgIHZhciBxdWV1ZVNlcnZpY2VCdXMgPSBcInRpdHVsYXJlc29icmFtdXNpY2FsZ2xvYm9wbGF5XCI7XG5cbiAgICAgICAgYnVpbGRlci5TZXJ2aWNlcy5BZGRTY29wZWQ8U2VydmljZWJ1c0NsaWVudD4oeCA9PiBuZXcgU2VydmljZWJ1c0NsaWVudChjb25uZWN0aW9uU2VydmljZUJ1cywgcXVldWVTZXJ2aWNlQnVzKSk7XG4gICAgICAgIGJ1aWxkZXIuU2VydmljZXMuQWRkU2NvcGVkPElPYnRlckRhZG9zU2VydmljZSwgT2J0ZXJEYWRvc1NlcnZpY2U+KCk7XG4gICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIlNlcnZpY2VzIiwgIm1ldGhvZCI6ICJBZGRIdHRwQ2xpZW50In1dfX19fSwgIkVjYWRHbG9ib1BsYXlPYnJhc011c2ljYWlzIjogeyJQcm9ncmFtIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX0sICJXb3JrZXIiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHsiUHJvY2Vzc01lc3NhZ2VBc3luYyI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInByaXZhdGUgYXN5bmMgVGFzayBQcm9jZXNzTWVzc2FnZUFzeW5jKFNlcnZpY2VCdXNSZWNlaXZlciByZWNlaXZlciwgU2VydmljZUJ1c1JlY2VpdmVkTWVzc2FnZSBtZXNzYWdlLCBzdHJpbmcgb3V0cHV0UXVldWVOYW1lLCBBdWRpb1Zpc3VhbCBhdWRpb1Zpc3VhbClcbiAgICAgICAge1xuICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXdhaXQgU2VuZE1lc3NhZ2VUb1F1ZXVlKFN5c3RlbS5UZXh0Lkpzb24uSnNvblNlcmlhbGl6ZXIuU2VyaWFsaXplKGF1ZGlvVmlzdWFsKSwgb3V0cHV0UXVldWVOYW1lKTtcbiAgICAgICAgICAgICAgICBhd2FpdCByZWNlaXZlci5Db21wbGV0ZU1lc3NhZ2VBc3luYyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAvL19sb2dnZXIuTG9nSW5mb3JtYXRpb24oJFwiTWVuc2FnZW0gcHJvY2Vzc2FkYToge21lc3NhZ2UuTWVzc2FnZUlkfVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihleCwgJFwiRXJyb3IgcHJvY2Vzc2luZyBtZXNzYWdlOiB7bWVzc2FnZS5NZXNzYWdlSWR9XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogIklMb2dnZXIiLCAibWV0aG9kIjogIkxvZ0Vycm9yIn0sIHsidHlwZSI6ICJKc29uU2VyaWFsaXplciIsICJtZXRob2QiOiAiU2VyaWFsaXplIn0sIHsidHlwZSI6ICJTZXJ2aWNlQnVzUmVjZWl2ZXIiLCAibWV0aG9kIjogIkNvbXBsZXRlTWVzc2FnZUFzeW5jIn1dfSwgIlByb2Nlc3NNZXNzYWdlc0FzeW5jIjogeyJ0eXBlIjogIm1ldGhvZCIsICJyYXciOiAicHJpdmF0ZSBhc3luYyBUYXNrIFByb2Nlc3NNZXNzYWdlc0FzeW5jKHN0cmluZyBxdWV1ZU5hbWUsIEZ1bmM8U2VydmljZUJ1c1JlY2VpdmVyLCBTZXJ2aWNlQnVzUmVjZWl2ZWRNZXNzYWdlLCBUYXNrPiBwcm9jZXNzTWVzc2FnZSwgQ2FuY2VsbGF0aW9uVG9rZW4gc3RvcHBpbmdUb2tlbilcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHJlY2VpdmVyID0gX3NlcnZpY2VCdXNDbGllbnQuQ3JlYXRlUmVjZWl2ZXIocXVldWVOYW1lKTtcblxuICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKCFzdG9wcGluZ1Rva2VuLklzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gYXdhaXQgcmVjZWl2ZXIuUmVjZWl2ZU1lc3NhZ2VzQXN5bmMobWF4TWVzc2FnZXM6IDEwMCwgbWF4V2FpdFRpbWU6IFRpbWVTcGFuLkZyb21TZWNvbmRzKDEpLCBjYW5jZWxsYXRpb25Ub2tlbjogc3RvcHBpbmdUb2tlbik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VzLkFueSgpKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShcIlRlbSBtZW5zYWdlbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbGxlbE9wdGlvbnMgPSBuZXcgUGFyYWxsZWxPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF4RGVncmVlT2ZQYXJhbGxlbGlzbSA9IEVudmlyb25tZW50LlByb2Nlc3NvckNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQYXJhbGxlbC5Gb3JFYWNoQXN5bmMobWVzc2FnZXMsIHBhcmFsbGVsT3B0aW9ucywgYXN5bmMgKG1zZywgY3QpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc01lc3NhZ2UocmVjZWl2ZXIsIG1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKFwiTlx1MDBlM28gVGVtIG1lbnNhZ2VtXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlY2VpdmVyLkNsb3NlQXN5bmMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSIsICJkZXBlbmRlbmNpZXMiOiBbeyJ0eXBlIjogIklTZXJ2aWNlQnVzQ2xpZW50IiwgIm1ldGhvZCI6ICJDcmVhdGVSZWNlaXZlciJ9LCB7InR5cGUiOiAicmVjZWl2ZXIiLCAibWV0aG9kIjogIlJlY2VpdmVNZXNzYWdlc0FzeW5jIn0sIHsidHlwZSI6ICJUaW1lU3BhbiIsICJtZXRob2QiOiAiRnJvbVNlY29uZHMifSwgeyJ0eXBlIjogIm1lc3NhZ2VzIiwgIm1ldGhvZCI6ICJBbnkifSwgeyJ0eXBlIjogIkNvbnNvbGUiLCAibWV0aG9kIjogIldyaXRlTGluZSJ9LCB7InR5cGUiOiAiUGFyYWxsZWwiLCAibWV0aG9kIjogIkZvckVhY2hBc3luYyJ9LCB7InR5cGUiOiAiQ29uc29sZSIsICJtZXRob2QiOiAiV3JpdGVMaW5lIn0sIHsidHlwZSI6ICJyZWNlaXZlciIsICJtZXRob2QiOiAiQ2xvc2VBc3luYyJ9XX0sICJTZW5kTWVzc2FnZVRvUXVldWUiOiB7InR5cGUiOiAibWV0aG9kIiwgInJhdyI6ICJwcml2YXRlIGFzeW5jIFRhc2sgU2VuZE1lc3NhZ2VUb1F1ZXVlKHN0cmluZyBtZXNzYWdlLCBzdHJpbmcgb3V0cHV0UXVldWVOYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkobWVzc2FnZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dFcnJvcihcIk1lc3NhZ2UgdG8gc2VuZCB0byB0aGUgcXVldWUgaXMgbnVsbCBvciBlbXB0eS5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVzTWVzc2FnZSA9IG5ldyBTZXJ2aWNlQnVzTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZW5kZXIuU2VuZE1lc3NhZ2VBc3luYyhidXNNZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCRcIk1lc3NhZ2Ugc2VudDoge21lc3NhZ2V9XCIpO1xuXG4gICAgICAgICAgICAgICAgX2xvZ2dlci5Mb2dJbmZvcm1hdGlvbihcIk1lc3NhZ2Ugc2VudCB0byB0aGUgcXVldWU6IHttZXNzYWdlfVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhyb3c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0iLCAiZGVwZW5kZW5jaWVzIjogW3sidHlwZSI6ICJJTG9nZ2VyIiwgIm1ldGhvZCI6ICJMb2dFcnJvciJ9LCB7InR5cGUiOiAiSUxvZ2dlciIsICJtZXRob2QiOiAiTG9nSW5mb3JtYXRpb24ifSwgeyJ0eXBlIjogInN0cmluZyIsICJtZXRob2QiOiAiSXNOdWxsT3JFbXB0eSJ9LCB7InR5cGUiOiAic2VuZGVyIiwgIm1ldGhvZCI6ICJTZW5kTWVzc2FnZUFzeW5jIn0sIHsidHlwZSI6ICJDb25zb2xlIiwgIm1ldGhvZCI6ICJXcml0ZUxpbmUifV19fX19LCAiRWNhZEdsb2JvcGxleS5EYXRhIjogeyJDbGFzczEiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHt9fX0sICJUaXR1bGFyZXNPYnJhTXVzaWNhbCI6IHsiRnVuY3Rpb24xIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7IlJ1biI6IHsidHlwZSI6ICJtZXRob2QiLCAicmF3IjogInB1YmxpYyB2b2lkIFJ1bihbU2VydmljZUJ1c1RyaWdnZXIoXCJteXF1ZXVlXCIsIENvbm5lY3Rpb24gPSBcIlwiKV1zdHJpbmcgbXlRdWV1ZUl0ZW0sIElMb2dnZXIgbG9nKVxuICAgICAgICB7XG4gICAgICAgICAgICBsb2cuTG9nSW5mb3JtYXRpb24oJFwiQyMgU2VydmljZUJ1cyBxdWV1ZSB0cmlnZ2VyIGZ1bmN0aW9uIHByb2Nlc3NlZCBtZXNzYWdlOiB7bXlRdWV1ZUl0ZW19XCIpO1xuICAgICAgICB9IiwgImRlcGVuZGVuY2llcyI6IFt7InR5cGUiOiAibG9nIiwgIm1ldGhvZCI6ICJMb2dJbmZvcm1hdGlvbiJ9XX19fX0sICJXb3JrZXIiOiB7InR5cGUiOiAiY2xhc3MiLCAibWVtYmVycyI6IHt9fSwgIldvcmtlckNEQyI6IHsiV29ya2VyIjogeyJ0eXBlIjogImNsYXNzIiwgIm1lbWJlcnMiOiB7fX19fQ==")
}